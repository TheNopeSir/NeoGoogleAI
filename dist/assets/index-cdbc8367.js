import{r as e,j as t,R as s,c as r}from"./vendor-react-0e43bb6b.js";import{o as a}from"./vendor-idb-22bc75a1.js";import{T as i,U as l,S as n,a as o,L as c,E as d,b as x,C as m,c as p,A as h,M as u,W as b,R as f,D as g,G as w,d as j,e as N,f as v,g as y,h as k,i as C,Z as E,j as S,k as I,F as T,l as L,m as A,I as O,H as R,n as D,o as z,p as U,q as _,K as M,P as F,r as P,s as B,t as H,u as G,v as $,w as Y,x as W,X as V,y as q,z as K,B as X,J as Z,N as J,O as Q,Q as ee,V as te,Y as se,_ as re,$ as ae,a0 as ie,a1 as le,a2 as ne,a3 as oe,a4 as ce,a5 as de,a6 as xe,a7 as me,a8 as pe,a9 as he,aa as ue,ab as be,ac as fe,ad as ge,ae as we,af as je,ag as Ne,ah as ve,ai as ye,aj as ke,ak as Ce,al as Ee,am as Se,an as Ie,ao as Te,ap as Le,aq as Ae,ar as Oe,as as Re,at as De,au as ze,av as Ue,aw as _e,ax as Me}from"./vendor-icons-1b8228bc.js";import"./vendor-88abe87b.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const Fe=({theme:s})=>{const r=e.useRef(null);return e.useEffect(()=>{if("light"===s){const e=r.current;if(e){const t=e.getContext("2d");t&&t.clearRect(0,0,e.width,e.height)}return}const e=r.current;if(!e)return;const t=e.getContext("2d");if(!t)return;let a=e.width=window.innerWidth,i=e.height=window.innerHeight;const l=Math.floor(a/20),n=new Array(l).fill(1),o="ã‚¢ã‚¡ã‚«ã‚µã‚¿ãƒŠãƒãƒžãƒ¤ãƒ£ãƒ©ãƒ¯ã‚¬ã‚¶ãƒ€ãƒãƒ‘ã‚¤ã‚£ã‚­ã‚·ãƒãƒ‹ãƒ’ãƒŸãƒªãƒ°ã‚®ã‚¸ãƒ‚ãƒ“ãƒ”ã‚¦ã‚¥ã‚¯ã‚¹ãƒ„ãƒŒãƒ•ãƒ ãƒ¦ãƒ¥ãƒ«ã‚°ã‚ºãƒ–ãƒ…ãƒ—ã‚¨ã‚§ã‚±ã‚»ãƒ†ãƒãƒ˜ãƒ¡ãƒ¬ãƒ±ã‚²ã‚¼ãƒ‡ãƒ™ãƒšã‚ªã‚©ã‚³ã‚½ãƒˆãƒŽãƒ›ãƒ¢ãƒ¨ãƒ§ãƒ­ãƒ²ã‚´ã‚¾ãƒ‰ãƒœãƒãƒ´ãƒƒãƒ³0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",c=setInterval(()=>{t.fillStyle="rgba(9, 9, 11, 0.1)",t.fillRect(0,0,a,i),t.fillStyle="#22c55e",t.font="15px monospace";for(let e=0;e<n.length;e++){const s=o.charAt(Math.floor(119*Math.random()));t.fillText(s,20*e,20*n[e]),20*n[e]>i&&Math.random()>.975&&(n[e]=0),n[e]++}},50),d=()=>{a=e.width=window.innerWidth,i=e.height=window.innerHeight};return window.addEventListener("resize",d),()=>{clearInterval(c),window.removeEventListener("resize",d)}},[s]),t.jsx("canvas",{ref:r,className:"fixed top-0 left-0 w-full h-full -z-10 transition-opacity duration-500 pointer-events-none "+("light"===s?"opacity-0":"opacity-15")})},Pe=()=>t.jsxs("div",{className:"pointer-events-none fixed inset-0 z-20 overflow-hidden h-full w-full mix-blend-overlay opacity-30",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-[rgba(255,255,255,0.03)] to-transparent animate-scanline h-[100vh] w-full"}),t.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(18,16,16,0)_50%,rgba(0,0,0,0.1)_50%),linear-gradient(90deg,rgba(255,0,0,0.03),rgba(0,255,0,0.01),rgba(0,0,255,0.03))] bg-[length:100%_3px,3px_100%] pointer-events-none"}),t.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle,transparent_60%,rgba(0,0,0,0.4)_150%)]"})]}),Be="neo_active_user",He="NEO_RESET_2025_V1";let Ge={exhibits:[],collections:[],notifications:[],messages:[],users:[],guestbook:[],wishlist:[],guilds:[],tradeRequests:[]},$e=null;const Ye=()=>($e||($e=a("NeoArchive_V3_Turbo",2,{upgrade(e){if(e.objectStoreNames.contains("system")||e.createObjectStore("system"),!e.objectStoreNames.contains("exhibits")){const t=e.createObjectStore("exhibits",{keyPath:"id"});t.createIndex("by-owner","owner"),t.createIndex("by-date","timestamp")}if(!e.objectStoreNames.contains("collections")){e.createObjectStore("collections",{keyPath:"id"}).createIndex("by-owner","owner")}if(e.objectStoreNames.contains("users")||e.createObjectStore("users",{keyPath:"username"}),!e.objectStoreNames.contains("notifications")){e.createObjectStore("notifications",{keyPath:"id"}).createIndex("by-recipient","recipient")}e.objectStoreNames.contains("messages")||e.createObjectStore("messages",{keyPath:"id"}),e.objectStoreNames.contains("generic")||e.createObjectStore("generic",{keyPath:"id"})},blocked(){console.warn("Database blocked: please close other tabs with this app open.")},blocking(){$e&&($e.then(e=>e.close()),$e=null)},terminated(){console.error("Database terminated unexpectedly")}})),$e),We=[],Ve=()=>We.forEach(e=>e()),qe=new Map,Ke=async(e,t="GET",s)=>{const r="GET"===t?`${t}:${e}`:null;if(r&&qe.has(r))return console.log(`[API] Deduplicating request: ${e}`),qe.get(r);const a=new AbortController,i=setTimeout(()=>a.abort(),15e3),l=(async()=>{try{const r={method:t,headers:{"Content-Type":"application/json"},signal:a.signal};s&&(r.body=JSON.stringify(s));let l=`/api${e}`;if("GET"===t){const e=l.includes("?")?"&":"?";l+=`${e}_t=${Date.now()}`}const n=await fetch(l,r);if(clearTimeout(i),!n.ok){const e=await n.text();throw new Error(`API Error ${n.status}: ${e.slice(0,100)}`)}return await n.json()}catch(l){if(clearTimeout(i),"AbortError"===l.name)throw console.warn(`[API] Timeout on ${e} - switching to offline mode logic`),new Error("Network timeout");throw console.error(`âŒ API Call Failed [${e}]:`,l.message),l}finally{r&&qe.delete(r)}})();return r&&qe.set(r,l),l},Xe=async(e,t)=>{const s=await Ye();await s.put("generic",{id:t.id,table:e,data:t})},Ze=async e=>{const t=await Ye();await t.delete("generic",e)},Je=async()=>{try{if(Ge.exhibits.length>0)return console.log("âœ… [Sync] Using cached feed data, will refresh in background"),void Ke("/feed?limit=10").then(e=>{Array.isArray(e)&&(Ge.exhibits=e.sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()),Ve(),Ye().then(t=>{const s=t.transaction("exhibits","readwrite");return e.forEach(e=>s.store.put(e)),s.done}))}).catch(e=>console.warn("[Sync] Background feed refresh failed:",e));console.log("ðŸ“¦ [Sync] Loading critical feed data...");const e=await Ke("/feed?limit=10");if(!Array.isArray(e))return;Ge.exhibits=e.sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()),Ve(),Ye().then(t=>{const s=t.transaction("exhibits","readwrite");return e.forEach(e=>s.store.put(e)),s.done}).then(()=>console.log("âœ… [Sync] Feed persisted")),console.log(`âœ… [Sync] Feed loaded: ${e.length} items`)}catch(e){console.warn("[Sync] Critical feed load failed:",e)}},Qe=async e=>{console.log("ðŸ”„ [Sync] Starting background sync...");const t=await Ye(),s=async(e,s,r,a)=>{try{const i=await Ke(e);if(!Array.isArray(i))return;a?"exhibits"===a?Ge.exhibits=i.sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()):Ge[a]=i:"generic"===s&&("wishlist"===r&&(Ge.wishlist=i),"guestbook"===r&&(Ge.guestbook=i)),Ve();const l=t.transaction(s,"readwrite"),n=l.objectStore(s);"generic"===s&&r?i.forEach(e=>n.put({id:e.id,table:r,data:e})):i.forEach(e=>n.put(e)),await l.done,console.log(`âœ… [Sync] ${e} persisted`)}catch(i){console.warn(`[Sync] Failed ${e}:`,i)}};Promise.allSettled([s("/feed?limit=30","exhibits",void 0,"exhibits"),s("/users","users",void 0,"users"),s("/collections","collections",void 0,"collections"),s("/wishlist","generic","wishlist","wishlist"),s("/guestbook","generic","guestbook","guestbook")]).then(e=>{const t=e.filter(e=>"rejected"===e.status);t.length>0&&console.warn(`[Sync] ${t.length} requests failed`)}),e&&(Ke(`/sync?username=${e}`).then(async e=>{if(e){if(e.users?.length){const s=t.transaction("users","readwrite");e.users.forEach(e=>{s.store.put(e);const t=Ge.users.findIndex(t=>t.username===e.username);-1!==t?Ge.users[t]=e:Ge.users.push(e)}),await s.done}if(e.collections?.length){const s=t.transaction("collections","readwrite");e.collections.forEach(e=>{s.store.put(e);const t=Ge.collections.findIndex(t=>t.id===e.id);-1!==t?Ge.collections[t]=e:Ge.collections.push(e)}),await s.done}Ve()}}).catch(e=>console.warn("[Sync] Personal Sync Error",e)),Promise.all([Ke(`/notifications?username=${e}`),Ke(`/messages?username=${e}`)]).then(async([e,s])=>{const r=t.transaction(["notifications","messages"],"readwrite");Array.isArray(e)&&(e.forEach(e=>r.objectStore("notifications").put(e)),Ge.notifications=e),Array.isArray(s)&&(s.forEach(e=>r.objectStore("messages").put(e)),Ge.messages=s),await r.done,Ve()}).catch(e=>console.warn("[Sync] Messages Sync Error",e)))},et=async()=>{try{localStorage.removeItem("neo_archive_db_cache_v2")}catch(t){}if(localStorage.getItem("neo_force_reset_key")!==He){console.warn("âš ï¸ FORCE CLEARING CACHE FOR UPDATE");try{const e=await Ye();await e.clear("exhibits"),await e.clear("collections"),await e.clear("users"),await e.clear("notifications"),await e.clear("messages"),await e.clear("generic"),localStorage.setItem("neo_force_reset_key",He)}catch(t){console.error("Cache reset failed:",t)}}let e;await(async()=>{try{const e=await Promise.race([Ye(),new Promise((e,t)=>setTimeout(()=>t(new Error("DB_OPEN_TIMEOUT")),2e3))]),[t,s,r]=await Promise.all([e.getAll("users"),e.getAll("notifications"),e.getAll("messages")]);Ge.users=t,Ge.notifications=s,Ge.messages=r}catch(t){console.warn("Critical hydration failed (clean slate?):",t)}})(),await(async()=>{try{const e=await Ye(),[t,s,r]=await Promise.all([e.getAll("exhibits"),e.getAll("collections"),e.getAll("generic")]);Ge.exhibits=t.sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()),Ge.collections=s,Ge.wishlist=r.filter(e=>"wishlist"===e.table).map(e=>e.data),Ge.guestbook=r.filter(e=>"guestbook"===e.table).map(e=>e.data),Ge.guilds=r.filter(e=>"guilds"===e.table).map(e=>e.data),Ge.tradeRequests=r.filter(e=>"tradeRequests"===e.table).map(e=>e.data),console.log(`[NeoDB] Content Hydrated: ${t.length} items`),Ve()}catch(t){console.error("Content hydration failed:",t)}})();try{const t=await Ye(),s=await t.get("system",Be);e=s?.value}catch(t){console.warn("Could not read session from DB")}return e?(await Je(),Qe(e),Ge.users.find(t=>t.username===e)||null):null},tt=()=>({...Ge}),st=async e=>{const t=Ge.exhibits.findIndex(t=>t.id===e.id);-1!==t&&(Ge.exhibits[t]=e),Ve();const s=await Ye();await s.put("exhibits",e),await Ke("/exhibits","POST",e)},rt=async e=>{Ge.collections=Ge.collections.map(t=>t.id===e.id?e:t),Ve();const t=await Ye();await t.put("collections",e),await Ke("/collections","POST",e)},at=async e=>{Ge.collections=Ge.collections.filter(t=>t.id!==e),Ve();const t=await Ye();await t.delete("collections",e),await Ke(`/collections/${e}`,"DELETE")},it=async e=>{const t=Ge.users.findIndex(t=>t.username===e.username);-1!==t&&(Ge.users[t]=e),Ve();const s=await Ye();await s.put("users",e),await Ke("/users","POST",{id:e.username,...e})},lt=async(e,t,s,r,a)=>{const i={id:crypto.randomUUID(),type:t,recipient:e,actor:s,targetId:r,targetPreview:a,timestamp:(new Date).toISOString(),isRead:!1};await Ke("/notifications","POST",i)},nt=e=>{if(!e)return"https://ui-avatars.com/api/?name=NA&background=000&color=fff";const t=Ge.users.find(t=>t.username===e);return t?.avatarUrl?t.avatarUrl:`https://ui-avatars.com/api/?name=${e}&background=random&color=fff&bold=true`},ot=e=>new Promise((t,s)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>t(r.result),r.onerror=e=>s(e)}),ct=async(e,t)=>{const s=Ge.users.find(t=>t.username===e);s&&(s.following.includes(t)?s.following=s.following.filter(e=>e!==t):s.following.push(t),await it(s))},dt=({theme:s,onLogin:r})=>{const[a,g]=e.useState("ENTRY"),[w,j]=e.useState(""),[N,v]=e.useState(""),[y,k]=e.useState(!1),[C,E]=e.useState(""),[S,I]=e.useState(!0),T=e.useRef(null),[L,A]=e.useState(""),[O,R]=e.useState(""),[D,z]=e.useState(!1),[U,_]=e.useState(!1),[M,F]=e.useState(null);e.useEffect(()=>{"true"===new URLSearchParams(window.location.search).get("verified")&&(R("ÐŸÐžÐ§Ð¢Ð ÐŸÐžÐ”Ð¢Ð’Ð•Ð Ð–Ð”Ð•ÐÐ"),g("LOGIN"),window.history.replaceState({},document.title,window.location.pathname+window.location.hash)),fetch("/api/health").then(e=>e.json()).then(e=>{"number"==typeof e.totalUsers&&F(e.totalUsers)}).catch(console.error)},[]),e.useEffect(()=>{if("TELEGRAM"===a&&T.current){window.onTelegramAuth=async e=>{_(!0);try{const t=await(async e=>{const t=await Ke("/auth/telegram","POST",e),s=await Ye();return await s.put("system",{key:Be,value:t.username},Be),await s.put("users",t),Ge.users.push(t),Ve(),Qe(t.username),t})(e);await r(t,!0)}catch(t){A("LOGIN FAILED: "+(t.message||"Server Error")),_(!1)}},T.current.innerHTML="";const e=document.createElement("script");e.src="https://telegram.org/js/telegram-widget.js?22",e.async=!0,e.setAttribute("data-telegram-login","TrusterStoryBot"),e.setAttribute("data-size","large"),e.setAttribute("data-radius","10"),e.setAttribute("data-onauth","onTelegramAuth(user)"),e.setAttribute("data-request-access","write"),T.current.appendChild(e)}},[a,r]);const P=()=>{A(""),R(""),z(!1),v(""),E(""),k(!1)},B=()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let t="";for(let s=0;s<16;s++)t+=e.charAt(Math.floor(70*Math.random()));v(t),k(!0)},H=async e=>{e.preventDefault(),_(!0),A(""),R("");const t=w.trim(),s=N.trim();try{const e=await(async(e,t)=>{const s=await Ke("/auth/login","POST",{identifier:e,password:t}),r=await Ye();await r.put("system",{key:Be,value:s.username},Be),await r.put("users",s);const a=Ge.users.findIndex(e=>e.username===s.username);return-1!==a?Ge.users[a]=s:Ge.users.push(s),Ve(),await Je(),Qe(s.username),s})(t,s);await r(e,S)}catch(a){A(a.message||"ÐžÐ¨Ð˜Ð‘ÐšÐ ÐÐ’Ð¢ÐžÐ Ð˜Ð—ÐÐ¦Ð˜Ð˜"),_(!1)}},G=async e=>{if(e.preventDefault(),!w||!N||!C)return void A("Ð—ÐÐŸÐžÐ›ÐÐ˜Ð¢Ð• Ð’Ð¡Ð• ÐŸÐžÐ›Ð¯");_(!0),A(""),z(!1);const t=w.trim().toLowerCase(),s=C.trim(),r=N.trim();try{await(async(e,t,s,r)=>{const a=await Ke("/auth/register","POST",{username:e,password:t,tagline:s,email:r}),i=await Ye();return await i.put("system",{key:Be,value:a.username},Be),await i.put("users",a),Ge.users.push(a),Ve(),await Je(),Qe(a.username),a})(s,r,"ÐÐ¾Ð²Ñ‹Ð¹ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ",t),R("Ð£Ð¡ÐŸÐ•Ð¨ÐÐž. Ð¢Ð•ÐŸÐ•Ð Ð¬ Ð’ÐžÐ™Ð”Ð˜Ð¢Ð•."),g("LOGIN"),v("")}catch(a){A(a.message||"ÐžÐ¨Ð˜Ð‘ÐšÐ Ð Ð•Ð“Ð˜Ð¡Ð¢Ð ÐÐ¦Ð˜Ð˜"),a.message?.includes("Ð·Ð°Ð½ÑÑ‚Ñ‹")&&(z(!0),R("Email Ð¸Ð»Ð¸ ÐÐ¸ÐºÐ½ÐµÐ¹Ð¼ Ð·Ð°Ð½ÑÑ‚"))}finally{_(!1)}},$=async e=>{if(e.preventDefault(),w){_(!0),A(""),R("");try{await(async e=>await Ke("/auth/recover","POST",{email:e}))(w.trim().toLowerCase()),R("ÐÐžÐ’Ð«Ð™ ÐŸÐÐ ÐžÐ›Ð¬ ÐžÐ¢ÐŸÐ ÐÐ’Ð›Ð•Ð ÐÐ EMAIL"),g("LOGIN")}catch(t){A(t.message||"ÐžÐ¨Ð˜Ð‘ÐšÐ Ð’ÐžÐ¡Ð¡Ð¢ÐÐÐžÐ’Ð›Ð•ÐÐ˜Ð¯")}finally{_(!1)}}else A("Ð£ÐšÐÐ–Ð˜Ð¢Ð• EMAIL")};return t.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-black",children:t.jsx("div",{className:"w-full max-w-sm p-8 bg-black border border-white/10 rounded-lg shadow-[0_0_30px_rgba(0,0,0,0.5)]",children:"ENTRY"===a?t.jsxs("div",{className:"flex flex-col gap-4 w-full",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("button",{onClick:()=>{g("LOGIN"),P()},className:"py-8 border font-pixel text-xs uppercase tracking-widest hover:bg-white hover:text-black transition-colors flex flex-col items-center gap-2 border-white/20 text-white/80",children:[t.jsx(i,{size:24}),t.jsx("span",{children:"Ð’Ð¥ÐžÐ”"})]}),t.jsxs("button",{onClick:()=>{g("REGISTER"),P()},className:"py-8 border font-pixel text-xs uppercase tracking-widest hover:bg-white hover:text-black transition-colors flex flex-col items-center gap-2 border-white/20 text-white/80",children:[t.jsx(l,{size:24}),t.jsx("span",{children:"Ð Ð•Ð“"})]})]}),t.jsxs("button",{onClick:()=>{g("TELEGRAM"),P()},className:"py-4 border font-pixel text-[10px] uppercase tracking-widest hover:bg-[#0088cc] hover:text-white hover:border-[#0088cc] transition-colors flex items-center justify-center gap-2 border-white/20 text-white/60",children:[t.jsx(n,{size:16})," TELEGRAM"]}),null!==M&&t.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 opacity-50",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse shadow-[0_0_5px_#22c55e]"}),t.jsxs("span",{className:"text-[10px] font-mono text-green-500 tracking-[0.2em]",children:["ACTIVE_NODES: ",M.toLocaleString()]})]})]}):"TELEGRAM"===a?t.jsxs("div",{className:"flex flex-col gap-4 w-full",children:[t.jsx("div",{className:"flex justify-center my-4 min-h-[80px]",ref:T,children:t.jsx("div",{className:"animate-pulse text-[10px] font-mono text-white/50",children:"..."})}),L&&t.jsx("div",{className:"text-red-500 text-[10px] font-mono text-center",children:L}),t.jsx("button",{type:"button",onClick:()=>{g("ENTRY"),P()},className:"text-[10px] font-mono opacity-50 hover:underline text-center text-white",children:"ÐžÐ¢ÐœÐ•ÐÐ"})]}):"LOGIN"===a?t.jsxs("form",{onSubmit:H,className:"flex flex-col gap-4 w-full",children:[O&&t.jsx("div",{className:"text-green-500 text-[10px] font-mono text-center mb-2",children:O}),t.jsxs("div",{className:"flex items-center gap-2 border-b p-3 border-white/20",children:[t.jsx(o,{size:16,className:"text-white/50"}),t.jsx("input",{value:w,onChange:e=>j(e.target.value),type:"text",className:"bg-transparent w-full focus:outline-none font-mono text-sm text-white placeholder-white/30",placeholder:"LOGIN / EMAIL",required:!0})]}),t.jsxs("div",{className:"flex items-center gap-2 border-b p-3 border-white/20",children:[t.jsx(c,{size:16,className:"text-white/50"}),t.jsx("input",{value:N,onChange:e=>v(e.target.value),type:y?"text":"password",className:"bg-transparent w-full focus:outline-none font-mono text-sm text-white placeholder-white/30",placeholder:"******",required:!0}),t.jsx("button",{type:"button",onClick:()=>k(!y),className:"opacity-50 hover:opacity-100 focus:outline-none text-white",children:y?t.jsx(d,{size:16}):t.jsx(x,{size:16})})]}),t.jsxs("div",{className:"flex justify-between items-center px-1",children:[t.jsxs("div",{onClick:()=>I(!S),className:"flex items-center gap-2 cursor-pointer opacity-70 hover:opacity-100 select-none text-white",children:[S?t.jsx(m,{size:14}):t.jsx(p,{size:14}),t.jsx("span",{className:"text-[10px] font-mono uppercase",children:"Ð¡ÐžÐ¥Ð ÐÐÐ˜Ð¢Ð¬"})]}),t.jsx("button",{type:"button",onClick:()=>{g("RECOVERY"),A("")},className:"text-[10px] font-mono text-white/50 hover:text-white hover:underline uppercase",children:"Ð—Ð°Ð±Ñ‹Ð»Ð¸ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ?"})]}),L&&t.jsxs("div",{className:"flex items-center gap-2 text-red-500 text-[10px] font-mono justify-center",children:[t.jsx(h,{size:14})," ",L]}),t.jsx("button",{type:"submit",disabled:U,className:"mt-2 py-3 font-bold font-pixel text-xs uppercase bg-white text-black hover:bg-gray-200",children:U?"...":"Ð’ÐžÐ™Ð¢Ð˜"}),t.jsx("button",{type:"button",onClick:()=>{g("ENTRY"),P()},className:"text-[10px] font-mono opacity-50 hover:underline text-center text-white",children:"ÐÐÐ—ÐÐ”"})]}):"REGISTER"===a?t.jsxs("form",{onSubmit:G,className:"flex flex-col gap-4 w-full",children:[t.jsxs("div",{className:"flex items-center gap-2 border-b p-2 border-white/20",children:[t.jsx(u,{size:16,className:"text-white/50"}),t.jsx("input",{value:w,onChange:e=>j(e.target.value),type:"email",className:"bg-transparent w-full focus:outline-none font-mono text-sm text-white placeholder-white/30",placeholder:"EMAIL",required:!0})]}),t.jsxs("div",{className:"flex items-center gap-2 border-b p-2 border-white/20",children:[t.jsx(o,{size:16,className:"text-white/50"}),t.jsx("input",{value:C,onChange:e=>E(e.target.value),className:"bg-transparent w-full focus:outline-none font-mono text-sm text-white placeholder-white/30",placeholder:"NICKNAME",required:!0})]}),t.jsxs("div",{className:"flex items-center gap-2 border-b p-2 border-white/20",children:[t.jsx(c,{size:16,className:"text-white/50"}),t.jsx("input",{value:N,onChange:e=>v(e.target.value),type:y?"text":"password",className:"bg-transparent w-full focus:outline-none font-mono text-sm text-white placeholder-white/30",placeholder:"PASS",required:!0}),t.jsx("button",{type:"button",onClick:B,className:"opacity-50 hover:opacity-100 text-white",children:t.jsx(b,{size:14})})]}),L&&t.jsx("div",{className:"text-red-500 text-[10px] font-mono text-center",children:L}),t.jsx("button",{type:"submit",disabled:U,className:"mt-2 py-3 font-bold font-pixel text-xs uppercase bg-white text-black hover:bg-gray-200",children:U?"...":"Ð¡ÐžÐ—Ð”ÐÐ¢Ð¬"}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("button",{type:"button",onClick:()=>{g("ENTRY"),P()},className:"text-[10px] font-mono opacity-50 hover:underline text-white",children:"ÐÐÐ—ÐÐ”"}),D&&t.jsx("button",{type:"button",onClick:()=>g("RECOVERY"),className:"text-[10px] font-mono text-yellow-500 hover:underline",children:"Ð’ÐžÐ¡Ð¡Ð¢ÐÐÐžÐ’Ð˜Ð¢Ð¬?"})]})]}):"RECOVERY"===a?t.jsxs("form",{onSubmit:$,className:"flex flex-col gap-4 w-full animate-in fade-in",children:[t.jsx("h3",{className:"text-white font-pixel text-xs text-center mb-2",children:"Ð’ÐžÐ¡Ð¡Ð¢ÐÐÐžÐ’Ð›Ð•ÐÐ˜Ð• Ð”ÐžÐ¡Ð¢Ð£ÐŸÐ"}),t.jsxs("div",{className:"flex items-center gap-2 border-b p-3 border-white/20",children:[t.jsx(u,{size:16,className:"text-white/50"}),t.jsx("input",{value:w,onChange:e=>j(e.target.value),type:"email",className:"bg-transparent w-full focus:outline-none font-mono text-sm text-white placeholder-white/30",placeholder:"Ð’ÐÐ¨ EMAIL",required:!0})]}),t.jsx("p",{className:"text-[10px] font-mono text-white/50 text-center",children:"Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° ÑÐ³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÑ‚ Ð½Ð¾Ð²Ñ‹Ð¹ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ Ð¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ ÐµÐ³Ð¾ Ð½Ð° ÑƒÐºÐ°Ð·Ð°Ð½Ð½ÑƒÑŽ Ð¿Ð¾Ñ‡Ñ‚Ñƒ."}),L&&t.jsxs("div",{className:"flex items-center gap-2 text-red-500 text-[10px] font-mono justify-center",children:[t.jsx(h,{size:14})," ",L]}),t.jsx("button",{type:"submit",disabled:U,className:"mt-2 py-3 font-bold font-pixel text-xs uppercase bg-white text-black hover:bg-gray-200 flex items-center justify-center gap-2",children:U?"...":t.jsxs(t.Fragment,{children:[t.jsx(f,{size:14})," Ð¡Ð‘Ð ÐžÐ¡Ð˜Ð¢Ð¬"]})}),t.jsx("button",{type:"button",onClick:()=>{g("LOGIN"),P()},className:"text-[10px] font-mono opacity-50 hover:underline text-center text-white",children:"ÐžÐ¢ÐœÐ•ÐÐ"})]}):void 0})})},xt={PHONES:"Ð¢Ð•Ð›Ð•Ð¤ÐžÐÐ«",GAMES:"Ð˜Ð“Ð Ð«",MAGAZINES:"Ð–Ð£Ð ÐÐÐ›Ð«",MUSIC:"ÐœÐ£Ð—Ð«ÐšÐ",VIDEO:"Ð’Ð˜Ð”Ð•Ðž",TOYS:"Ð˜Ð“Ð Ð£Ð¨ÐšÐ˜",COMPUTERS:"ÐšÐžÐœÐŸÐ¬Ð®Ð¢Ð•Ð Ð«",CAMERAS:"ÐšÐÐœÐ•Ð Ð«",MISC:"ÐŸÐ ÐžÐ§Ð•Ð•"},mt={[xt.PHONES]:["Ð¡Ð¼Ð°Ñ€Ñ‚Ñ„Ð¾Ð½Ñ‹","ÐšÐ½Ð¾Ð¿Ð¾Ñ‡Ð½Ñ‹Ðµ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ñ‹","Ð Ð°ÑÐºÐ»Ð°Ð´ÑƒÑˆÐºÐ¸","Ð¡Ð»Ð°Ð¹Ð´ÐµÑ€Ñ‹","ÐšÐŸÐš","Ð¡Ñ‚Ð°Ñ†Ð¸Ð¾Ð½Ð°Ñ€Ð½Ñ‹Ðµ","ÐŸÐµÐ¹Ð´Ð¶ÐµÑ€Ñ‹"],[xt.GAMES]:["ÐšÐ°Ñ€Ñ‚Ñ€Ð¸Ð´Ð¶Ð¸ (8-bit/16-bit)","Ð”Ð¸ÑÐºÐ¸ (CD/DVD/BD)","ÐŸÐ¾Ñ€Ñ‚Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ðµ ÐºÐ¾Ð½ÑÐ¾Ð»Ð¸","Ð¡Ñ‚Ð°Ñ†Ð¸Ð¾Ð½Ð°Ñ€Ð½Ñ‹Ðµ ÐºÐ¾Ð½ÑÐ¾Ð»Ð¸","ÐÐºÑÐµÑÑÑƒÐ°Ñ€Ñ‹","ÐÑ€ÐºÐ°Ð´Ð½Ñ‹Ðµ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ñ‹"],[xt.MAGAZINES]:["Ð˜Ð³Ñ€Ð¾Ð²Ñ‹Ðµ","ÐšÐ¾Ð¼Ð¿ÑŒÑŽÑ‚ÐµÑ€Ð½Ñ‹Ðµ","Ð¢ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ","ÐœÑƒÐ·Ñ‹ÐºÐ°Ð»ÑŒÐ½Ñ‹Ðµ","ÐšÐ¾Ð¼Ð¸ÐºÑÑ‹","ÐšÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð¸","ÐŸÐ¾ÑÑ‚ÐµÑ€Ñ‹"],[xt.MUSIC]:["ÐÑƒÐ´Ð¸Ð¾ÐºÐ°ÑÑÐµÑ‚Ñ‹","Ð’Ð¸Ð½Ð¸Ð» (LP/EP)","CD","MiniDisc","ÐŸÐ»ÐµÐµÑ€Ñ‹ (ÐŸÐ¾Ñ€Ñ‚Ð°Ñ‚Ð¸Ð²)","Hi-Fi ÐšÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ñ‹","ÐšÐ°Ñ‚ÑƒÑˆÐºÐ¸"],[xt.VIDEO]:["VHS","DVD","Blu-ray","Ð’Ð¸Ð´ÐµÐ¾Ð¿Ð»ÐµÐµÑ€Ñ‹","ÐŸÑ€Ð¾ÐµÐºÑ‚Ð¾Ñ€Ñ‹","Video CD"],[xt.TOYS]:["Action Figures","ÐšÐ¾Ð½ÑÑ‚Ñ€ÑƒÐºÑ‚Ð¾Ñ€Ñ‹","ÐœÑÐ³ÐºÐ¸Ðµ Ð¸Ð³Ñ€ÑƒÑˆÐºÐ¸","Ð Ð¾Ð±Ð¾Ñ‚Ñ‹","ÐÐ°ÑÑ‚Ð¾Ð»ÑŒÐ½Ñ‹Ðµ Ð¸Ð³Ñ€Ñ‹","Ð¢Ð°Ð¼Ð°Ð³Ð¾Ñ‡Ð¸/Ð­Ð»ÐµÐºÑ‚Ñ€Ð¾Ð½Ð¸ÐºÐ°","ÐœÐ¾Ð´ÐµÐ»Ð¸Ð·Ð¼"],[xt.COMPUTERS]:["Ð ÐµÑ‚Ñ€Ð¾ ÐŸÐš","ÐÐ¾ÑƒÑ‚Ð±ÑƒÐºÐ¸","ÐšÐ¾Ð¼Ð¿Ð»ÐµÐºÑ‚ÑƒÑŽÑ‰Ð¸Ðµ","ÐŸÐµÑ€Ð¸Ñ„ÐµÑ€Ð¸Ñ","ÐÐ¾ÑÐ¸Ñ‚ÐµÐ»Ð¸ (Floppy/ZIP)"],[xt.CAMERAS]:["ÐŸÐ»ÐµÐ½Ð¾Ñ‡Ð½Ñ‹Ðµ","Ð¦Ð¸Ñ„Ñ€Ð¾Ð²Ñ‹Ðµ (Early Digital)","Polaroid/Instax","Ð’Ð¸Ð´ÐµÐ¾ÐºÐ°Ð¼ÐµÑ€Ñ‹","ÐžÐ±ÑŠÐµÐºÑ‚Ð¸Ð²Ñ‹"],[xt.MISC]:["Ð§Ð°ÑÑ‹","ÐšÐ°Ð»ÑŒÐºÑƒÐ»ÑÑ‚Ð¾Ñ€Ñ‹","ÐœÐµÑ€Ñ‡","Ð£Ð¿Ð°ÐºÐ¾Ð²ÐºÐ°","Ð ÐµÐºÐ»Ð°Ð¼Ð°","Ð”Ñ€ÑƒÐ³Ð¾Ðµ"]},pt={[xt.PHONES]:["Ð‘Ñ€ÐµÐ½Ð´","ÐœÐ¾Ð´ÐµÐ»ÑŒ","Ð“Ð¾Ð´ Ð²Ñ‹Ð¿ÑƒÑÐºÐ°","Ð¡Ñ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚ ÑÐ²ÑÐ·Ð¸","Ð¢Ð¸Ð¿ ÐºÐ¾Ñ€Ð¿ÑƒÑÐ°"],[xt.GAMES]:["ÐŸÐ»Ð°Ñ‚Ñ„Ð¾Ñ€Ð¼Ð°","ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ","Ð ÐµÐ³Ð¸Ð¾Ð½","Ð“Ð¾Ð´","ÐšÐ¾Ð¼Ð¿Ð»ÐµÐºÑ‚Ð°Ñ†Ð¸Ñ"],[xt.MAGAZINES]:["ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ","ÐÐ¾Ð¼ÐµÑ€","Ð“Ð¾Ð´","Ð˜Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒÑÑ‚Ð²Ð¾","Ð¯Ð·Ñ‹Ðº"],[xt.MUSIC]:["Ð˜ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒ","ÐÐ»ÑŒÐ±Ð¾Ð¼","Ð“Ð¾Ð´","ÐÐ¾ÑÐ¸Ñ‚ÐµÐ»ÑŒ","Ð¡Ð¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ"],[xt.VIDEO]:["ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ","Ð“Ð¾Ð´","ÐÐ¾ÑÐ¸Ñ‚ÐµÐ»ÑŒ","Ð ÐµÐ¶Ð¸ÑÑÐµÑ€","Ð˜Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ"],[xt.TOYS]:["ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ","Ð¡ÐµÑ€Ð¸Ñ","Ð‘Ñ€ÐµÐ½Ð´","Ð“Ð¾Ð´","ÐœÐ°Ñ‚ÐµÑ€Ð¸Ð°Ð»"],[xt.COMPUTERS]:["Ð‘Ñ€ÐµÐ½Ð´","ÐœÐ¾Ð´ÐµÐ»ÑŒ","ÐŸÑ€Ð¾Ñ†ÐµÑÑÐ¾Ñ€","ÐžÐ—Ð£","Ð“Ð¾Ð´"],[xt.CAMERAS]:["Ð‘Ñ€ÐµÐ½Ð´","ÐœÐ¾Ð´ÐµÐ»ÑŒ","Ð¢Ð¸Ð¿","ÐœÐ°Ñ‚Ñ€Ð¸Ñ†Ð°/ÐŸÐ»ÐµÐ½ÐºÐ°","Ð“Ð¾Ð´"],[xt.MISC]:["ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ","ÐŸÑ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒ","Ð“Ð¾Ð´","ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ"]},ht={NONE:{label:"",color:"",icon:null},FOR_TRADE:{label:"ÐžÐ‘ÐœÐ•Ð",color:"text-blue-300 border-blue-500 bg-blue-500/20",icon:f,badge:"ÐžÐ‘ÐœÐ•Ð"},FOR_SALE:{label:"ÐŸÐ ÐžÐ”ÐÐ–Ð",color:"text-emerald-300 border-emerald-500 bg-emerald-500/20",icon:g,badge:"ÐŸÐ ÐžÐ”ÐÐ–Ð"},GIFT:{label:"Ð”ÐÐ Ð®",color:"text-pink-300 border-pink-500 bg-pink-500/20",icon:w,badge:"ÐžÐ¢Ð”ÐÐœ"},NOT_FOR_SALE:{label:"ÐÐ• ÐŸÐ ÐžÐ”ÐÐ•Ð¢Ð¡Ð¯",color:"text-gray-400 border-gray-600 bg-gray-500/20",icon:c,badge:"Ð›Ð˜Ð§ÐÐžÐ•"}},ut={LOW:{label:"ÐÐÐ‘Ð›Ð®Ð”ÐÐ®",desc:"ÐŸÑ€Ð¸ÑÐ¼Ð°Ñ‚Ñ€Ð¸Ð²Ð°ÑŽÑÑŒ",color:"text-gray-400 border-gray-500 bg-gray-500/10",icon:x,border:"border-gray-500"},MEDIUM:{label:"Ð˜ÐÐ¢Ð•Ð Ð•Ð¡",desc:"ÐšÑƒÐ¿Ð»ÑŽ Ð¿Ñ€Ð¸ ÑÐ»ÑƒÑ‡Ð°Ðµ",color:"text-blue-400 border-blue-500 bg-blue-500/10",icon:j,border:"border-blue-500"},HIGH:{label:"ÐžÐ¥ÐžÐ¢Ð",desc:"ÐÐºÑ‚Ð¸Ð²Ð½Ð¾ Ð¸Ñ‰Ñƒ",color:"text-orange-400 border-orange-500 bg-orange-500/10",icon:N,border:"border-orange-500"},GRAIL:{label:"Ð“Ð ÐÐÐ›Ð¬",desc:"ÐœÐµÑ‡Ñ‚Ð° ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ð¸",color:"text-yellow-400 border-yellow-500 bg-yellow-500/10 animate-pulse",icon:v,glow:!0,border:"border-yellow-500"}},bt={HELLO_WORLD:{label:"HELLO WORLD",desc:"ÐŸÐµÑ€Ð²Ñ‹Ð¹ Ð²Ñ…Ð¾Ð´ Ð² ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ",color:"bg-green-500",icon:i,target:1},UPLOADER:{label:"DATA_MINER",desc:"Ð—Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð¾ Ð°Ñ€Ñ‚ÐµÑ„Ð°ÐºÑ‚Ð¾Ð²",color:"bg-blue-500",icon:y,target:5},INFLUENCER:{label:"NET_CELEB",desc:"Ð›Ð°Ð¹ÐºÐ¾Ð² Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¾",color:"bg-purple-500",icon:k,target:50},CRITIC:{label:"OBSERVER",desc:"ÐžÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð¾ ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸ÐµÐ²",color:"bg-yellow-500",icon:C,target:10},LEGEND:{label:"THE_ONE",desc:"Ð’Ð»Ð°Ð´ÐµÐ»ÐµÑ† Ð›ÐµÐ³ÐµÐ½Ð´Ð°Ñ€Ð½Ð¾Ð³Ð¾ Ð°Ñ€Ñ‚ÐµÑ„Ð°ÐºÑ‚Ð°",color:"bg-red-500",icon:E,target:1},COLLECTOR:{label:"ARCHIVIST",desc:"Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¾ ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ð¹",color:"bg-orange-500",icon:S,target:3}},ft={[xt.PHONES]:["ÐÐžÐ’Ð«Ð™ (SEALED)","LIKE NEW","EXC","GOOD","FAIR","PARTS"],[xt.GAMES]:["SEALED","CIB","BOXED","LOOSE","D.O.A."],[xt.MUSIC]:["MINT","NM","VG+","VG","G","POOR"],[xt.MAGAZINES]:["NEW","FINE","VERY GOOD","GOOD","FAIR","POOR"],[xt.VIDEO]:["SEALED","MINT","EXC","GOOD","VHS-RIP"],[xt.TOYS]:["MISB (Sealed)","MIB (Boxed)","LOOSE (Complete)","LOOSE (Incomplete)","BROKEN"],[xt.COMPUTERS]:["NOS (New Old Stock)","RESTORED","WORKING","UNTESTED","FOR PARTS"],[xt.CAMERAS]:["MINT","NEAR MINT","EXC++","EXC","USER","UG"],[xt.MISC]:["Ð˜Ð”Ð•ÐÐ›","Ð¥ÐžÐ ÐžÐ¨Ð•Ð•","ÐŸÐžÐ¢Ð•Ð Ð¢ÐžÐ•","Ð¡Ð›ÐžÐœÐÐÐž"]},gt=e=>{if(e.title.toUpperCase().includes("CURSED")||"Ð²Ñ„ÑƒÑ„Ð²Ñ„"===e.title&&("Truester"===e.owner||"@Truester"===e.owner))return"CURSED";const t=25*e.likes+10*(e.comments?.length||0)+e.views;return t>=1e4?"LEGENDARY":t>=2e3?"EPIC":t>=500?"RARE":"COMMON"},wt={COMMON:{name:"COMMON",color:"text-gray-500",bgColor:"bg-gray-500/20",borderDark:"border-dark-dim",badge:"bg-gray-500 text-white",icon:o,shadow:""},RARE:{name:"RARE",color:"text-cyan-500",bgColor:"bg-cyan-500/20",borderDark:"border-cyan-500 shadow-[0_0_10px_rgba(6,182,212,0.3)]",badge:"bg-cyan-600 text-white",icon:I,shadow:"shadow-[0_0_10px_rgba(6,182,212,0.2)]"},EPIC:{name:"EPIC",color:"text-purple-500",bgColor:"bg-purple-500/20",borderDark:"border-purple-500 shadow-[0_0_15px_rgba(168,85,247,0.4)]",badge:"bg-purple-600 text-white",icon:T,shadow:"shadow-[0_0_20px_rgba(168,85,247,0.3)]"},LEGENDARY:{name:"LEGENDARY",color:"text-yellow-500",bgColor:"bg-yellow-500/20",borderDark:"border-yellow-500 shadow-[0_0_25px_rgba(234,179,8,0.5)]",badge:"bg-gradient-to-r from-yellow-600 to-red-600 text-white",icon:E,shadow:"shadow-[0_0_30px_rgba(234,179,8,0.4)]"},CURSED:{name:"CURSED",color:"text-red-500",bgColor:"bg-red-500/20",borderDark:"border-red-600 shadow-[0_0_30px_rgba(239,68,68,0.7)] animate-pulse-slow",badge:"bg-red-600 text-white font-black italic",icon:L,shadow:"shadow-[0_0_30px_rgba(220,38,38,0.6)] animate-pulse"}},jt=({item:e,theme:r,onDelete:a,onUserClick:i,onClick:l})=>{const n=ut[e.priority],o="xp"===r,c="winamp"===r,d="GRAIL"===e.priority;return t.jsxs("div",{onClick:()=>l&&l(e),className:`relative group flex flex-col h-full cursor-pointer transition-all duration-300 hover:-translate-y-1 overflow-hidden\n        ${o?"rounded border-2 border-[#0058EE] bg-white hover:shadow-lg":c?"rounded-none border border-[#505050] bg-[#191919] text-[#00ff00]":`rounded-xl border ${n.border} ${"dark"===r?"bg-black/40 hover:bg-white/5":"bg-white hover:bg-gray-50"}`}\n        ${d?"shadow-[0_0_20px_rgba(234,179,8,0.2)]":""}\n      `,children:[t.jsx("div",{className:"absolute top-2 left-2 z-20 pointer-events-none opacity-50 group-hover:opacity-100 transition-opacity",children:t.jsx(A,{size:16,className:n.color.split(" ")[0]})}),t.jsxs("div",{className:"relative aspect-square overflow-hidden border-b "+(o?"border-[#0058EE]":c?"border-[#505050]":"border-white/10"),children:[e.referenceImageUrl?t.jsxs(t.Fragment,{children:[t.jsx("img",{src:e.referenceImageUrl,alt:e.title,className:"w-full h-full object-cover transition-all duration-700 group-hover:scale-110 "+(d?"":"grayscale group-hover:grayscale-0")}),t.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(0,0,0,0)_50%,rgba(0,0,0,0.2)_50%)] bg-[length:100%_4px] pointer-events-none opacity-50"})]}):t.jsx("div",{className:"w-full h-full flex items-center justify-center bg-black/20",children:t.jsx(j,{size:32,className:"opacity-20"})}),t.jsx("div",{className:"absolute bottom-0 left-0 right-0 py-1 flex justify-center backdrop-blur-md border-t "+(o?"bg-white/90 border-blue-200":c?"bg-black border-[#505050]":"bg-black/80 border-white/10"),children:t.jsxs("div",{className:`flex items-center gap-1.5 text-[8px] font-pixel font-bold uppercase tracking-widest ${n.color.split(" ")[0]}`,children:[s.createElement(n.icon,{size:10}),n.label]})})]}),t.jsxs("div",{className:"p-3 flex flex-col flex-1",children:[t.jsxs("div",{className:"flex justify-between items-start gap-2 mb-2",children:[t.jsx("h3",{className:"text-[10px] font-bold font-pixel leading-tight uppercase "+(d?"text-yellow-500":c?"text-[#00ff00]":"dark"===r?"text-white":"text-black"),children:e.title}),d&&t.jsx(v,{size:12,className:"text-yellow-500 shrink-0"})]}),t.jsx("div",{className:"text-[9px] font-mono opacity-50 mb-3 truncate "+(c?"text-[#00ff00]":""),children:e.category}),t.jsxs("div",{className:"mt-auto pt-2 flex items-center justify-between border-t border-dashed "+(o?"border-gray-300":c?"border-[#505050]":"border-white/10"),children:[i?t.jsxs("div",{onClick:t=>{t.stopPropagation(),i(e.owner)},className:"flex items-center gap-2 cursor-pointer group/author w-full",children:[t.jsx("img",{src:nt(e.owner),className:"w-4 h-4 rounded-full border border-white/20"}),t.jsxs("span",{className:"text-[9px] font-pixel opacity-50 group-hover/author:opacity-100 transition-opacity truncate flex-1 "+(c?"text-[#00ff00]":""),children:["@",e.owner]})]}):t.jsx("div",{className:"h-4"}),a&&t.jsx("button",{onClick:t=>{t.stopPropagation(),a(e.id)},className:"text-[8px] text-red-500 opacity-50 hover:opacity-100 uppercase font-bold px-2",children:"DEL"})]})]})]})},Nt=({item:r,theme:a,onClick:i,isLiked:l,onLike:n,onAuthorClick:o})=>{const[c,d]=e.useState(!1),m=gt(r),p=wt[m],h=p.icon,u="CURSED"===m,b=r.tradeStatus||"NONE",f=ht[b],g="xp"===a,w="winamp"===a,j=(()=>{const e=r.imageUrls?.[0];return e?"object"==typeof e&&e.thumbnail?e.thumbnail:"string"==typeof e?e:"https://placehold.co/600x400?text=NO+IMAGE":"https://placehold.co/600x400?text=NO+IMAGE"})();return w?t.jsxs("div",{onClick:()=>i(r),className:"group cursor-pointer flex flex-col h-full min-h-[200px] bg-[#292929] border-t-2 border-l-2 border-r-2 border-b-2 border-t-[#505050] border-l-[#505050] border-r-[#101010] border-b-[#101010] overflow-hidden",children:[t.jsxs("div",{className:"h-4 bg-gradient-to-r from-wa-blue-light to-wa-blue-dark flex items-center justify-between px-1 cursor-default select-none",children:[t.jsx("span",{className:"text-white font-winamp text-[10px] tracking-widest uppercase truncate w-[85%]",children:r.title}),t.jsx("div",{className:"w-2 h-2 bg-[#DCDCDC] border border-t-white border-l-white border-r-[#505050] border-b-[#505050]"})]}),t.jsxs("div",{className:"p-2 flex flex-col h-full",children:[t.jsxs("div",{className:"relative aspect-square mb-2 bg-black border-2 border-t-[#101010] border-l-[#101010] border-r-[#505050] border-b-[#505050] flex items-center justify-center overflow-hidden",children:[!c&&t.jsx("div",{className:"text-wa-green font-winamp text-xs animate-pulse",children:"LOADING..."}),t.jsx("img",{src:j,alt:r.title,loading:"lazy",onLoad:()=>d(!0),className:"w-full h-full object-cover transition-opacity duration-300 "+(c?"opacity-100":"opacity-0")}),t.jsx("div",{className:"absolute bottom-1 right-1 text-[8px] font-winamp text-wa-green bg-black/50 px-1",children:r.category})]}),t.jsxs("div",{className:"flex justify-between items-end mt-auto font-winamp text-wa-green text-[12px] leading-none",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("span",{className:"text-[10px] text-[#00A000]",children:[r.views," kbps"]}),t.jsxs("span",{className:"truncate max-w-[80px]",onClick:e=>{e.stopPropagation(),o(r.owner)},children:[r.owner,".mp3"]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:e=>{e.stopPropagation(),n(e)},className:"hover:text-wa-gold "+(l?"text-wa-gold":"text-wa-green"),children:l?"â˜…":"â˜†"}),t.jsx("span",{children:r.likes})]})]})]})]}):t.jsxs("div",{onClick:()=>i(r),className:`group cursor-pointer flex flex-col h-full transition-all duration-300 hover:-translate-y-2 \n        ${g?"rounded-t-lg shadow-lg border-2 border-[#0058EE] bg-white":"rounded-2xl overflow-hidden border-2 "+("dark"===a?`bg-dark-surface border-white/10 hover:border-green-500/50 ${p.shadow}`:"bg-white border-black/5 hover:border-black/20 shadow-lg")} \n        ${u?"animate-pulse":""}`,children:[g&&t.jsxs("div",{className:"h-6 bg-gradient-to-r from-[#0058EE] to-[#3F8CF3] rounded-t-[4px] flex items-center justify-between px-2 shadow-sm",children:[t.jsx("span",{className:"text-white font-bold text-[10px] drop-shadow-md truncate font-sans",children:r.title}),t.jsx("div",{className:"flex gap-1",children:t.jsx("div",{className:"w-3 h-3 bg-[#D64434] rounded-[2px] border border-white/30 shadow-inner"})})]}),t.jsxs("div",{className:"relative aspect-square overflow-hidden bg-black/20 "+(g?"":"rounded-t-2xl"),children:[!c&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-800 animate-pulse",children:t.jsx(O,{size:24,className:"text-white/20"})}),t.jsx("img",{src:j,alt:r.title,loading:"lazy",onLoad:()=>d(!0),className:"w-full h-full object-cover transition-all duration-500 group-hover:scale-110 "+(c?"opacity-100":"opacity-0")}),!g&&t.jsx("div",{className:"absolute top-2 left-2 px-2 py-0.5 rounded-lg backdrop-blur-md text-[8px] font-pixel border uppercase bg-black/60 text-white border-white/10",children:r.category}),t.jsxs("div",{className:`absolute top-2 right-2 px-2 py-0.5 rounded-lg flex items-center gap-1 text-[8px] font-pixel font-bold shadow-xl border border-white/10 ${p.badge}`,children:[t.jsx(h,{size:10})," ",p.name]}),"NONE"!==b&&t.jsxs("div",{className:`absolute bottom-2 left-2 px-2.5 py-1.5 rounded-lg flex items-center gap-1.5 text-[10px] font-bold tracking-wide shadow-lg uppercase border !bg-zinc-900/95 backdrop-blur-md ${f.color.replace(/bg-[\w/-]+/,"")}`,children:[f.icon&&s.createElement(f.icon,{size:12,strokeWidth:2.5}),f.badge]})]}),t.jsxs("div",{className:"p-4 flex flex-col flex-1 "+(g?"bg-[#ECE9D8]":""),children:[!g&&t.jsx("h3",{className:"text-sm font-bold font-pixel mb-1 line-clamp-2 leading-tight "+(u?"text-red-500":""),children:r.title}),t.jsxs("div",{className:"mt-1 font-mono text-[10px] "+(g?"text-black opacity-80":"opacity-60"),children:[t.jsx("span",{className:"truncate uppercase",children:r.condition||r.quality}),g&&t.jsx("div",{className:"text-[9px] text-gray-600 mt-1 uppercase tracking-wide",children:r.category})]}),t.jsxs("div",{className:"mt-auto pt-4 flex items-center justify-between border-t border-dashed "+(g?"border-gray-400":"border-white/10"),children:[t.jsxs("div",{onClick:e=>{e.stopPropagation(),o(r.owner)},className:"flex items-center gap-2 group/author",children:[t.jsx("img",{src:nt(r.owner),className:"w-5 h-5 rounded-full border "+(g?"border-gray-400":"border-white/20")}),t.jsxs("span",{className:"text-[10px] font-pixel opacity-50 group-hover/author:opacity-100 transition-opacity "+(g?"text-black":""),children:["@",r.owner]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"flex items-center gap-1 text-[10px] "+(g?"text-black/60":"opacity-40"),children:[t.jsx(x,{size:12})," ",t.jsx("span",{children:r.views})]}),t.jsxs("button",{onClick:e=>{e.stopPropagation(),n(e)},className:"flex items-center gap-1 text-[10px] transition-all hover:scale-110 "+(l?"text-green-400":g?"text-black/60":"opacity-40"),children:[t.jsx(R,{size:14,fill:l?"currentColor":"none"})," ",t.jsx("span",{children:r.likes})]})]})]})]})]})},vt=({col:e,theme:s,onClick:r,onShare:a,isLiked:i,onLike:l})=>{const n="xp"===s,o="winamp"===s,c=e.exhibitIds?.length||0;return t.jsxs("div",{onClick:()=>r(e),className:"group relative aspect-[4/5] md:aspect-[3/4] cursor-pointer transition-all duration-300 hover:-translate-y-2 hover:shadow-2xl \n         "+(n?"rounded-t-lg border-2 border-[#0058EE] bg-white":o?"rounded-none border border-[#505050] bg-[#191919] text-[#00ff00]":"rounded-2xl overflow-hidden border-2 "+("dark"===s?"border-white/10 bg-dark-surface hover:border-green-500/30":"border-black/5 bg-white hover:border-black/20")),children:[n&&t.jsxs("div",{className:"h-6 bg-gradient-to-r from-[#0058EE] to-[#3F8CF3] rounded-t-[4px] flex items-center justify-between px-2 shadow-sm absolute top-0 left-0 right-0 z-20",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(D,{size:10,className:"text-white"}),t.jsx("span",{className:"text-white font-bold text-[10px] drop-shadow-md truncate font-sans",children:e.title})]}),t.jsx("div",{className:"flex gap-1",children:t.jsx("div",{className:"w-3 h-3 bg-[#D64434] rounded-[2px] border border-white/30 shadow-inner"})})]}),t.jsx("div",{className:"absolute inset-0 overflow-hidden "+(n?"top-6 border-b-2 border-[#0058EE]":""),children:t.jsx("img",{src:e.coverImage,alt:e.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110 opacity-80 group-hover:opacity-100"})}),t.jsxs("div",{className:"absolute inset-0 flex flex-col justify-between p-5 "+(n?"top-6 bg-gradient-to-t from-white/90 via-transparent to-transparent":"bg-gradient-to-t from-black/90 via-black/40 to-transparent"),children:[!n&&t.jsx("div",{className:"flex justify-between items-start",children:t.jsxs("div",{className:"px-2 py-1 rounded-lg backdrop-blur-md border text-[9px] font-pixel flex items-center gap-1.5 uppercase tracking-widest "+(o?"bg-black border-[#00ff00] text-[#00ff00]":"bg-black/40 border-white/10 text-white/90"),children:[t.jsx(S,{size:10,className:o?"text-[#00ff00]":"text-blue-400"})," ÐšÐžÐ›Ð›Ð•ÐšÐ¦Ð˜Ð¯"]})}),n&&t.jsx("div",{})," ",t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("h3",{className:`${n?"text-blue-900 drop-shadow-sm font-sans":"font-pixel drop-shadow-md"} text-lg md:text-xl font-bold leading-tight mb-1 line-clamp-2 ${o?"text-[#00ff00]":n?"":"text-white"}`,children:e.title}),t.jsx("p",{className:"text-[10px] font-mono line-clamp-1 "+(n?"text-black/80":o?"text-[#00ff00] opacity-80":"text-white/60"),children:e.description||"Ð‘ÐµÐ· Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ñ"})]}),t.jsxs("div",{className:"pt-3 border-t flex items-center justify-between "+(n?"border-blue-900/20":o?"border-[#505050]":"border-white/10"),children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("img",{src:nt(e.owner),className:"w-6 h-6 rounded-full border "+(n?"border-blue-900/20":"border-white/30")}),t.jsxs("span",{className:"text-[10px] font-mono font-bold truncate max-w-[80px] "+(n?"text-black":o?"text-[#00ff00]":"text-white/80"),children:["@",e.owner]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[l&&t.jsxs("button",{onClick:e=>{e.stopPropagation(),l(e)},className:"flex items-center gap-1 px-2 py-1 rounded-lg backdrop-blur-sm border transition-colors "+(i?"bg-red-500/20 border-red-500/50 text-red-400":n?"bg-white/50 border-blue-900/10 text-blue-900 hover:bg-white":o?"bg-black border-[#505050] text-[#00ff00] hover:bg-[#202020]":"bg-white/10 border-white/10 text-white hover:bg-white/20"),children:[t.jsx(R,{size:14,fill:i?"currentColor":"none"}),t.jsx("span",{className:"text-[10px] font-bold",children:e.likes||0})]}),t.jsx("div",{className:"w-[1px] h-4 "+(n?"bg-black/20":"bg-white/20")}),t.jsx("div",{className:"px-2 py-1 rounded-lg text-[10px] font-bold backdrop-blur-sm "+(n?"bg-blue-600 text-white":o?"bg-[#00ff00] text-black":"bg-white/10 text-white"),children:c})]})]})]})]})]})},yt=({title:t,description:s,image:r,type:a="website",path:i=""})=>(e.useEffect(()=>{document.title=t;const e=(e,t)=>{let s=document.querySelector(`meta[name="${e}"]`);s||(s=document.createElement("meta"),s.setAttribute("name",e),document.head.appendChild(s)),s.setAttribute("content",t)},i=(e,t)=>{let s=document.querySelector(`meta[property="${e}"]`);s||(s=document.createElement("meta"),s.setAttribute("property",e),document.head.appendChild(s)),s.setAttribute("content",t)};s&&(e("description",s),i("og:description",s),e("twitter:description",s)),r&&(i("og:image",r),e("twitter:image",r)),i("og:type",a),i("og:title",t),e("twitter:title",t)},[t,s,r,a,i]),null),kt=({title:e,children:s,className:r=""})=>t.jsxs("div",{className:`mb-6 bg-[#292929] border-t-2 border-l-2 border-r-2 border-b-2 border-t-[#505050] border-l-[#505050] border-r-[#101010] border-b-[#101010] ${r}`,children:[t.jsxs("div",{className:"h-4 bg-gradient-to-r from-wa-blue-light to-wa-blue-dark flex items-center justify-between px-1 cursor-default select-none mb-1",children:[t.jsx("span",{className:"text-white font-winamp text-[10px] tracking-widest uppercase",children:e}),t.jsx("div",{className:"w-2 h-2 bg-[#DCDCDC] border border-t-white border-l-white border-r-[#505050] border-b-[#505050]"})]}),t.jsx("div",{className:"p-2",children:s})]}),Ct=({count:e})=>{const s=Math.max(e,1).toString().padStart(6,"0");return t.jsx("div",{className:"inline-flex gap-0.5 p-1 bg-black border-2 border-gray-600 rounded-sm shadow-[inset_0_2px_4px_rgba(0,0,0,0.8)]",title:"Ð¡Ñ‡ÐµÑ‚Ñ‡Ð¸Ðº Ð¿Ð¾ÑÐµÑ‚Ð¸Ñ‚ÐµÐ»ÐµÐ¹",children:s.split("").map((e,s)=>t.jsxs("div",{className:"w-3 h-5 bg-[#1a1a1a] text-red-600 font-mono flex items-center justify-center text-[10px] font-bold border border-[#333] shadow-[inset_0_0_2px_black] relative overflow-hidden",children:[t.jsx("span",{className:"relative z-10 text-red-500 text-shadow-red",children:e}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-red-500/10 to-transparent opacity-20 pointer-events-none"})]},s))})},Et=({user:s,viewedProfileUsername:r,exhibits:a,collections:i,guestbook:l,theme:o,onBack:c,onLogout:d,onFollow:m,onChat:p,onExhibitClick:g,onLike:w,onAuthorClick:N,onCollectionClick:y,onShareCollection:k,onViewHallOfFame:E,onGuestbookPost:S,isEditingProfile:I,setIsEditingProfile:T,editTagline:L,setEditTagline:A,editBio:O,setEditBio:D,editStatus:V,setEditStatus:q,editTelegram:K,setEditTelegram:X,editPassword:Z,setEditPassword:J,onSaveProfile:Q,onProfileImageUpload:ee,onProfileCoverUpload:te,guestbookInput:se,setGuestbookInput:re,guestbookInputRef:ae,profileTab:ie,setProfileTab:le,refreshData:ne,onOpenSocialList:oe,onThemeChange:ce,onWishlistClick:de})=>{const xe=tt().users.find(e=>e.username===r)||{username:r,email:"ghost@matrix.net",tagline:"Ð¦Ð¸Ñ„Ñ€Ð¾Ð²Ð¾Ð¹ Ð¿Ñ€Ð¸Ð·Ñ€Ð°Ðº",avatarUrl:nt(r),joinedDate:"Unknown",following:[],followers:[],achievements:[],telegram:"",settings:{}},me=s?.username===r,pe=s?.following?.includes(r)||!1,he="winamp"===o,ue=s.email?.includes("placeholder")||s.email?.includes("tg_"),[be,fe]=e.useState("SHELF"),[ge,we]=e.useState("ARTIFACTS"),[je,Ne]=e.useState(!1),[ve,ye]=e.useState(s?.settings||{theme:"dark"}),[ke,Ce]=e.useState(s.email);e.useEffect(()=>{s.email!==ke&&Ce(s.email)},[s.email]);const Ee=a.filter(e=>e.owner===r),Se=i.filter(e=>e.owner===r),Ie=tt().wishlist.filter(e=>e.owner===r),Te=a.filter(e=>e.likedBy?.includes(r)),Le=l.filter(e=>e.targetUser.toLowerCase()===r.toLowerCase()).sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()),Ae=Ee.filter(e=>!e.isDraft),Oe=e.useMemo(()=>0===Ae.length?null:[...Ae].sort((e,t)=>2*t.likes+t.views-(2*e.likes+e.views))[0],[Ae]),Re=e.useMemo(()=>Ae.reduce((e,t)=>e+(t.views||0),0)+15*(xe.followers?.length||0)+1337,[Ae,xe]),De=async e=>{confirm("Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð·Ð°Ð¿Ð¸ÑÑŒ?")&&(await(async e=>{Ge.guestbook=Ge.guestbook.filter(t=>t.id!==e),Ve(),await Ze(e),await Ke(`/guestbook/${e}`,"DELETE")})(e),ne())},ze=async(e,t)=>{if(!me)return;const r={...ve,[e]:t};ye(r),"theme"===e&&ce&&ce(t);const a={...s,settings:r};await it(a)};return t.jsxs("div",{className:"max-w-4xl mx-auto space-y-4 animate-in slide-in-from-right-8 fade-in duration-500 pb-32 "+(he?"font-winamp text-wa-green":""),children:[t.jsx(yt,{title:`@${xe.username} | ÐŸÑ€Ð¾Ñ„Ð¸Ð»ÑŒ`}),!he&&t.jsxs("button",{onClick:c,className:"flex items-center gap-2 hover:underline opacity-70 font-pixel text-xs px-4 md:px-0",children:[t.jsx(z,{size:16})," ÐÐÐ—ÐÐ”"]}),t.jsx("div",{className:he?"":"md:rounded-3xl border-b md:border overflow-hidden relative "+("dark"===o?"bg-dark-surface border-dark-dim":"bg-white border-light-dim"),children:he?t.jsx(kt,{title:`USER: ${xe.username}`,children:t.jsxs("div",{className:"flex gap-4 items-start",children:[t.jsx("div",{className:"w-20 h-20 border-2 border-inset border-[#505050] p-1 bg-black",children:t.jsx("img",{src:xe.avatarUrl,className:"w-full h-full object-cover grayscale opacity-80 hover:opacity-100"})}),t.jsxs("div",{className:"flex-1 space-y-1",children:[t.jsxs("div",{className:"text-[14px] text-wa-gold flex justify-between",children:[t.jsx("span",{children:xe.username}),t.jsx(Ct,{count:Re})]}),t.jsx("div",{className:"text-[12px] opacity-80",children:xe.tagline}),t.jsxs("div",{className:"text-[12px] flex gap-2 mt-2",children:[t.jsxs("span",{onClick:()=>oe(xe.username,"followers"),className:"cursor-pointer hover:text-white",children:["ÐŸÐ¾Ð´Ð¿Ð¸ÑÑ‡Ð¸ÐºÐ¸: ",xe.followers?.length||0]}),t.jsxs("span",{onClick:()=>oe(xe.username,"following"),className:"cursor-pointer hover:text-white",children:["ÐŸÐ¾Ð´Ð¿Ð¸ÑÐºÐ¸: ",xe.following?.length||0]})]}),me&&t.jsx("button",{onClick:d,className:"px-2 border border-[#505050] bg-[#292929] text-[10px] hover:text-red-500 mt-2",children:"Ð’Ð«Ð™Ð¢Ð˜"})]})]})}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"h-32 md:h-52 bg-gray-800 relative group",children:[xe.coverUrl?t.jsx("img",{src:xe.coverUrl,className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full "+("dark"===o?"bg-gradient-to-r from-green-900/20 to-black":"bg-gradient-to-r from-gray-100 to-gray-300")}),I&&me&&t.jsxs("label",{className:"absolute top-4 right-4 bg-black/50 text-white p-2 rounded-xl cursor-pointer hover:bg-black/70 border border-white/20 flex items-center gap-2 backdrop-blur-sm",children:[t.jsx(U,{size:16})," ",t.jsx("span",{className:"text-[10px] font-pixel",children:"ÐžÐ‘Ð›ÐžÐ–ÐšÐ"}),t.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:te})]}),t.jsxs("div",{className:"absolute bottom-2 right-4 flex items-center gap-2 bg-black/40 backdrop-blur-md px-2 py-1 rounded border border-white/10",children:[t.jsx("span",{className:"text-[9px] font-pixel text-white opacity-70 hidden md:inline",children:"VISITORS:"}),t.jsx(Ct,{count:Re})]})]}),t.jsxs("div",{className:"px-4 pb-6 relative",children:[t.jsxs("div",{className:"flex flex-col items-start -mt-10 md:-mt-12 gap-4 mb-2",children:[t.jsxs("div",{className:"relative group",children:[t.jsx("div",{className:"w-24 h-24 md:w-32 md:h-32 rounded-2xl overflow-hidden border-4 bg-black shadow-lg "+("dark"===o?"border-dark-surface":"border-white"),children:t.jsx("img",{src:xe.avatarUrl,className:"w-full h-full object-cover"})}),I&&me&&t.jsxs("label",{className:"absolute inset-0 bg-black/60 flex items-center justify-center cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity rounded-2xl",children:[t.jsx(U,{size:24,className:"text-white"}),t.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:ee})]})]}),t.jsx("div",{className:"flex-1 w-full",children:t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl md:text-3xl font-pixel font-bold flex items-center gap-2",children:["@",xe.username]}),t.jsxs("p",{className:"text-xs font-mono opacity-60 mt-1",children:["Ð’ ÑÐµÑ‚Ð¸ Ñ ",xe.joinedDate]})]}),t.jsxs("div",{className:"flex items-center gap-6 border-t md:border-t-0 border-white/5 pt-3 md:pt-0",children:[t.jsxs("button",{onClick:()=>oe(xe.username,"followers"),className:"flex flex-col items-center group",children:[t.jsx("span",{className:"font-pixel text-lg leading-none group-hover:text-green-500",children:xe.followers?.length||0}),t.jsx("span",{className:"text-[9px] font-pixel opacity-50 uppercase group-hover:opacity-100",children:"Ð¤Ð¾Ð»Ð»Ð¾Ð²ÐµÑ€Ñ‹"})]}),t.jsxs("button",{onClick:()=>oe(xe.username,"following"),className:"flex flex-col items-center group",children:[t.jsx("span",{className:"font-pixel text-lg leading-none group-hover:text-green-500",children:xe.following?.length||0}),t.jsx("span",{className:"text-[9px] font-pixel opacity-50 uppercase group-hover:opacity-100",children:"ÐŸÐ¾Ð´Ð¿Ð¸ÑÐºÐ¸"})]}),t.jsxs("button",{onClick:E,className:"flex flex-col items-center group",children:[t.jsx(_,{size:18,className:"group-hover:text-yellow-500"}),t.jsx("span",{className:"text-[9px] font-pixel opacity-50 uppercase group-hover:opacity-100",children:"ÐÐ°Ð³Ñ€Ð°Ð´Ñ‹"})]})]})]})})]}),t.jsx("div",{className:"space-y-4",children:I&&me?t.jsxs("div",{className:"space-y-4 bg-black/5 p-4 rounded-xl border border-dashed border-white/10",children:[ue&&t.jsxs("div",{className:"bg-red-500/10 border border-red-500/50 p-3 rounded-lg flex items-start gap-3",children:[t.jsx(h,{size:20,className:"text-red-500 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-red-500 font-bold text-xs mb-1",children:"ÐÐ•ÐžÐ‘Ð¥ÐžÐ”Ð˜ÐœÐž ÐŸÐ Ð˜Ð’Ð¯Ð—ÐÐ¢Ð¬ EMAIL"}),t.jsx("p",{className:"text-[10px] opacity-70",children:"Ð’Ñ‹ Ð²Ð¾ÑˆÐ»Ð¸ Ñ‡ÐµÑ€ÐµÐ· Telegram. Ð’Ð°Ñˆ Ñ‚ÐµÐºÑƒÑ‰Ð¸Ð¹ email - Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ð¹. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ñ€ÐµÐ°Ð»ÑŒÐ½Ñ‹Ð¹ email Ð¸ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¸Ð¼ÐµÑ‚ÑŒ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ Ð²Ñ…Ð¾Ð´Ð° Ñ‡ÐµÑ€ÐµÐ· Ñ„Ð¾Ñ€Ð¼Ñƒ."})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-pixel opacity-50 uppercase tracking-widest mb-1 block",children:"Ð¡Ñ‚Ð°Ñ‚ÑƒÑ / Ð¡Ð»Ð¾Ð³Ð°Ð½"}),t.jsx("input",{value:L,onChange:e=>A(e.target.value),className:"w-full bg-black/20 border border-white/10 rounded-lg px-3 py-2 font-mono text-xs focus:border-green-500 outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-pixel opacity-50 uppercase tracking-widest mb-1 block",children:"Ðž ÑÐµÐ±Ðµ"}),t.jsx("textarea",{value:O,onChange:e=>D(e.target.value),rows:3,className:"w-full bg-black/20 border border-white/10 rounded-lg px-3 py-2 font-mono text-xs focus:border-green-500 outline-none resize-none"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-2 border-t border-white/5",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"text-[10px] font-pixel opacity-50 uppercase tracking-widest mb-1 flex items-center gap-2",children:[t.jsx(u,{size:12})," Email (Ð”Ð»Ñ Ð²Ñ…Ð¾Ð´Ð°)"]}),t.jsx("input",{value:ke,onChange:e=>Ce(e.target.value),className:"w-full bg-black/20 border border-white/10 rounded-lg px-3 py-2 font-mono text-xs focus:border-green-500 outline-none"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"text-[10px] font-pixel opacity-50 uppercase tracking-widest mb-1 flex items-center gap-2",children:[t.jsx(M,{size:12})," ÐÐ¾Ð²Ñ‹Ð¹ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{value:Z,onChange:e=>J(e.target.value),type:je?"text":"password",placeholder:"Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ...",className:"flex-1 bg-black/20 border border-white/10 rounded-lg px-3 py-2 font-mono text-xs focus:border-green-500 outline-none"}),t.jsx("button",{onClick:()=>Ne(!je),className:"p-2 border rounded-lg hover:bg-white/10",children:t.jsx(x,{size:14})}),t.jsx("button",{onClick:()=>{const e="ABCabc123!@#";let t="";for(let s=0;s<12;s++)t+=e.charAt(Math.floor(12*Math.random()));J(t),Ne(!0)},className:"p-2 border rounded-lg hover:bg-white/10",children:t.jsx(b,{size:14})})]})]})]}),t.jsxs("div",{className:"flex gap-2 pt-2",children:[t.jsx("button",{onClick:async()=>{if(!me)return;const e={...s,tagline:L,bio:O,status:V,telegram:K};ke&&ke.trim()?e.email=ke.trim():s.email&&(e.email=s.email),Z&&(e.password=Z),await it(e),T(!1),J("")},className:"flex-1 bg-green-600 text-white px-4 py-2 rounded font-bold text-xs uppercase",children:"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ"}),t.jsx("button",{onClick:()=>T(!1),className:"px-4 py-2 rounded border hover:bg-white/10 text-xs uppercase",children:"ÐžÑ‚Ð¼ÐµÐ½Ð°"})]})]}):t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-2",children:[t.jsx("p",{className:"font-mono font-bold text-sm leading-tight",children:xe.tagline}),t.jsx("div",{className:"flex gap-2 w-full md:w-auto mt-2 md:mt-0",children:me?t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>{A(s?.tagline||""),D(s?.bio||""),Ce(s?.email||""),T(!0)},className:"flex-1 md:flex-none px-3 py-1.5 border rounded-lg text-[10px] uppercase font-bold hover:bg-white/10 flex items-center justify-center gap-2",children:[t.jsx(F,{size:12})," Ð ÐµÐ´."]}),t.jsx("button",{onClick:d,className:"px-3 py-1.5 border border-red-500/30 text-red-500 rounded-lg",children:t.jsx(P,{size:12})})]}):t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>m(xe.username),className:"flex-1 md:flex-none px-4 py-2 md:py-1.5 rounded-lg font-bold font-pixel text-[10px] uppercase transition-all "+(pe?"border border-white/20 opacity-60":"bg-green-500 text-black border-green-500"),children:pe?"ÐŸÐ¾Ð´Ð¿Ð¸ÑÐ°Ð½":"ÐŸÐ¾Ð´Ð¿Ð¸ÑÐ°Ñ‚ÑŒÑÑ"}),t.jsx("button",{onClick:()=>p(xe.username),className:"px-4 py-2 md:py-1.5 border rounded-lg hover:bg-white/10",children:t.jsx(C,{size:14})})]})})]}),xe.bio&&t.jsx("p",{className:"font-mono text-xs opacity-70 whitespace-pre-wrap leading-relaxed max-w-2xl",children:xe.bio}),me&&ue&&!I&&t.jsxs("div",{onClick:()=>T(!0),className:"mt-2 bg-red-500/10 border border-red-500/50 p-2 rounded flex items-center gap-2 cursor-pointer hover:bg-red-500/20",children:[t.jsx(h,{size:14,className:"text-red-500"}),t.jsx("span",{className:"text-[10px] text-red-400 font-bold",children:'ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ "Ð ÐµÐ´.", Ñ‡Ñ‚Ð¾Ð±Ñ‹ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Email Ð¸ ÐŸÐ°Ñ€Ð¾Ð»ÑŒ.'})]})]})})]})]})}),"SHELF"===be&&!I&&Oe&&t.jsx("div",{className:"px-0 md:px-0",children:t.jsxs("div",{className:"relative overflow-hidden border rounded-xl flex h-28 md:h-32 group cursor-pointer "+(he?"bg-[#191919] border-[#505050]":"bg-gradient-to-r from-yellow-900/20 to-transparent border-yellow-500/20 hover:border-yellow-500/40"),onClick:()=>g(Oe),children:[t.jsxs("div",{className:"w-24 md:w-32 h-full relative flex-shrink-0 bg-black",children:[t.jsx("img",{src:"string"==typeof Oe.imageUrls[0]?Oe.imageUrls[0]:Oe.imageUrls[0]?.thumbnail||"https://placehold.co/600x400?text=NO+IMAGE",className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity"}),t.jsxs("div",{className:"absolute top-0 left-0 bg-yellow-500 text-black text-[8px] font-bold px-1.5 py-0.5 rounded-br-lg z-10 font-pixel",children:[t.jsx(v,{size:8,className:"inline mr-0.5"})," SHOWCASE"]})]}),t.jsxs("div",{className:"flex-1 p-3 flex flex-col justify-center min-w-0",children:[t.jsx("div",{className:"text-[9px] uppercase tracking-widest mb-1 "+(he?"text-[#00ff00]":"text-yellow-500 opacity-70"),children:"Ð“ÐžÐ Ð”ÐžÐ¡Ð¢Ð¬ ÐšÐžÐ›Ð›Ð•ÐšÐ¦Ð˜Ð˜"}),t.jsx("h3",{className:"font-pixel text-sm md:text-lg font-bold truncate mb-1 "+(he?"text-[#00ff00]":"text-white"),children:Oe.title}),t.jsxs("div",{className:"flex items-center gap-3 text-[10px] font-mono opacity-50",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(R,{size:10,className:"text-red-500"})," ",Oe.likes]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(x,{size:10,className:"text-blue-400"})," ",Oe.views]}),t.jsx("span",{className:"truncate max-w-[80px] border border-white/10 px-1 rounded",children:Oe.category})]})]}),t.jsx("div",{className:"w-8 flex items-center justify-center border-l border-white/5 opacity-50 group-hover:opacity-100 group-hover:bg-white/5",children:t.jsx("div",{className:"border-t-2 border-r-2 border-white w-2 h-2 rotate-45 transform"})})]})}),t.jsxs("div",{className:"flex mb-4 mt-2 px-0 md:px-0 "+(he?"gap-1":"border-b border-gray-500/30"),children:[t.jsx("button",{onClick:()=>fe("SHELF"),className:"flex-1 pb-3 text-center "+("SHELF"===be?"border-b-2 border-green-500 text-green-500":"opacity-50"),children:t.jsx(B,{size:20,className:"mx-auto"})}),t.jsx("button",{onClick:()=>fe("FAVORITES"),className:"flex-1 pb-3 text-center "+("FAVORITES"===be?"border-b-2 border-green-500 text-green-500":"opacity-50"),children:t.jsx(R,{size:20,className:"mx-auto"})}),t.jsx("button",{onClick:()=>fe("LOGS"),className:"flex-1 pb-3 text-center "+("LOGS"===be?"border-b-2 border-green-500 text-green-500":"opacity-50"),children:t.jsx(C,{size:20,className:"mx-auto"})}),t.jsx("button",{onClick:()=>fe("WISHLIST"),className:"flex-1 pb-3 text-center "+("WISHLIST"===be?"border-b-2 border-green-500 text-green-500":"opacity-50"),children:t.jsx(j,{size:20,className:"mx-auto"})}),me&&t.jsx("button",{onClick:()=>fe("CONFIG"),className:"flex-1 pb-3 text-center "+("CONFIG"===be?"border-b-2 border-green-500 text-green-500":"opacity-50"),children:t.jsx(H,{size:20,className:"mx-auto"})})]}),"SHELF"===be&&t.jsxs("div",{className:"space-y-6 animate-in fade-in px-0 md:px-0",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-4 px-2 md:px-0",children:[t.jsxs("button",{onClick:()=>we("ARTIFACTS"),className:"text-xs font-pixel uppercase "+("ARTIFACTS"===ge?"text-green-500 font-bold":"opacity-50"),children:["ÐŸÑ€ÐµÐ´Ð¼ÐµÑ‚Ñ‹ (",Ae.length,")"]}),t.jsxs("button",{onClick:()=>we("COLLECTIONS"),className:"text-xs font-pixel uppercase "+("COLLECTIONS"===ge?"text-green-500 font-bold":"opacity-50"),children:["ÐšÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ð¸ (",Se.length,")"]})]}),"ARTIFACTS"===ge&&t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-4",children:[0===Ae.length&&t.jsx("div",{className:"col-span-full text-center opacity-50 text-xs py-8",children:"ÐÐµÑ‚ Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚Ð¾Ð²"}),Ae.map(e=>t.jsx(Nt,{item:e,theme:o,onClick:g,isLiked:e.likedBy?.includes(s?.username||"")||!1,onLike:t=>w(e.id,t),onAuthorClick:()=>{}},e.id))]}),"COLLECTIONS"===ge&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[0===Se.length&&t.jsx("div",{className:"col-span-full text-center opacity-50 text-xs py-8",children:"ÐÐµÑ‚ ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ð¹"}),Se.map(e=>t.jsx(vt,{col:e,theme:o,onClick:y,onShare:k},e.id))]})]}),"FAVORITES"===be&&t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-4 animate-in fade-in px-0 md:px-0",children:[Te.map(e=>t.jsx(Nt,{item:e,theme:o,onClick:g,isLiked:!0,onLike:t=>w(e.id,t),onAuthorClick:N},e.id)),0===Te.length&&t.jsx("div",{className:"col-span-full text-center opacity-50 py-8 text-xs uppercase",children:"ÐŸÑƒÑÑ‚Ð¾"})]}),"WISHLIST"===be&&t.jsxs("div",{className:"space-y-6 animate-in fade-in px-0 md:px-0",children:[t.jsxs("button",{onClick:()=>{const e=`${window.location.origin}/u/${r}/wishlist`;navigator.clipboard.writeText(e),alert("Ð¡ÑÑ‹Ð»ÐºÐ° ÑÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð°!")},className:"w-full flex items-center justify-center gap-2 text-xs font-bold uppercase py-3 rounded-xl border-2 border-dashed "+(he?"border-[#00ff00] text-[#00ff00]":"border-white/20 opacity-80 hover:opacity-100"),children:[t.jsx(G,{size:16})," Ð¡ÐšÐžÐŸÐ˜Ð ÐžÐ’ÐÐ¢Ð¬ Ð¡Ð¡Ð«Ð›ÐšÐ£"]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-4",children:Ie.map(e=>t.jsx(jt,{item:e,theme:o,onClick:de,onUserClick:N},e.id))})]}),"LOGS"===be&&t.jsxs("div",{className:"space-y-6 animate-in fade-in px-0 md:px-0",children:[t.jsxs("div",{className:"p-4 rounded-xl border flex gap-3 "+(he?"bg-[#191919] border-[#505050]":"bg-white/5 border-white/10"),children:[t.jsx("input",{ref:ae,value:se,onChange:e=>re(e.target.value),placeholder:"ÐžÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð·Ð°Ð¿Ð¸ÑÑŒ...",className:"flex-1 bg-transparent border-none outline-none text-sm font-mono"}),t.jsx("button",{onClick:()=>{se.trim()&&(S(se),re(""))},className:"text-green-500",children:t.jsx(n,{size:16})})]}),t.jsx("div",{className:"space-y-4",children:Le.map(e=>t.jsxs("div",{className:"p-4 rounded-xl border "+(he?"bg-black border-[#505050]":"bg-white/5 border-white/10"),children:[t.jsxs("div",{className:"flex justify-between items-start mb-2",children:[t.jsxs("div",{className:"font-bold text-xs",children:["@",e.author]}),me&&t.jsx("button",{onClick:()=>De(e.id),children:t.jsx($,{size:12,className:"opacity-50 hover:text-red-500"})})]}),t.jsx("p",{className:"text-sm font-mono opacity-80",children:e.text})]},e.id))})]}),me&&"CONFIG"===be&&t.jsxs("div",{className:"p-6 rounded-xl border flex flex-col gap-6 animate-in fade-in bg-white/5 border-white/10 mx-0 md:mx-0",children:[t.jsxs("h3",{className:"font-pixel text-[10px] uppercase tracking-[0.2em] mb-4 flex items-center gap-2 opacity-70",children:[t.jsx(Y,{size:14})," Ð’Ð½ÐµÑˆÐ½Ð¸Ð¹ Ð²Ð¸Ð´"]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsx("button",{onClick:()=>ze("theme","dark"),className:"p-4 border rounded hover:bg-white/10 text-xs",children:"Matrix"}),t.jsx("button",{onClick:()=>ze("theme","light"),className:"p-4 border rounded hover:bg-white/10 text-xs",children:"Light"}),t.jsx("button",{onClick:()=>ze("theme","xp"),className:"p-4 border rounded hover:bg-white/10 text-xs",children:"Windows XP"}),t.jsx("button",{onClick:()=>ze("theme","winamp"),className:"p-4 border rounded hover:bg-white/10 text-green-500 border-green-500 text-xs",children:"Winamp"})]}),t.jsxs("div",{className:"pt-6 border-t border-white/10",children:[t.jsxs("h3",{className:"font-pixel text-[10px] uppercase tracking-[0.2em] mb-4 flex items-center gap-2 text-red-500",children:[t.jsx(W,{size:14})," Danger Zone"]}),t.jsxs("button",{onClick:async()=>{confirm("Ð’ÐÐ˜ÐœÐÐÐ˜Ð•! Ð­Ñ‚Ð¾ Ð¿Ð¾Ð»Ð½Ð¾ÑÑ‚ÑŒÑŽ Ð¾Ñ‡Ð¸ÑÑ‚Ð¸Ñ‚ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ ÐºÑÑˆ.")&&(await(async()=>{const e=await Ye();await e.clear("exhibits"),await e.clear("collections"),await e.clear("users"),await e.clear("notifications"),await e.clear("messages"),await e.clear("generic"),window.location.reload()})(),window.location.reload())},className:"w-full py-4 border-2 border-red-500/50 text-red-500 rounded-xl hover:bg-red-500/10 font-bold text-xs uppercase flex items-center justify-center gap-2",children:[t.jsx(f,{size:16})," HARD RESET"]})]})]})]})},St=({targetItem:s,currentUser:r,userInventory:a,targetUserInventory:i=[],recipient:l,onClose:n,isWishlist:o=!1,wishlistId:c})=>{const[d,x]=e.useState(1),[m,p]=e.useState("DIRECT"),[u,b]=e.useState([]),[j,N]=e.useState(!o&&s?[s.id]:[]),[v,y]=e.useState(""),[k,C]=e.useState(""),[E,S]=e.useState(!1),I=e.useMemo(()=>a.filter(e=>!e.isDraft&&!e.lockedInTradeId),[a]);i.length;return t.jsx("div",{className:"fixed inset-0 z-[100] bg-black/90 backdrop-blur-md flex items-center justify-center p-4 animate-in zoom-in-95",children:t.jsxs("div",{className:"w-full max-w-2xl max-h-[90vh] h-full flex flex-col bg-[#1a1a1a] border border-white/10 rounded-2xl shadow-2xl overflow-hidden font-sans",children:[t.jsxs("div",{className:"bg-[#222] p-4 flex justify-between items-center border-b border-white/5 flex-shrink-0",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(f,{size:20,className:"text-green-500"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-bold text-sm tracking-widest uppercase font-pixel text-white",children:"Ð¢ÐžÐ Ð“ÐžÐ’Ð«Ð™ Ð¢Ð•Ð ÐœÐ˜ÐÐÐ›"}),t.jsxs("div",{className:"text-[10px] opacity-50 text-white",children:["Ð¡Ð´ÐµÐ»ÐºÐ° Ñ @",l.username]})]})]}),t.jsx("button",{onClick:n,className:"hover:text-red-500 transition-colors text-white",children:t.jsx(V,{size:24})})]}),t.jsxs("div",{className:"flex border-b border-white/5 flex-shrink-0",children:[t.jsx("div",{className:"flex-1 h-1 "+(d>=1?"bg-green-500":"bg-white/10")}),t.jsx("div",{className:"flex-1 h-1 "+(d>=2?"bg-green-500":"bg-white/10")}),t.jsx("div",{className:"flex-1 h-1 "+(d>=3?"bg-green-500":"bg-white/10")})]}),t.jsxs("div",{className:"flex-1 overflow-hidden relative p-4 flex flex-col min-h-0",children:[1===d&&t.jsxs("div",{className:"space-y-4 overflow-y-auto max-h-[60vh] p-1",children:[t.jsx("h3",{className:"font-pixel text-center text-lg mb-6 text-white",children:"Ð’Ð«Ð‘Ð•Ð Ð˜Ð¢Ð• Ð¢Ð˜ÐŸ Ð¡Ð”Ð•Ð›ÐšÐ˜"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("button",{onClick:()=>p("DIRECT"),className:"p-4 border-2 rounded-xl flex items-center gap-4 transition-all "+("DIRECT"===m?"border-blue-500 bg-blue-500/10":"border-white/10 hover:border-white/30"),children:[t.jsx(f,{size:24,className:"DIRECT"===m?"text-blue-500":"opacity-50"}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-bold text-sm text-white",children:"ÐŸÐ Ð¯ÐœÐžÐ™ ÐžÐ‘ÐœÐ•Ð"}),t.jsx("div",{className:"text-[10px] opacity-50 mt-1",children:"1 Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚ â‡„ 1 Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚"})]})]}),t.jsxs("button",{onClick:()=>p("MULTI"),className:"p-4 border-2 rounded-xl flex items-center gap-4 transition-all "+("MULTI"===m?"border-purple-500 bg-purple-500/10":"border-white/10 hover:border-white/30"),children:[t.jsx(K,{size:24,className:"MULTI"===m?"text-purple-500":"opacity-50"}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-bold text-sm text-white",children:"ÐœÐ£Ð›Ð¬Ð¢Ð˜-Ð¢Ð Ð•Ð™Ð”"}),t.jsx("div",{className:"text-[10px] opacity-50 mt-1",children:"ÐœÐ½Ð¾Ð³Ð¾ â‡„ ÐœÐ½Ð¾Ð³Ð¾"})]})]}),t.jsxs("button",{onClick:()=>p("MONEY"),className:"p-4 border-2 rounded-xl flex items-center gap-4 transition-all "+("MONEY"===m?"border-green-500 bg-green-500/10":"border-white/10 hover:border-white/30"),children:[t.jsx(X,{size:24,className:"MONEY"===m?"text-green-500":"opacity-50"}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-bold text-sm text-white",children:"Ð—Ð Ð”Ð•ÐÐ¬Ð“Ð˜ (RUB)"}),t.jsx("div",{className:"text-[10px] opacity-50 mt-1",children:o?"ÐŸÑ€Ð¾Ð´Ð°Ñ‚ÑŒ Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚":"ÐšÑƒÐ¿Ð¸Ñ‚ÑŒ Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚"})]})]}),t.jsxs("button",{onClick:()=>p("GIFT"),className:"p-4 border-2 rounded-xl flex items-center gap-4 transition-all "+("GIFT"===m?"border-pink-500 bg-pink-500/10":"border-white/10 hover:border-white/30"),children:[t.jsx(w,{size:24,className:"GIFT"===m?"text-pink-500":"opacity-50"}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-bold text-sm text-white",children:"ÐŸÐžÐ”ÐÐ ÐžÐš"}),t.jsx("div",{className:"text-[10px] opacity-50 mt-1",children:"Ð‘ÐµÐ·Ð²Ð¾Ð·Ð¼ÐµÐ·Ð´Ð½Ð¾"})]})]})]})]}),2===d&&t.jsxs("div",{className:"flex flex-col h-full min-h-0",children:["MONEY"===m&&t.jsxs("div",{className:"mb-4 p-4 bg-green-900/20 border border-green-500/30 rounded-xl flex items-center gap-4",children:[t.jsx(g,{size:24,className:"text-green-500"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"text-[10px] font-bold text-green-500 uppercase block mb-1",children:"Ð¡ÑƒÐ¼Ð¼Ð° ÑÐ´ÐµÐ»ÐºÐ¸ (RUB)"}),t.jsx("input",{type:"number",value:v,onChange:e=>y(e.target.value),placeholder:"5000",className:"w-full bg-transparent border-b border-green-500 text-xl font-mono text-white focus:outline-none"})]})]}),t.jsxs("div",{className:"flex-1 flex flex-col md:flex-row min-h-0 gap-4",children:[t.jsxs("div",{className:"flex-1 border border-white/10 rounded-xl flex flex-col min-h-0 "+("MONEY"!==m||o?"":"opacity-50 pointer-events-none"),children:[t.jsxs("div",{className:"p-3 bg-black/20 text-center border-b border-white/10 font-bold text-xs uppercase text-green-500",children:["Ð’Ð« ÐžÐ¢Ð”ÐÐ•Ð¢Ð• (","MONEY"!==m||o?u.length:"Ð”Ð•ÐÐ¬Ð“Ð˜",")"]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-2 grid grid-cols-3 gap-2 content-start custom-scrollbar",children:[I.map(e=>t.jsxs("div",{onClick:()=>{return t=e.id,void b("MONEY"!==m?"DIRECT"===m?[t]:e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]:o?[t]:[]);var t},className:"relative aspect-square border-2 rounded cursor-pointer "+(u.includes(e.id)?"border-green-500":"border-white/10 hover:border-white/30"),children:[t.jsx("img",{src:"string"==typeof e.imageUrls[0]?e.imageUrls[0]:e.imageUrls[0]?.thumbnail||"https://placehold.co/600x400?text=NO+IMAGE",className:"w-full h-full object-cover rounded-sm"}),u.includes(e.id)&&t.jsx("div",{className:"absolute inset-0 bg-green-500/20 flex items-center justify-center",children:t.jsx(Z,{className:"text-green-500 font-bold"})})]},e.id)),0===I.length&&t.jsx("div",{className:"col-span-3 text-center text-xs opacity-30 py-4 text-white",children:"Ð˜Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ Ð¿ÑƒÑÑ‚"})]})]}),"GIFT"!==m&&t.jsxs("div",{className:"flex-1 border border-white/10 rounded-xl flex flex-col min-h-0 bg-white/5 "+("MONEY"===m&&o?"opacity-50 pointer-events-none":""),children:[t.jsxs("div",{className:"p-3 bg-black/20 text-center border-b border-white/10 font-bold text-xs uppercase text-blue-500",children:["Ð’Ð« ÐŸÐžÐ›Ð£Ð§ÐÐ•Ð¢Ð• (","MONEY"===m&&o?"Ð”Ð•ÐÐ¬Ð“Ð˜":j.length,")"]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-2 grid grid-cols-3 gap-2 content-start custom-scrollbar",children:[s&&!o&&t.jsxs("div",{onClick:()=>{return e=s.id,void(("GIFT"!==m||o)&&N("MONEY"!==m?"DIRECT"===m?[e]:t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]:o?[]:[e]));var e},className:"relative aspect-square border-2 rounded cursor-pointer "+(j.includes(s.id)?"border-blue-500":"border-white/10 hover:border-white/30"),children:[t.jsx("img",{src:"string"==typeof s.imageUrls[0]?s.imageUrls[0]:s.imageUrls[0]?.thumbnail||"https://placehold.co/600x400?text=NO+IMAGE",className:"w-full h-full object-cover rounded-sm"}),t.jsx("div",{className:"absolute top-0 right-0 bg-yellow-500 text-black text-[8px] px-1 font-bold",children:"Ð¦Ð•Ð›Ð¬"}),j.includes(s.id)&&t.jsx("div",{className:"absolute inset-0 bg-blue-500/20 flex items-center justify-center",children:t.jsx(Z,{className:"text-blue-500 font-bold"})})]}),(!s||o)&&0===i.length&&t.jsx("div",{className:"col-span-3 text-center text-xs opacity-30 py-4 text-white",children:o&&"MONEY"===m?"Ð’Ñ‹ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚Ðµ Ð¾Ð¿Ð»Ð°Ñ‚Ñƒ":"ÐŸÑ€ÐµÐ´Ð¼ÐµÑ‚Ñ‹ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹"})]})]})]})]}),3===d&&t.jsxs("div",{className:"flex flex-col h-full space-y-4 overflow-y-auto p-1 custom-scrollbar",children:[t.jsxs("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10",children:[t.jsxs("h3",{className:"font-pixel text-xs opacity-50 mb-2 text-white",children:["Ð¡ÐžÐžÐ‘Ð©Ð•ÐÐ˜Ð• Ð”Ð›Ð¯ @",l.username]}),t.jsx("textarea",{value:k,onChange:e=>C(e.target.value),className:"w-full bg-black/30 border border-white/10 rounded-lg p-3 text-sm font-mono focus:border-green-500 outline-none h-20 resize-none text-white",placeholder:"ÐŸÑ€Ð¸Ð²ÐµÑ‚! ÐŸÑ€ÐµÐ´Ð»Ð°Ð³Ð°ÑŽ Ð¾Ð±Ð¼ÐµÐ½..."})]}),t.jsxs("div",{className:"flex items-center justify-between gap-4 p-4 border border-white/10 rounded-xl bg-black/20",children:[t.jsxs("div",{className:"text-center flex-1",children:[t.jsx("div",{className:"text-[10px] font-bold text-green-500 mb-1 uppercase",children:"ÐžÐ¢Ð”ÐÐ•Ð¢Ð•"}),"MONEY"!==m||o?t.jsxs("div",{className:"text-lg font-pixel text-white",children:[u.length," ",t.jsx("span",{className:"text-xs",children:"ÐŸÐ Ð•Ð”Ðœ."})]}):t.jsxs("div",{className:"text-lg font-pixel text-green-400",children:[v," â‚½"]})]}),t.jsx("div",{className:"flex flex-col items-center opacity-50 text-white",children:t.jsx(K,{})}),t.jsxs("div",{className:"text-center flex-1",children:[t.jsx("div",{className:"text-[10px] font-bold text-blue-500 mb-1 uppercase",children:"ÐŸÐžÐ›Ð£Ð§ÐÐ•Ð¢Ð•"}),"MONEY"===m&&o?t.jsxs("div",{className:"text-lg font-pixel text-blue-400",children:[v," â‚½"]}):t.jsxs("div",{className:"text-lg font-pixel text-white",children:[j.length," ",t.jsx("span",{className:"text-xs",children:"ÐŸÐ Ð•Ð”Ðœ."})]})]})]}),o&&t.jsx("div",{className:"p-3 bg-purple-500/10 border border-purple-500/30 rounded-xl text-center",children:t.jsx("p",{className:"text-[10px] text-purple-300 font-bold font-pixel uppercase",children:"Ð˜Ð¡ÐŸÐžÐ›ÐÐ•ÐÐ˜Ð• Ð–Ð•Ð›ÐÐÐ˜Ð¯ (WISHLIST)"})}),t.jsxs("div",{className:"text-center text-[10px] opacity-50 font-mono text-white",children:[t.jsx(h,{size:12,className:"inline mr-1"}),"ÐŸÐ¾ÑÐ»Ðµ Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ñ Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð±ÑƒÐ´ÐµÑ‚ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¾. Ð¡Ð´ÐµÐ»ÐºÐ° Ð·Ð°Ð²ÐµÑ€ÑˆÐ¸Ñ‚ÑÑ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ð¾ÑÐ»Ðµ ÑÐ¾Ð³Ð»Ð°ÑÐ¸Ñ Ð²Ñ‚Ð¾Ñ€Ð¾Ð¹ ÑÑ‚Ð¾Ñ€Ð¾Ð½Ñ‹."]})]})]}),t.jsxs("div",{className:"p-4 bg-[#222] border-t border-white/5 flex justify-between flex-shrink-0",children:[d>1?t.jsx("button",{onClick:()=>x(e=>e-1),className:"px-6 py-3 border border-white/20 rounded-xl font-bold text-xs uppercase hover:bg-white/5 text-white",children:"ÐÐ°Ð·Ð°Ð´"}):t.jsx("div",{}),d<3?t.jsxs("button",{onClick:()=>{if(1===d)x(2);else if(2===d){if("MONEY"===m){if(!v||parseInt(v)<=0)return alert("Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½ÑƒÑŽ ÑÑƒÐ¼Ð¼Ñƒ Ð² Ñ€ÑƒÐ±Ð»ÑÑ…");if(o){if(0===u.length)return alert("Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð²Ñ‹ Ð¿Ñ€Ð¾Ð´Ð°ÐµÑ‚Ðµ")}else if(0===j.length)return alert("Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ ÐºÑƒÐ¿Ð¸Ñ‚ÑŒ")}else if("GIFT"===m){if(0===u.length)return alert("Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¿Ð¾Ð´Ð°Ñ€Ð¾Ðº")}else if(o){if(0===u.length)return alert("Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚ Ð´Ð»Ñ Ð¾Ð±Ð¼ÐµÐ½Ð°")}else{if(0===j.length)return alert("Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ, Ñ‡Ñ‚Ð¾ Ð²Ñ‹ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ");if(0===u.length)return alert("Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ, Ñ‡Ñ‚Ð¾ Ð²Ñ‹ Ð¾Ñ‚Ð´Ð°ÐµÑ‚Ðµ")}x(3)}},className:"px-8 py-3 bg-green-600 text-black font-bold rounded-xl text-xs uppercase hover:bg-green-500 flex items-center gap-2",children:["Ð”Ð°Ð»ÐµÐµ ",t.jsx(q,{size:16})]}):t.jsx("button",{onClick:async()=>{S(!0);try{await(async()=>{})((l.username,v&&parseInt(v))),alert("ÐŸÑ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¾!"),n()}catch(e){alert("ÐžÑˆÐ¸Ð±ÐºÐ°: "+e)}finally{S(!1)}},disabled:E,className:"px-8 py-3 bg-green-600 text-black font-bold rounded-xl text-xs uppercase hover:bg-green-500 flex items-center gap-2 shadow-lg shadow-green-900/50",children:E?"ÐžÐ¢ÐŸÐ ÐÐ’ÐšÐ...":"ÐžÐ¢ÐŸÐ ÐÐ’Ð˜Ð¢Ð¬"})]})]})})},It=({onSwipeLeft:t,onSwipeRight:s,onSwipeUp:r,onSwipeDown:a})=>{const[i,l]=e.useState(null),[n,o]=e.useState(null);return{onTouchStart:e=>{o(null),l({x:e.targetTouches[0].clientX,y:e.targetTouches[0].clientY})},onTouchMove:e=>{o({x:e.targetTouches[0].clientX,y:e.targetTouches[0].clientY})},onTouchEnd:()=>{if(!i||!n)return;const e=i.x-n.x,l=i.y-n.y,o=e>75,c=e<-75,d=l>75,x=l<-75;Math.abs(e)>Math.abs(l)?(o&&t&&t(),c&&s&&s()):(d&&r&&r(),x&&a&&a())}}},Tt=(e,s)=>{if(!e)return"";return e.split(/(@\w+)/g).map((e,r)=>{if(e.startsWith("@")){const a=e.slice(1);return t.jsx("span",{onClick:e=>{e.stopPropagation(),s(a)},className:"text-blue-400 cursor-pointer hover:underline font-bold",children:e},r)}return e})},Lt=({exhibit:r,theme:a,onBack:i,onShare:l,onFavorite:o,onLike:c,isFavorited:d,isLiked:m,onPostComment:p,onCommentLike:h,onDeleteComment:u,onAuthorClick:b,onFollow:g,onMessage:w,onDelete:j,onEdit:N,onAddToCollection:v,onExhibitClick:y,isFollowing:k,currentUser:E,currentUserProfile:S,isAdmin:I,users:T,allExhibits:L,highlightCommentId:A})=>{const[O,D]=e.useState(0),[U,_]=e.useState(""),[M,P]=e.useState(!1),[B,H]=e.useState(!1),[G,Y]=e.useState(null),[W,K]=e.useState(null),[X,Z]=e.useState([]),[oe,ce]=e.useState(!1),[de,xe]=e.useState(!1),[me,pe]=e.useState(1),he="winamp"===a,ue=e.useMemo(()=>{const e=[],t=e=>e?"object"==typeof e&&e.medium?e.medium:e:"https://placehold.co/600x400?text=NO+IMAGE",s=Array.isArray(r.imageUrls)&&r.imageUrls.length>0?r.imageUrls:["https://placehold.co/600x400?text=NO+IMAGE"];if(e.push({type:"image",url:t(s[0])}),r.videoUrl){const t=(e=>{if(!e)return null;let t=e;try{if(e.includes("youtube.com")||e.includes("youtu.be"))t=`https://www.youtube.com/embed/${e.split("v=")[1]?.split("&")[0]||e.split("/").pop()}`;else if(e.includes("rutube.ru")){const s=e.split("/video/")[1]?.split("/")[0];s&&(t=`https://rutube.ru/play/embed/${s}`)}}catch(s){return null}return t})(r.videoUrl);t&&e.push({type:"video",url:t})}return s.length>1&&s.slice(1).forEach(s=>e.push({type:"image",url:t(s)})),e},[r.imageUrls,r.videoUrl]),be=r.specs||{},fe=r.comments||[],ge=gt(r),we=wt[ge],je=we.icon,Ne="CURSED"===ge,ve=r.tradeStatus||"NONE",ye=ht[ve],ke=Object.entries(be).filter(([e,t])=>!!t),Ce=E===r.owner,Ee=It({onSwipeLeft:()=>D(e=>(e+1)%ue.length),onSwipeRight:()=>D(e=>(e-1+ue.length)%ue.length)});e.useEffect(()=>{D(0)},[r.id]),e.useEffect(()=>{const e=e=>{"Escape"===e.key?(xe(!1),pe(1)):"ArrowRight"===e.key?D(e=>(e+1)%ue.length):"ArrowLeft"===e.key&&D(e=>(e-1+ue.length)%ue.length)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[ue.length]);const Se=e.useMemo(()=>{const e=fe.filter(e=>!e.parentId).sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()),t=fe.reduce((e,t)=>(t.parentId&&(e[t.parentId]||(e[t.parentId]=[]),e[t.parentId].push(t)),e),{});return Object.keys(t).forEach(e=>{t[e].sort((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime())}),{roots:e,byParent:t}},[fe]);e.useEffect(()=>{A&&setTimeout(()=>{const e=document.getElementById(`comment-${A}`);e&&(e.scrollIntoView({behavior:"smooth",block:"center"}),e.classList.add("animate-pulse"),setTimeout(()=>e.classList.remove("animate-pulse"),2e3))},500)},[A,fe]);const Ie=e.useMemo(()=>L?((e,t,s=4)=>{if(!e||!t)return[];const r=["the","and","for","with","edition","version","Ð½Ð¾Ð²Ñ‹Ð¹","Ð¿Ñ€Ð¾Ð´Ð°Ð¼","ÐºÑƒÐ¿Ð¸Ð»"],a=e.title.toLowerCase().replace(/[^\w\sÐ°-ÑÑ‘]/gi,"").split(/\s+/).filter(e=>e.length>2&&!r.includes(e));return t.filter(t=>t.id!==e.id&&!t.isDraft).map(t=>{let s=0;t.category===e.category&&(s+=10),t.subcategory&&t.subcategory===e.subcategory&&(s+=25);const r=t.title.toLowerCase().split(/\s+/);let i=0;if(a.forEach(e=>{r.some(t=>t.includes(e)||e.includes(t))&&i++}),s+=15*i,e.relatedIds?.includes(t.id)&&(s+=100),t.specs&&e.specs){const r=Object.values(e.specs).find(e=>["sony","nintendo","sega","apple","nokia"].includes(e.toLowerCase())),a=Object.values(t.specs).find(e=>["sony","nintendo","sega","apple","nokia"].includes(e.toLowerCase()));r&&a&&r.toLowerCase()===a.toLowerCase()&&(s+=20)}return{item:t,score:s}}).filter(e=>e.score>5).sort((e,t)=>t.score-e.score).slice(0,s).map(e=>e.item)})(r,L):[],[r,L]),Te=e.useMemo(()=>r.relatedIds&&L?L.filter(e=>r.relatedIds?.includes(e.id)):[],[r.relatedIds,L]);e.useEffect(()=>{if(null!==W){const e=W.toLowerCase();Z(T.filter(t=>t.username.toLowerCase().includes(e)).slice(0,5))}else Z([])},[W,T]);const Le=e=>{const t=encodeURIComponent(window.location.href),s=encodeURIComponent(`NeoArchive Artifact: ${r.title}`),a=encodeURIComponent(ue[O].url);switch(e){case"tg":window.open(`https://t.me/share/url?url=${t}&text=${s}`);break;case"wa":window.open(`https://api.whatsapp.com/send?text=${s}%20${t}`);break;case"pin":window.open(`https://pinterest.com/pin/create/button/?url=${t}&media=${a}&description=${s}`);break;case"copy":navigator.clipboard.writeText(window.location.href),P(!0),setTimeout(()=>P(!1),2e3)}H(!1)},Ae=(e,s=0)=>{const a=e.likedBy&&e.likedBy.includes(E),i=e.author===E,l=Se.byParent[e.id]||[];return t.jsxs("div",{className:"flex flex-col "+(s>0?"ml-4 md:ml-8 border-l-2 border-white/10 pl-4 mt-2":"mt-4"),children:[t.jsxs("div",{id:`comment-${e.id}`,className:"p-3 border transition-all "+(he?"bg-black border-[#505050]":"rounded-xl bg-white/5 border-white/5 hover:border-white/10"),children:[t.jsxs("div",{className:"flex justify-between items-start mb-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("img",{src:nt(e.author),className:"w-5 h-5 rounded-full cursor-pointer",onClick:()=>b(e.author)}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{onClick:()=>b(e.author),className:"font-bold cursor-pointer text-green-500 font-pixel text-[10px] leading-none",children:["@",e.author]}),t.jsx("div",{className:"text-[9px] opacity-30 font-mono leading-none",children:e.timestamp})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{onClick:()=>h(e.id),className:"flex items-center gap-1 text-[10px] transition-colors "+(a?"text-red-500":"text-gray-500 hover:text-red-500"),children:[t.jsx(R,{size:12,fill:a?"currentColor":"none"})," ",e.likes>0&&e.likes]}),t.jsx("button",{onClick:()=>{return Y({id:(t=e).id,author:t.author}),_(`@${t.author} `),void document.getElementById("comment-input")?.focus();var t},className:"text-gray-500 hover:text-white transition-colors",title:"ÐžÑ‚Ð²ÐµÑ‚Ð¸Ñ‚ÑŒ",children:t.jsx(ne,{size:14})}),(i||I)&&t.jsx("button",{onClick:()=>u(r.id,e.id),className:"text-gray-500 hover:text-red-500 transition-colors",title:"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ",children:t.jsx($,{size:14})})]})]}),t.jsx("p",{className:"font-mono text-xs opacity-80 pl-7 break-words leading-relaxed",children:Tt(e.text,b)})]}),l.map(e=>Ae(e,s+1))]},e.id)},Oe=T.find(e=>e.username===r.owner);return t.jsxs("div",{className:"w-full min-h-full pb-20 animate-in slide-in-from-right-8 fade-in duration-500 "+(he?"font-mono text-gray-300":"dark"===a?"text-gray-200":"text-gray-800"),children:[oe&&S&&L&&Oe&&t.jsx(St,{targetItem:r,currentUser:S,userInventory:L.filter(e=>e.owner===E),recipient:Oe,onClose:()=>ce(!1)}),de&&t.jsxs("div",{className:"fixed inset-0 z-50 bg-black/95 flex flex-col animate-in fade-in duration-200",children:[t.jsxs("div",{className:"absolute top-4 right-4 z-50 flex gap-4",children:[t.jsx("button",{onClick:()=>pe(e=>Math.min(e+.5,3)),className:"p-3 bg-black/50 text-white rounded-full hover:bg-white/20",children:t.jsx(J,{size:24})}),t.jsx("button",{onClick:()=>pe(e=>Math.max(e-.5,1)),className:"p-3 bg-black/50 text-white rounded-full hover:bg-white/20",children:t.jsx(Q,{size:24})}),t.jsx("button",{onClick:()=>{xe(!1),pe(1)},className:"p-3 bg-black/50 text-white rounded-full hover:bg-red-500/20 hover:text-red-500",children:t.jsx(V,{size:24})})]}),t.jsxs("div",{className:"flex-1 flex items-center justify-center relative overflow-hidden",...Ee,children:[t.jsx("button",{onClick:()=>D(e=>(e-1+ue.length)%ue.length),className:"absolute left-4 z-40 p-4 text-white/50 hover:text-white transition-colors",children:t.jsx(ee,{size:48})}),t.jsx("div",{className:"relative w-full h-full flex items-center justify-center p-4",children:"image"===ue[O].type?t.jsx("img",{src:ue[O].url,className:"max-w-full max-h-full object-contain transition-transform duration-300",style:{transform:`scale(${me})`}}):t.jsx("iframe",{src:ue[O].url,className:"w-full h-full max-w-4xl max-h-[80vh]",frameBorder:"0",allowFullScreen:!0})}),t.jsx("button",{onClick:()=>D(e=>(e+1)%ue.length),className:"absolute right-4 z-40 p-4 text-white/50 hover:text-white transition-colors",children:t.jsx(q,{size:48})})]}),t.jsx("div",{className:"h-20 flex items-center justify-center gap-2 pb-4",children:ue.map((e,s)=>t.jsx("div",{className:"w-2 h-2 rounded-full "+(s===O?"bg-white":"bg-white/20")},s))})]}),t.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 pt-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4 border-b border-white/5 pb-2",children:[t.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-mono opacity-50 uppercase",children:[t.jsxs("button",{onClick:i,className:"hover:text-green-500 flex items-center gap-1",children:[t.jsx(z,{size:12})," ÐÐÐ—ÐÐ”"]}),t.jsx("span",{className:"opacity-30",children:"/"}),t.jsx("span",{className:"hover:text-white cursor-pointer",children:r.category})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[(Ce||I)&&t.jsxs("div",{className:"flex gap-2",children:[N&&t.jsx("button",{onClick:()=>N(r),className:"text-purple-400 hover:text-white transition-all",children:t.jsx(F,{size:16})}),j&&t.jsx("button",{onClick:()=>j(r.id),className:"text-red-500 hover:text-white transition-all",children:t.jsx($,{size:16})})]}),t.jsx("div",{className:"h-4 w-[1px] bg-white/10"}),t.jsxs("div",{className:"relative",children:[t.jsx("button",{onClick:()=>H(!B),className:"hover:text-white transition-all "+(M?"text-green-500":"text-gray-400"),children:t.jsx(te,{size:16})}),B&&t.jsxs("div",{className:"absolute right-0 top-6 w-40 bg-dark-surface border border-white/10 rounded-xl shadow-2xl z-50 p-1 animate-in slide-in-from-top-2",children:[t.jsxs("button",{onClick:()=>Le("tg"),className:"w-full text-left p-2 hover:bg-white/5 rounded text-[10px] font-bold flex items-center gap-2",children:[t.jsx(n,{size:12,className:"text-blue-400"})," TELEGRAM"]}),t.jsxs("button",{onClick:()=>Le("wa"),className:"w-full text-left p-2 hover:bg-white/5 rounded text-[10px] font-bold flex items-center gap-2",children:[t.jsx(se,{size:12,className:"text-green-500"})," WHATSAPP"]}),t.jsxs("button",{onClick:()=>Le("copy"),className:"w-full text-left p-2 hover:bg-white/5 rounded text-[10px] font-bold flex items-center gap-2",children:[t.jsx(te,{size:12})," COPY LINK"]})]})]})]})]}),t.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 lg:gap-8 items-start",children:[t.jsxs("div",{className:"w-full lg:w-[45%] space-y-4 lg:sticky lg:top-20",children:[t.jsxs("div",{className:`relative aspect-square w-full overflow-hidden border transition-all duration-500 group ${he?"bg-black border-[#505050]":"dark"===a?"rounded-2xl border-white/10 bg-black":"rounded-2xl border-black/10 bg-white"} ${Ne?"shadow-[0_0_30px_red]":""}`,...Ee,children:["image"===ue[O].type?t.jsxs("div",{className:"w-full h-full relative cursor-zoom-in",onClick:()=>xe(!0),children:[t.jsx("img",{src:ue[O].url,alt:r.title,className:"w-full h-full object-contain bg-black/50"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-transparent pointer-events-none opacity-50"})]}):t.jsx("iframe",{src:ue[O].url,className:"w-full h-full relative z-10",frameBorder:"0",allowFullScreen:!0}),ue.length>1&&t.jsx("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center gap-1.5 z-20",children:ue.map((e,s)=>t.jsx("div",{className:"w-1.5 h-1.5 rounded-full shadow "+(s===O?"bg-white scale-125":"bg-white/30")},s))}),t.jsx("button",{onClick:()=>xe(!0),className:"absolute top-2 right-2 p-1.5 bg-black/50 text-white rounded-lg opacity-0 group-hover:opacity-100 transition-opacity",children:t.jsx(re,{size:16})})]}),!Ce&&("FOR_TRADE"===ve||"FOR_SALE"===ve||"NONE"===ve||!ve)&&t.jsxs("button",{onClick:()=>ce(!0),className:"w-full flex items-center justify-center gap-2 py-3 bg-blue-600 text-white rounded-xl font-pixel text-[10px] uppercase font-bold hover:bg-blue-500 shadow-lg",children:[t.jsx(f,{size:14})," ÐŸÐ Ð•Ð”Ð›ÐžÐ–Ð˜Ð¢Ð¬ ÐžÐ‘ÐœÐ•Ð"]})]}),t.jsxs("div",{className:"flex-1 w-full",children:[t.jsxs("div",{className:"p-5 md:p-6 border mb-4 "+(he?"bg-[#191919] border-[#505050]":"dark"===a?"bg-dark-surface border-white/10 rounded-2xl":"bg-white border-black/10 shadow-xl rounded-2xl"),children:[t.jsxs("div",{className:"flex flex-col gap-4 mb-6",children:[t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx("span",{className:"px-2 py-0.5 text-[9px] font-pixel font-bold uppercase border rounded "+(he?"border-[#00ff00] text-[#00ff00]":"border-green-500/50 text-green-400 bg-green-500/10"),children:r.category}),t.jsxs("span",{className:"px-2 py-0.5 text-[9px] font-bold font-pixel border rounded flex items-center gap-1 uppercase "+(he?"border-[#00ff00] text-[#00ff00]":`${we.bgColor} ${we.color} border-white/5`),children:[t.jsx(je,{size:10})," ",we.name]}),"NONE"!==ve&&t.jsxs("span",{className:`px-2 py-0.5 text-[9px] font-bold font-pixel border rounded flex items-center gap-1 uppercase ${ye.color} ${ye.bg}`,children:[ye.icon&&s.createElement(ye.icon,{size:10})," ",ye.badge]})]}),t.jsx("h1",{className:"text-xl md:text-3xl font-bold font-pixel leading-tight "+(Ne?"text-red-500 italic":he?"text-[#00ff00]":"text-white"),children:r.title}),t.jsxs("div",{className:"flex items-center gap-4 text-xs font-mono opacity-70 border-b border-white/5 pb-4",children:[t.jsxs("button",{onClick:()=>c(r.id),className:"flex items-center gap-1.5 hover:text-green-400 transition-colors "+(m?"text-green-500":""),children:[t.jsx(R,{size:16,fill:m?"currentColor":"none"})," ",r.likes]}),t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(x,{size:16})," ",r.views]}),t.jsx("div",{className:"flex-1"}),Ce&&t.jsx("button",{onClick:()=>v?.(r.id),className:"hover:text-blue-400 transition-colors",title:"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð² ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸ÑŽ",children:t.jsx(ae,{size:18})})]})]}),t.jsxs("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-white/5",children:[t.jsxs("div",{className:"flex items-center gap-3 cursor-pointer group",onClick:()=>b(r.owner),children:[t.jsx("img",{src:nt(r.owner),className:"w-10 h-10 rounded-full border border-white/20"}),t.jsxs("div",{children:[t.jsxs("div",{className:"font-bold font-pixel text-xs transition-colors "+(he?"text-[#00ff00]":"group-hover:text-green-500"),children:["@",r.owner]}),t.jsx("div",{className:"text-[9px] opacity-40 font-mono uppercase",children:r.timestamp.split(",")[0]})]})]}),!Ce&&t.jsx("button",{onClick:()=>g(r.owner),className:"px-3 py-1.5 text-[9px] font-bold font-pixel border rounded transition-all "+(k?"border-white/10 opacity-40":"bg-white/10 hover:bg-white/20 border-transparent"),children:k?"ÐŸÐžÐ”ÐŸÐ˜Ð¡ÐÐ":"ÐŸÐžÐ”ÐŸÐ˜Ð¡ÐÐ¢Ð¬Ð¡Ð¯"})]}),t.jsx("p",{className:"font-mono text-xs leading-relaxed whitespace-pre-wrap opacity-80 mb-6 "+(he?"text-[#00ff00]":""),children:r.description}),ke.length>0&&t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"font-pixel text-[9px] opacity-40 uppercase tracking-widest mb-2",children:"Ð¥ÐÐ ÐÐšÐ¢Ð•Ð Ð˜Ð¡Ð¢Ð˜ÐšÐ˜"}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-1",children:[ke.map(([e,s])=>t.jsxs("div",{className:"px-2 py-1.5 border rounded flex flex-col justify-center "+(he?"bg-black border-[#505050]":"bg-black/20 border-white/5"),children:[t.jsx("div",{className:"text-[7px] uppercase opacity-40 font-pixel tracking-wider mb-0.5",children:e}),t.jsx("div",{className:"font-bold font-mono text-[10px] break-words leading-tight",children:s})]},e)),r.condition&&t.jsxs("div",{className:"px-2 py-1.5 border rounded flex flex-col justify-center "+(he?"bg-black border-[#505050]":"bg-black/20 border-white/5"),children:[t.jsx("div",{className:"text-[7px] uppercase opacity-40 font-pixel tracking-wider mb-0.5",children:"Ð¡ÐžÐ¡Ð¢ÐžÐ¯ÐÐ˜Ð•"}),t.jsx("div",{className:"font-bold font-mono text-[10px] text-green-400 uppercase leading-tight",children:r.condition})]})]})]}),Te.length>0&&t.jsxs("div",{className:"mt-6 pt-4 border-t border-white/5",children:[t.jsxs("h3",{className:"font-pixel text-[9px] opacity-40 uppercase tracking-widest mb-3 flex items-center gap-1",children:[t.jsx(ie,{size:10})," Ð¡Ð’Ð¯Ð—ÐÐÐÐ«Ð• ÐŸÐ Ð•Ð”ÐœÐ•Ð¢Ð«"]}),t.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:Te.map(e=>t.jsxs("div",{onClick:()=>y(e),className:"flex-shrink-0 w-20 group cursor-pointer",children:[t.jsx("div",{className:"aspect-square rounded-lg overflow-hidden border border-white/10 relative bg-black/20",children:t.jsx("img",{src:"string"==typeof e.imageUrls[0]?e.imageUrls[0]:e.imageUrls[0]?.thumbnail||"https://placehold.co/600x400?text=NO+IMAGE",className:"w-full h-full object-cover transition-transform group-hover:scale-110"})}),t.jsx("div",{className:"mt-1 text-[8px] font-bold truncate opacity-70 group-hover:opacity-100",children:e.title})]},e.id))})]})]}),t.jsxs("div",{className:"p-5 rounded-2xl border "+(he?"bg-[#191919] border-[#505050]":"bg-dark-surface border-white/5"),children:[t.jsxs("h3",{className:"font-pixel text-xs mb-4 flex items-center gap-2",children:[t.jsx(C,{size:14})," ÐžÐ‘Ð¡Ð£Ð–Ð”Ð•ÐÐ˜Ð• (",fe.length,")"]}),t.jsx("div",{className:"space-y-4 mb-6 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:0===fe.length?t.jsx("div",{className:"text-center py-8 opacity-30 text-[10px] font-pixel uppercase tracking-widest border border-dashed border-white/10 rounded-xl",children:"Ð¢Ð˜Ð¨Ð˜ÐÐ Ð’ Ð­Ð¤Ð˜Ð Ð•"}):Se.roots.map(e=>Ae(e))}),t.jsxs("div",{className:"flex flex-col gap-2 relative",children:[null!==W&&X.length>0&&t.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-64 bg-black border border-white/10 rounded-xl overflow-hidden shadow-2xl z-50",children:X.map(e=>t.jsxs("button",{onClick:()=>(e=>{const t=U.split(" ");t.pop();const s=[...t,`@${e} `].join(" ");_(s),K(null)})(e.username),className:"w-full flex items-center gap-2 p-2 hover:bg-white/10 text-left transition-colors",children:[t.jsx("img",{src:e.avatarUrl,className:"w-6 h-6 rounded-full"}),t.jsx("div",{className:"flex flex-col",children:t.jsxs("span",{className:"font-bold text-[10px]",children:["@",e.username]})})]},e.username))}),G&&t.jsxs("div",{className:"flex items-center justify-between text-[10px] font-mono bg-white/5 p-2 rounded-lg border border-white/5",children:[t.jsxs("span",{className:"opacity-70",children:["ÐžÑ‚Ð²ÐµÑ‚ ",t.jsxs("span",{className:"text-green-500 font-bold",children:["@",G.author]})]}),t.jsx("button",{onClick:()=>{Y(null),_("")},className:"hover:text-red-500",children:t.jsx(V,{size:12})})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{id:"comment-input",type:"text",value:U,onChange:e=>{const t=e.target.value;_(t);const s=t.split(" ").pop();s&&s.startsWith("@")?K(s.slice(1)):K(null)},placeholder:G?"Ð’Ð°Ñˆ Ð¾Ñ‚Ð²ÐµÑ‚...":"ÐÐ°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¹...",className:"flex-1 bg-black/40 border border-white/10 px-3 py-2.5 font-mono text-xs focus:outline-none focus:border-green-500 transition-colors rounded-lg",onKeyDown:e=>{"Enter"===e.key&&U.trim()&&(p(r.id,U,G?.id),_(""),Y(null),K(null))}}),t.jsx("button",{onClick:()=>{U.trim()&&(p(r.id,U,G?.id),_(""),Y(null),K(null))},className:"bg-green-500 text-black p-2.5 rounded-lg hover:scale-105 active:scale-95 transition-all",children:t.jsx(n,{size:16})})]})]})]})]})]}),Ie.length>0&&t.jsxs("div",{className:"mt-12 mb-8",children:[t.jsxs("h3",{className:"font-pixel text-[9px] opacity-40 mb-4 flex items-center gap-2 tracking-[0.2em] uppercase",children:[t.jsx(le,{size:12,className:"text-purple-400"})," ÐŸÐžÐ¥ÐžÐ–Ð˜Ð• ÐžÐ‘ÐªÐ•ÐšÐ¢Ð«"]}),t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:Ie.map(e=>t.jsx(Nt,{item:e,theme:a,onClick:()=>y(e),isLiked:e.likedBy?.includes(E),onLike:()=>{},onAuthorClick:b},e.id))})]})]})]})},At=({title:e,children:s,className:r=""})=>t.jsxs("div",{className:`mb-6 bg-[#292929] border-t-2 border-l-2 border-r-2 border-b-2 border-t-[#505050] border-l-[#505050] border-r-[#101010] border-b-[#101010] ${r}`,children:[t.jsxs("div",{className:"h-4 bg-gradient-to-r from-wa-blue-light to-wa-blue-dark flex items-center justify-between px-1 cursor-default select-none mb-1",children:[t.jsx("span",{className:"text-white font-winamp text-[10px] tracking-widest uppercase",children:e}),t.jsx("div",{className:"w-2 h-2 bg-[#DCDCDC] border border-t-white border-l-white border-r-[#505050] border-b-[#505050]"})]}),t.jsx("div",{className:"p-2",children:s})]}),Ot=({theme:r,users:a=[],exhibits:i=[],onExhibitClick:l,onUserClick:n,onBack:o,currentUser:c})=>{const[d,x]=e.useState("trade"===new URLSearchParams(window.location.search).get("tab")?"TRADE":"TRENDS"),m="winamp"===r;e.useEffect(()=>{const e=new URLSearchParams(window.location.search);"TRENDS"===d?e.delete("tab"):"TRADE"===d&&e.set("tab","trade");const t=`${window.location.pathname}${e.toString()?"?"+e.toString():""}`;window.history.replaceState({...window.history.state},"",t)},[d]);const p=a.map(e=>{const t=i.filter(t=>t.owner===e.username).length,s=5*t+(e.achievements?.find(e=>"INFLUENCER"===e.id)?.current||0)+2*(e.followers?.length||0);return{...e,score:s,postCount:t}}).filter(e=>e.score>0).sort((e,t)=>t.score-e.score).slice(0,5),h=i.sort((e,t)=>t.likes+t.views-(e.likes+e.views)).slice(0,6),u=i.filter(e=>"FOR_SALE"===e.tradeStatus||"FOR_TRADE"===e.tradeStatus),b=(e,r,a)=>t.jsxs("button",{onClick:()=>x(e),className:"flex flex-col items-center gap-1 p-3 flex-1 transition-all border-b-2 "+(d===e?m?"border-wa-gold text-wa-gold bg-[#292929]":"border-green-500 text-green-500 font-bold":"border-transparent opacity-50 hover:opacity-100"),children:[s.createElement(r,{size:20}),t.jsx("span",{className:"text-[9px] font-pixel uppercase",children:a})]});return t.jsxs("div",{className:"max-w-4xl mx-auto pb-32 animate-in fade-in "+(m?"font-winamp text-wa-green":""),children:[m?t.jsxs(At,{title:"COMMUNITY NETWORK",children:[t.jsxs("h1",{className:"text-xl font-winamp text-wa-gold flex items-center gap-2 mb-2",children:[t.jsx(oe,{size:24})," Ð“Ð›ÐžÐ‘ÐÐ›Ð¬ÐÐÐ¯ Ð¡Ð•Ð¢Ð¬"]}),t.jsxs("p",{className:"text-[12px] opacity-80",children:["ÐÐºÑ‚Ð¸Ð²Ð½Ñ‹Ðµ ÑƒÐ·Ð»Ñ‹: ",a.length]})]}):t.jsxs("div",{className:"p-6 mb-6 border-b border-white/10",children:[t.jsxs("h1",{className:"text-2xl font-pixel font-bold flex items-center gap-3",children:[t.jsx(oe,{size:28})," Ð¡ÐžÐžÐ‘Ð©Ð•Ð¡Ð¢Ð’Ðž"]}),t.jsx("p",{className:"text-xs opacity-60 mt-1 font-mono",children:"Ð¦ÐµÐ½Ñ‚Ñ€ Ð¾Ð±Ð¼ÐµÐ½Ð° Ð¸ Ñ€ÐµÐ¹Ñ‚Ð¸Ð½Ð³Ð¸ ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ð¾Ð½ÐµÑ€Ð¾Ð²."})]}),t.jsxs("div",{className:"flex mb-8 sticky top-16 z-30 "+(m?"bg-[#292929] border-b border-[#505050]":"border-b border-white/10 bg-black/80 backdrop-blur-md"),children:[b("TRENDS",ce,"Ð¢Ð Ð•ÐÐ”Ð«"),b("TRADE",f,"ÐžÐ‘ÐœÐ•Ð")]}),t.jsxs("div",{className:"px-4",children:["TRENDS"===d&&t.jsxs("div",{className:"space-y-8 animate-in slide-in-from-right-4",children:[t.jsxs("div",{className:"p-4 rounded-2xl border "+(m?"bg-[#292929] border-[#505050]":"bg-gradient-to-r from-yellow-900/10 to-transparent border-yellow-500/20"),children:[t.jsxs("h3",{className:"text-xs mb-4 flex items-center gap-2 uppercase tracking-widest "+(m?"text-wa-gold font-winamp":"text-yellow-500 font-pixel"),children:[t.jsx(_,{size:14})," Ð¢ÐžÐŸ ÐšÐžÐ›Ð›Ð•ÐšÐ¦Ð˜ÐžÐÐ•Ð Ð«"]}),t.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2 scrollbar-hide",onTouchStart:e=>e.stopPropagation(),onTouchMove:e=>e.stopPropagation(),onTouchEnd:e=>e.stopPropagation(),children:p.map((e,s)=>t.jsxs("div",{onClick:()=>n(e.username),className:"flex flex-col items-center gap-2 cursor-pointer group min-w-[80px]",children:[t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:e.avatarUrl||nt(e.username),className:"w-14 h-14 rounded-full border-2 transition-transform group-hover:scale-110 "+(m?"border-[#505050]":"border-yellow-500/50")}),t.jsxs("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-yellow-500 text-black text-[10px] font-bold flex items-center justify-center rounded-full",children:["#",s+1]})]}),t.jsxs("div",{className:"text-center",children:[t.jsxs("span",{className:"text-[10px] font-bold truncate max-w-[80px] block",children:["@",e.username]}),t.jsxs("span",{className:"text-[8px] opacity-50",children:[e.score," pts"]})]})]},e.username))})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-xs mb-4 flex items-center gap-2 uppercase tracking-widest "+(m?"text-wa-gold font-winamp":"text-red-400 font-pixel"),children:[t.jsx(T,{size:14})," Ð¡Ð•Ð™Ð§ÐÐ¡ ÐŸÐžÐŸÐ£Ð›Ð¯Ð ÐÐž"]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:h.map(e=>t.jsx(Nt,{item:e,theme:r,onClick:l,isLiked:!1,onLike:()=>{},onAuthorClick:n},e.id))})]})]}),"TRADE"===d&&t.jsxs("div",{className:"animate-in slide-in-from-right-4",children:[t.jsxs("div",{className:"mb-6 p-4 border rounded-xl text-center "+(m?"border-[#505050] bg-[#292929]":"border-blue-500/30 bg-blue-500/5"),children:[t.jsx("h3",{className:"text-sm mb-1 font-bold",children:"Ð¢ÐžÐ Ð“ÐžÐ’ÐÐ¯ ÐŸÐ›ÐžÐ©ÐÐ”ÐšÐ"}),t.jsxs("p",{className:"text-[10px] opacity-60",children:["Ð£ Ð½Ð°Ñ Ð½ÐµÑ‚ Ð³Ð°Ñ€Ð°Ð½Ñ‚Ð°. Ð’ÑÐµ ÑÐ´ÐµÐ»ÐºÐ¸ Ð¿Ñ€Ð¾Ð²Ð¾Ð´ÑÑ‚ÑÑ Ð½Ð°Ð¿Ñ€ÑÐ¼ÑƒÑŽ Ð¼ÐµÐ¶Ð´Ñƒ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑÐ¼Ð¸.",t.jsx("br",{}),"Ð”Ð¾Ð³Ð¾Ð²Ð°Ñ€Ð¸Ð²Ð°Ð¹Ñ‚ÐµÑÑŒ Ð² Ð»Ð¸Ñ‡Ð½Ñ‹Ñ… ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸ÑÑ… Ð¸Ð»Ð¸ ÑÑ‚Ð¾Ñ€Ð¾Ð½Ð½Ð¸Ñ… Ð¼ÐµÑÑÐµÐ½Ð´Ð¶ÐµÑ€Ð°Ñ…."]})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:0===u.length?t.jsx("div",{className:"col-span-full text-center py-10 opacity-50 font-mono text-xs",children:"Ð Ñ‹Ð½Ð¾Ðº Ð¿ÑƒÑÑ‚. Ð’Ñ‹ÑÑ‚Ð°Ð²Ð¸Ñ‚Ðµ Ñ‡Ñ‚Ð¾-Ð½Ð¸Ð±ÑƒÐ´ÑŒ Ð½Ð° Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ñƒ!"}):u.map(e=>t.jsxs("div",{className:"relative",children:[t.jsx(Nt,{item:e,theme:r,onClick:l,isLiked:!1,onLike:()=>{},onAuthorClick:n}),t.jsx("div",{className:"absolute top-2 left-2 px-2 py-1 text-[10px] font-bold rounded shadow-lg "+(m?"bg-black text-[#00ff00] border border-[#00ff00]":"bg-black/80 text-white backdrop-blur-md"),children:"FOR_SALE"===e.tradeStatus?`${e.price||"?"} ${e.currency||"RUB"}`:"ÐžÐ‘ÐœÐ•Ð"})]},e.id))})]})]})]})},Rt=({text:e,size:s="sm",className:r=""})=>{const a="lg"===s?"w-16 h-16":"w-4 h-4",i="lg"===s?"gap-1":"gap-0.5";return t.jsxs("div",{className:`flex flex-col items-center justify-center ${r}`,children:[t.jsxs("div",{className:`relative ${a} grid grid-cols-2 ${i} animate-[spin_0.8s_steps(4)_infinite]`,children:[t.jsx("div",{className:"bg-current opacity-100 shadow-[0_0_10px_currentColor]"}),t.jsx("div",{className:"bg-current opacity-20"}),t.jsx("div",{className:"bg-current opacity-20"}),t.jsx("div",{className:"bg-current opacity-100 shadow-[0_0_10px_currentColor]"})]}),e&&t.jsxs("span",{className:"font-pixel tracking-widest animate-pulse "+("lg"===s?"text-2xl mt-6":"text-[10px] ml-2"),children:[e,t.jsx("span",{className:"animate-[ping_1s_steps(2)_infinite] inline-block ml-1 opacity-75",children:"_"})]})]})},Dt=({notifications:r,messages:a,currentUser:i,theme:n,onAuthorClick:o,onExhibitClick:c,onChatClick:d})=>{const[x,m]=e.useState("NOTIFICATIONS"),[p,h]=e.useState("ALL"),[u,b]=e.useState(!1),g=e.useMemo(()=>{let e=r.filter(e=>e.recipient.toLowerCase()===i.username.toLowerCase());return"UNREAD"===p&&(e=e.filter(e=>!e.isRead)),e.sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime())},[r,i.username,p]),w=a.filter(e=>e.sender.toLowerCase()===i.username.toLowerCase()||e.receiver.toLowerCase()===i.username.toLowerCase()),j=e.useMemo(()=>{const e={},t=[];return g.forEach(s=>{const r=`${new Date(s.timestamp).toDateString()}_${s.type}_${s.targetId||"general"}`;e[r]||(e[r]=[],t.push(r)),e[r].push(s)}),t.map(t=>{const s=e[t];return{id:t,type:s[0].type,items:s,timestamp:s[0].timestamp,targetId:s[0].targetId,targetPreview:s[0].targetPreview}})},[g]),N=e=>{switch(e){case"LIKE":return t.jsx(R,{size:16,className:"text-red-500 fill-current"});case"COMMENT":return t.jsx(C,{size:16,className:"text-blue-500 fill-current"});case"FOLLOW":return t.jsx(l,{size:16,className:"text-green-500"});case"GUESTBOOK":return t.jsx(me,{size:16,className:"text-yellow-500"});case"TRADE_OFFER":return t.jsx(f,{size:16,className:"text-blue-400"});case"TRADE_ACCEPTED":return t.jsx(Z,{size:16,className:"text-green-400"});default:return t.jsx(de,{size:16})}},v=e=>{const s=e.items.length,r=e.items[0],a=Array.from(new Set(e.items.map(e=>e.actor))),i=e.items.some(e=>!e.isRead);let l="";l="LIKE"===r.type?"ÐŸÐ¾Ð½Ñ€Ð°Ð²Ð¸Ð»ÑÑ Ð²Ð°Ñˆ ÑÐºÑÐ¿Ð¾Ð½Ð°Ñ‚":"COMMENT"===r.type?"ÐÐ¾Ð²Ñ‹Ð¹ ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¹":"FOLLOW"===r.type?"ÐÐ¾Ð²Ñ‹Ð¹ Ð¿Ð¾Ð´Ð¿Ð¸ÑÑ‡Ð¸Ðº":r.type.includes("TRADE")?"ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð¾ ÑÐ´ÐµÐ»ÐºÐµ":"Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ðµ";const d=1===a.length?t.jsxs("span",{className:"font-bold text-green-400 cursor-pointer hover:underline",onClick:()=>o(a[0]),children:["@",a[0]]}):t.jsxs("span",{children:[t.jsxs("span",{className:"font-bold text-green-400",children:["@",a[0]]})," Ð¸ ÐµÑ‰Ðµ ",t.jsx("span",{className:"font-bold",children:a.length-1})]});return t.jsxs("div",{className:"p-4 border-b transition-all flex gap-4 "+(i?"bg-green-900/10 border-green-500/30":"winamp"===n?"border-[#505050] bg-[#191919]":"border-white/5 bg-transparent"),children:[t.jsx("div",{className:"pt-1",children:N(r.type)}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"text-sm font-mono mb-1",children:[d," ",t.jsx("span",{className:"opacity-70",children:l.toLowerCase()})]}),r.targetPreview&&t.jsxs("div",{onClick:()=>r.targetId&&c(r.targetId),className:"text-xs font-bold font-pixel opacity-90 cursor-pointer hover:text-green-400 transition-colors border-l-2 border-white/20 pl-2 mt-2",children:['"',r.targetPreview,'"']}),t.jsxs("div",{className:"text-[10px] opacity-40 mt-2 font-mono flex items-center gap-2",children:[new Date(r.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),s>1&&t.jsxs("span",{className:"bg-white/10 px-1.5 rounded-full text-[9px]",children:["+",s," ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹"]})]})]}),i&&t.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 mt-2"})]},e.id)};let y="";return t.jsxs("div",{className:"max-w-2xl mx-auto animate-in fade-in pb-20 "+("winamp"===n?"font-mono text-gray-300":""),children:[t.jsxs("div",{className:"flex mb-6 border-b "+("winamp"===n?"border-[#505050]":"border-gray-500/30"),children:[t.jsxs("button",{onClick:()=>m("NOTIFICATIONS"),className:"flex-1 pb-3 text-center font-pixel text-xs transition-colors flex items-center justify-center gap-2 "+("NOTIFICATIONS"===x?"border-b-2 border-green-500 text-green-500 font-bold":"opacity-50 hover:opacity-100"),children:[t.jsx(de,{size:14})," Ð˜ÐÐ¤Ðž",g.some(e=>!e.isRead)&&t.jsx("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full"})]}),t.jsxs("button",{onClick:()=>m("MESSAGES"),className:"flex-1 pb-3 text-center font-pixel text-xs transition-colors flex items-center justify-center gap-2 "+("MESSAGES"===x?"border-b-2 border-green-500 text-green-500 font-bold":"opacity-50 hover:opacity-100"),children:[t.jsx(se,{size:14})," Ð§ÐÐ¢Ð«"]}),t.jsxs("button",{onClick:()=>m("TRADES"),className:"flex-1 pb-3 text-center font-pixel text-xs transition-colors flex items-center justify-center gap-2 "+("TRADES"===x?"border-b-2 border-green-500 text-green-500 font-bold":"opacity-50 hover:opacity-100"),children:[t.jsx(f,{size:14})," ÐžÐ‘ÐœÐ•Ð"]})]}),"NOTIFICATIONS"===x&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-4 px-2",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>h("ALL"),className:"text-[10px] px-3 py-1 rounded-full border "+("ALL"===p?"bg-white text-black border-white":"border-white/20 opacity-50"),children:"Ð’Ð¡Ð•"}),t.jsx("button",{onClick:()=>h("UNREAD"),className:"text-[10px] px-3 py-1 rounded-full border "+("UNREAD"===p?"bg-green-500 text-black border-green-500":"border-white/20 opacity-50"),children:"ÐÐžÐ’Ð«Ð•"})]}),t.jsxs("div",{className:"flex gap-2",children:[g.some(e=>!e.isRead)&&t.jsx("button",{onClick:()=>{(async e=>{Ge.notifications.forEach(t=>{t.recipient!==e||t.isRead||(t.isRead=!0,Ye().then(e=>e.put("notifications",t)))}),Ve()})(i.username)},className:"text-[10px] text-green-500 hover:underline flex items-center gap-1",children:t.jsx(xe,{size:12})}),t.jsx("button",{onClick:async()=>{b(!0);try{await et()}catch(e){console.error("Refresh failed",e)}finally{setTimeout(()=>b(!1),500)}},className:"text-[10px] hover:text-white flex items-center gap-1 "+(u?"animate-spin opacity-100":"opacity-50"),children:t.jsx(f,{size:12})})]})]}),0===j.length?t.jsx("div",{className:"text-center py-20 opacity-30 font-pixel text-xs",children:"ÐÐ•Ð¢ Ð£Ð’Ð•Ð”ÐžÐœÐ›Ð•ÐÐ˜Ð™"}):t.jsx("div",{className:"rounded-xl overflow-hidden border "+("winamp"===n?"border-[#505050] bg-black":"border-white/10 bg-white/5"),children:j.map(e=>{const r=(e=>{const t=new Date(e),s=new Date,r=new Date;return r.setDate(s.getDate()-1),t.toDateString()===s.toDateString()?"Ð¡Ð•Ð“ÐžÐ”ÐÐ¯":t.toDateString()===r.toDateString()?"Ð’Ð§Ð•Ð Ð":t.toLocaleDateString()})(e.timestamp),a=r!==y;return y=r,t.jsxs(s.Fragment,{children:[a&&t.jsx("div",{className:"bg-white/5 px-4 py-2 text-[10px] font-bold font-pixel uppercase tracking-widest text-white/50 border-b border-white/5",children:r}),v(e)]},e.id)})})]}),"MESSAGES"===x&&t.jsx("div",{className:"space-y-2",children:0===w.length?t.jsx("div",{className:"text-center py-20 opacity-30 font-pixel text-xs",children:"ÐÐ•Ð¢ Ð¡ÐžÐžÐ‘Ð©Ð•ÐÐ˜Ð™"}):(()=>{const e={};return w.forEach(t=>{const s=t.sender.toLowerCase()===i.username.toLowerCase()?t.receiver:t.sender;e[s]||(e[s]=[]),e[s].push(t)}),Object.entries(e).map(([e,s])=>{const r=s.sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime())[0],a=s.some(t=>!t.isRead&&t.sender.toLowerCase()===e.toLowerCase());return t.jsxs("div",{onClick:()=>d(e),className:`flex items-center gap-4 p-4 rounded-xl border cursor-pointer hover:bg-white/5 transition-all ${"winamp"===n?"border-[#505050] bg-[#191919]":"border-white/10 bg-white/5"} ${a?"border-green-500/50":""}`,children:[t.jsx("img",{src:nt(e),className:"w-10 h-10 rounded-full border border-white/20"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsxs("span",{className:"font-bold font-pixel text-xs "+(a?"text-green-400":""),children:["@",e]}),t.jsx("span",{className:"text-[9px] opacity-40 font-mono",children:new Date(r.timestamp).toLocaleDateString()})]}),t.jsxs("div",{className:"text-xs font-mono truncate "+(a?"text-white":"opacity-60"),children:[r.sender.toLowerCase()===i.username.toLowerCase()&&t.jsx("span",{className:"opacity-50",children:"Ð’Ñ‹: "}),r.text]})]}),a&&t.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"})]},e)})})()}),"TRADES"===x&&t.jsx("div",{children:t.jsx("div",{className:"text-center opacity-30 py-10 font-pixel text-xs",children:"ÐÐšÐ¢Ð˜Ð’ÐÐ«Ð• Ð¡Ð”Ð•Ð›ÐšÐ˜"})})]})},zt=({theme:e,achievements:s,onBack:r})=>{const a="winamp"===e;return t.jsxs("div",{className:"max-w-4xl mx-auto animate-in fade-in pb-20 px-4 "+(a?"font-mono text-gray-300":""),children:[t.jsxs("button",{onClick:r,className:"flex items-center gap-2 mb-8 hover:underline opacity-70 font-pixel text-xs "+(a?"text-[#00ff00]":""),children:[t.jsx(z,{size:16})," ÐÐÐ—ÐÐ”"]}),t.jsxs("div",{className:"text-center mb-12",children:[t.jsxs("h1",{className:"text-3xl md:text-5xl font-pixel font-black mb-4 flex items-center justify-center gap-4 "+(a?"text-[#00ff00]":""),children:[t.jsx(_,{size:40,className:"text-yellow-500"})," Ð—ÐÐ› Ð¡Ð›ÐÐ’Ð«"]}),t.jsx("p",{className:"font-mono text-sm opacity-60 uppercase tracking-widest",children:"ÐŸÑ€Ð¾Ð³Ñ€ÐµÑÑ ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð½ÐµÐ¹Ñ€Ð¾Ð½Ð½Ñ‹Ñ… ÑƒÐ·Ð»Ð¾Ð²."})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(bt).map(([e,r])=>{const i=s.find(t=>t.id===e)||{current:0,target:r.target,unlocked:!1},l=Math.min(100,i.current/r.target*100);return t.jsxs("div",{className:"relative p-6 rounded-3xl border-2 transition-all group "+(a?i.unlocked?"bg-[#191919] border-[#00ff00]":"bg-[#191919] border-[#505050] opacity-50":i.unlocked?"bg-dark-surface border-green-500/50 shadow-[0_0_20px_rgba(74,222,128,0.2)]":"bg-black/40 border-white/5 opacity-60 grayscale hover:grayscale-0 hover:opacity-100"),children:[t.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[t.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center ${i.unlocked?r.color:"bg-white/10"} text-black shadow-lg`,children:t.jsx(r.icon,{size:28,className:i.unlocked?"text-black":"text-white/30"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("h3",{className:"font-pixel text-sm font-black mb-1 flex items-center gap-2 "+(a&&i.unlocked?"text-[#00ff00]":""),children:[r.label,i.unlocked&&t.jsx(pe,{size:14,className:"text-green-400"})]}),t.jsx("p",{className:"font-mono text-[10px] opacity-60 leading-relaxed uppercase",children:r.desc})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between font-mono text-[9px] font-bold",children:[t.jsxs("span",{children:["ÐŸÐ ÐžÐ“Ð Ð•Ð¡Ð¡: ",i.current," / ",r.target]}),t.jsxs("span",{children:[Math.round(l),"%"]})]}),t.jsx("div",{className:"w-full h-1.5 bg-white/5 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full transition-all duration-1000 "+(i.unlocked?"bg-green-500 shadow-[0_0_10px_#4ade80]":"bg-white/20"),style:{width:`${l}%`}})})]}),!i.unlocked&&t.jsx("div",{className:"absolute top-4 right-4",children:t.jsx(c,{size:14,className:"opacity-20"})})]},e)})})]})},Ut=({collection:e,artifacts:s,theme:r,onBack:a,onExhibitClick:i,onAuthorClick:l,currentUser:n,onEdit:o,onDelete:c,onLike:d})=>{const x=n===e.owner,m="winamp"===r;return t.jsxs("div",{className:"w-full min-h-full pb-20 animate-in slide-in-from-right-8 fade-in duration-500 "+(m?"font-mono text-gray-300":""),children:[t.jsxs("div",{className:"flex items-center justify-between mb-8 pb-4 border-b border-white/10",children:[t.jsxs("button",{onClick:a,className:"flex items-center gap-2 font-pixel text-[10px] opacity-70 hover:opacity-100 uppercase tracking-widest "+(m?"text-[#00ff00]":""),children:[t.jsx(z,{size:14})," ÐÐÐ—ÐÐ”"]}),t.jsxs("div",{className:"flex gap-4",children:[x&&c&&t.jsxs("button",{onClick:()=>{confirm("Ð’Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½Ñ‹, Ñ‡Ñ‚Ð¾ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ ÑÑ‚Ñƒ ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸ÑŽ?")&&c(e.id)},className:"text-red-500 hover:text-red-400 transition-all flex items-center gap-2 font-pixel text-[10px] uppercase",children:[t.jsx($,{size:16})," Ð£Ð”ÐÐ›Ð˜Ð¢Ð¬"]}),x&&o&&t.jsxs("button",{onClick:o,className:"text-purple-400 hover:text-purple-300 transition-all flex items-center gap-2 font-pixel text-[10px] uppercase",children:[t.jsx(he,{size:16})," Ð Ð•Ð”ÐÐšÐ¢Ð˜Ð ÐžÐ’ÐÐ¢Ð¬"]}),t.jsx("button",{className:"opacity-70 hover:opacity-100 transition-all",children:t.jsx(te,{size:18})})]})]}),t.jsxs("div",{className:"flex flex-col md:flex-row gap-8 mb-12",children:[t.jsx("div",{className:"w-full md:w-1/3 aspect-[4/3] rounded-3xl overflow-hidden border-2 border-white/10 shadow-2xl "+(m?"rounded-none border-[#505050]":""),children:t.jsx("img",{src:e.coverImage,className:"w-full h-full object-cover",alt:e.title})}),t.jsxs("div",{className:"flex-1 space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2 font-pixel text-[10px] text-blue-500 tracking-widest",children:[t.jsx(D,{size:14})," ÐšÐžÐ›Ð›Ð•ÐšÐ¦Ð˜Ð¯"]}),t.jsx("h1",{className:"text-3xl md:text-5xl font-pixel font-black leading-tight "+(m?"text-[#00ff00]":""),children:e.title}),t.jsx("p",{className:"font-mono text-sm opacity-70 max-w-2xl leading-relaxed",children:e.description||"ÐÐµÑ‚ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ñ Ð´Ð»Ñ ÑÑ‚Ð¾Ð¹ ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ð¸."}),t.jsxs("div",{className:"pt-4 flex items-center gap-6",children:[t.jsxs("div",{onClick:()=>l(e.owner),className:"flex items-center gap-3 cursor-pointer group",children:[t.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-blue-500/30 p-0.5",children:t.jsx("img",{src:nt(e.owner),className:"w-full h-full object-cover rounded-full"})}),t.jsxs("div",{children:[t.jsx("div",{className:"font-pixel text-[10px] opacity-40 uppercase",children:"Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ"}),t.jsxs("div",{className:"font-bold font-pixel text-xs group-hover:text-blue-500 transition-colors "+(m?"text-[#00ff00]":""),children:["@",e.owner]})]})]}),t.jsx("div",{className:"h-10 w-[1px] bg-white/10"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-pixel text-[10px] opacity-40 uppercase",children:"ÐÑ€Ñ‚ÐµÑ„Ð°ÐºÑ‚Ð¾Ð²"}),t.jsxs("div",{className:"font-bold font-pixel text-xs",children:[s.length," ITEMS"]})]})]})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("h3",{className:"font-pixel text-xs opacity-50 uppercase tracking-[0.3em] flex items-center gap-2",children:[t.jsx(ue,{size:14})," Ð¡ÐžÐ¡Ð¢ÐÐ’_Ð­ÐšÐ¡ÐŸÐžÐ—Ð˜Ð¦Ð˜Ð˜"]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[s.map(e=>t.jsx(Nt,{item:e,theme:r,onClick:i,isLiked:e.likedBy?.includes(n),onLike:t=>d(e.id,t),onAuthorClick:l},e.id)),0===s.length&&t.jsx("div",{className:"col-span-full py-12 text-center border-2 border-dashed border-white/5 rounded-2xl opacity-40 font-pixel text-[10px] uppercase",children:"Ð­ÐºÑÐ¿Ð¾Ð·Ð¸Ñ†Ð¸Ñ Ð¿ÑƒÑÑ‚Ð°"})]})]})]})},_t=({theme:s,currentUser:r,partnerUsername:a,messages:i,onBack:l,onSendMessage:o})=>{const[c,d]=e.useState(""),x=e.useRef(null),m=e.useMemo(()=>{const e=new Map;return i.forEach(t=>e.set(t.id,t)),Array.from(e.values()).sort((e,t)=>e.timestamp.localeCompare(t.timestamp))},[i]);e.useEffect(()=>{x.current&&(x.current.scrollTop=x.current.scrollHeight)},[m]);const p="winamp"===s;return t.jsxs("div",{className:"max-w-2xl mx-auto flex flex-col h-[calc(100vh-140px)] animate-in fade-in "+(p?"font-mono text-gray-300":""),children:[t.jsx("div",{className:"flex items-center justify-between p-4 border-b rounded-t-3xl "+(p?"bg-[#191919] border-[#505050]":"border-white/10 bg-white/5"),children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("button",{onClick:l,className:"p-2 rounded-full transition-colors "+(p?"hover:bg-[#505050]":"hover:bg-white/10"),children:t.jsx(z,{size:20})}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("img",{src:nt(a),className:"w-10 h-10 rounded-full border border-green-500/30"}),t.jsxs("div",{children:[t.jsxs("div",{className:"font-pixel text-xs font-bold "+(p?"text-[#00ff00]":""),children:["@",a]}),t.jsxs("div",{className:"flex items-center gap-1 text-[8px] font-mono text-green-500 animate-pulse",children:[t.jsx(be,{size:8})," SECURE_LINK_ESTABLISHED"]})]})]})]})}),t.jsx("div",{ref:x,className:"flex-1 overflow-y-auto p-4 space-y-4 scrollbar-hide no-scrollbar",children:0===m.length?t.jsxs("div",{className:"h-full flex flex-col items-center justify-center opacity-20 space-y-4",children:[t.jsx(C,{size:48}),t.jsx("p",{className:"font-pixel text-[10px] tracking-widest uppercase",children:"ÐÐÐ§ÐÐ˜Ð¢Ð• Ð”Ð˜ÐÐ›ÐžÐ“ Ð’ Ð¡Ð•Ð¢Ð˜"})]}):m.map(e=>{const s=e.sender===r.username;return t.jsx("div",{className:`flex ${s?"justify-end":"justify-start"} animate-in slide-in-from-bottom-2`,children:t.jsxs("div",{className:"max-w-[80%] p-4 rounded-2xl font-mono text-sm leading-relaxed break-words "+(s?"bg-green-500 text-black rounded-tr-none":p?"bg-[#191919] border border-[#505050] text-[#00ff00] rounded-tl-none":"bg-white/10 text-white rounded-tl-none"),children:[e.text,t.jsx("div",{className:"text-[9px] mt-2 opacity-50 "+(s?"text-black/60":"text-white/40"),children:e.timestamp.split(",")[1]||e.timestamp})]})},e.id)})}),t.jsx("form",{onSubmit:e=>{e.preventDefault(),c.trim()&&(o(c),d(""))},className:"p-4 border-t rounded-b-3xl "+(p?"bg-[#191919] border-[#505050]":"bg-white/5 border-white/10"),children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{value:c,onChange:e=>d(e.target.value),placeholder:"Ð’Ð’Ð•Ð¡Ð¢Ð˜ Ð¡ÐžÐžÐ‘Ð©Ð•ÐÐ˜Ð•...",className:"flex-1 rounded-xl px-4 py-3 font-mono text-sm focus:outline-none focus:border-green-500 transition-all "+(p?"bg-black/40 border border-[#505050] text-[#00ff00] placeholder-gray-600":"bg-black/40 border border-white/10")}),t.jsx("button",{type:"submit",className:"p-4 bg-green-500 text-black rounded-xl hover:scale-105 active:scale-95 transition-all",children:t.jsx(n,{size:20})})]})})]})},Mt=({theme:r,onBack:a,onSave:i,initialData:l,userArtifacts:n=[]})=>{const[o,c]=e.useState(l?.imageUrls||[]),[d,x]=e.useState(l?.title||""),[m,p]=e.useState(l?.description||""),[h,u]=e.useState(l?.category||xt.PHONES),[b,g]=e.useState(l?.subcategory||""),[w,j]=e.useState(l?.condition||""),[N,v]=e.useState(l?.videoUrl||""),[y,k]=e.useState(l?.specs||{}),[C,E]=e.useState(l?.tradeStatus||"NONE"),[S,T]=e.useState(l?.relatedIds||[]),[L,A]=e.useState(l?.price?l.price.toString():""),[O,R]=e.useState(l?.currency||"RUB"),[D,_]=e.useState(l?.tradeRequest||""),M=e.useRef(null),F=(e=!1)=>{d?i({id:l?.id,title:d,description:m,category:h,subcategory:b,condition:w,videoUrl:N,imageUrls:o.length>0?o:["https://placehold.co/600x400?text=NO+IMAGE"],specs:y,tradeStatus:C,price:L?parseFloat(L):void 0,currency:O,tradeRequest:D,relatedIds:S,isDraft:e}):alert("Ð£ÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð°Ñ€Ñ‚ÐµÑ„Ð°ÐºÑ‚Ð°")},P="winamp"===r;return t.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 animate-in fade-in pb-32 "+(P?"font-mono text-gray-300":""),children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("button",{onClick:a,className:"flex items-center gap-2 font-pixel text-[10px] opacity-70 hover:opacity-100 uppercase tracking-widest "+(P?"text-[#00ff00]":""),children:[t.jsx(z,{size:14})," ÐžÐ¢ÐœÐ•ÐÐ"]}),t.jsx("h2",{className:"font-pixel text-lg "+(P?"text-[#00ff00]":""),children:l?"Ð Ð•Ð”ÐÐšÐ¢Ð˜Ð ÐžÐ’ÐÐÐ˜Ð•":"ÐÐžÐ’Ð«Ð™_ÐÐ Ð¢Ð•Ð¤ÐÐšÐ¢"})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex gap-4 overflow-x-auto pb-4 no-scrollbar",children:[o.map((e,s)=>t.jsxs("div",{className:"relative w-32 h-32 md:w-40 md:h-40 flex-shrink-0 group",children:[t.jsx("img",{src:e,className:"w-full h-full object-cover rounded-2xl border-2 border-white/10"}),t.jsx("button",{onClick:()=>c(e=>e.filter((e,t)=>t!==s)),className:"absolute -top-2 -right-2 bg-red-500 text-white p-1.5 rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-opacity",children:t.jsx(V,{size:14})})]},s)),t.jsxs("button",{onClick:()=>M.current?.click(),className:"w-32 h-32 md:w-40 md:h-40 flex-shrink-0 flex flex-col items-center justify-center gap-2 border-2 border-dashed rounded-2xl transition-all "+(P?"border-[#505050] bg-[#191919] text-[#00ff00]":"dark"===r?"border-white/10 hover:border-green-500/50 bg-white/5":"border-black/10 hover:border-black/30"),children:[t.jsx(U,{size:28}),t.jsx("span",{className:"text-[10px] font-pixel",children:"Ð”ÐžÐ‘ÐÐ’Ð˜Ð¢Ð¬_Ð¤ÐžÐ¢Ðž"})]}),t.jsx("input",{type:"file",ref:M,className:"hidden",multiple:!0,accept:"image/*",onChange:async e=>{if(e.target.files&&e.target.files.length>0){const t=[...o];for(let s=0;s<e.target.files.length;s++){const r=await ot(e.target.files[s]);t.push(r)}c(t)}}})]}),t.jsx("p",{className:"text-[10px] font-mono opacity-40 text-center md:text-left",children:"Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ Ð´Ð¾ 5 Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¹."})]}),t.jsx("div",{className:"p-8 rounded-3xl border "+(P?"bg-[#191919] border-[#505050]":"dark"===r?"bg-dark-surface border-white/10":"bg-white border-black/10 shadow-xl"),children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-pixel opacity-50 uppercase tracking-widest mb-2 block",children:"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ ÑÐºÑÐ¿Ð¾Ð½Ð°Ñ‚Ð°"}),t.jsx("input",{value:d,onChange:e=>x(e.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-5 py-4 font-mono text-sm focus:border-green-500 outline-none transition-colors "+(P?"text-[#00ff00] placeholder-gray-600":""),placeholder:"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¸Ð»Ð¸ Ð¼Ð¾Ð´ÐµÐ»ÑŒ..."})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"text-[10px] font-pixel opacity-50 uppercase tracking-widest mb-2 flex items-center gap-2",children:[t.jsx(fe,{size:12})," Ð¡ÑÑ‹Ð»ÐºÐ° Ð½Ð° Ð²Ð¸Ð´ÐµÐ¾ (YouTube/Rutube)"]}),t.jsx("input",{value:N,onChange:e=>v(e.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-5 py-4 font-mono text-sm focus:border-green-500 outline-none transition-colors "+(P?"text-[#00ff00] placeholder-gray-600":""),placeholder:"https://youtube.com/watch?v=..."})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-pixel opacity-50 uppercase tracking-widest mb-2 block",children:"ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ"}),t.jsx("select",{value:h,onChange:e=>{u(e.target.value),g(""),j("")},className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-4 font-mono text-sm focus:border-green-500 outline-none appearance-none "+(P?"text-[#00ff00]":""),children:Object.values(xt).map(e=>t.jsx("option",{value:e,children:e},e))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-pixel opacity-50 uppercase tracking-widest mb-2 block",children:"ÐŸÐ¾Ð´ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ"}),t.jsxs("select",{value:b,onChange:e=>g(e.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-4 font-mono text-sm focus:border-green-500 outline-none appearance-none disabled:opacity-30 "+(P?"text-[#00ff00]":""),disabled:!mt[h],children:[t.jsx("option",{value:"",children:"ÐÐµ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð¾"}),mt[h]?.map(e=>t.jsx("option",{value:e,children:e},e))]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"text-[10px] font-pixel opacity-50 uppercase tracking-widest mb-2 flex items-center gap-2",children:[t.jsx(I,{size:12})," Ð“Ñ€ÐµÐ¹Ð´ / Ð¡Ð¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ"]}),t.jsxs("select",{value:w,onChange:e=>j(e.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-4 font-mono text-sm focus:border-green-500 outline-none appearance-none "+(P?"text-[#00ff00]":""),children:[t.jsx("option",{value:"",children:"ÐÐµ ÑƒÐºÐ°Ð·Ð°Ð½Ð¾"}),(ft[h]||ft[xt.MISC]).map(e=>t.jsx("option",{value:e,children:e},e))]})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"text-[10px] font-pixel opacity-50 uppercase tracking-widest mb-2 flex items-center gap-2",children:[t.jsx(f,{size:12})," Ð¡Ñ‚Ð°Ñ‚ÑƒÑ (Ð¢Ð¾Ñ€Ð³Ð¾Ð²Ñ‹Ð¹ Ñ‚ÐµÑ€Ð¼Ð¸Ð½Ð°Ð»)"]}),t.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:Object.entries(ht).filter(([e])=>"NONE"!==e).map(([e,r])=>{const a=e,i=C===a;return t.jsxs("button",{onClick:()=>E(i?"NONE":a),className:`p-3 rounded-xl border text-[10px] font-bold uppercase transition-all flex items-center justify-center gap-2 ${i?r.color:"border-white/10 opacity-50 hover:opacity-100 hover:border-white/30"}`,children:[r.icon&&s.createElement(r.icon,{size:14}),r.label]},e)})}),"FOR_SALE"===C&&t.jsxs("div",{className:"flex gap-2 animate-in slide-in-from-top-2",children:[t.jsx("input",{type:"number",value:L,onChange:e=>A(e.target.value),placeholder:"Ð¦ÐµÐ½Ð°...",className:"flex-1 bg-black/30 border border-white/10 rounded-xl px-4 py-3 font-mono text-sm focus:border-green-500 outline-none "+(P?"text-[#00ff00]":"")}),t.jsxs("select",{value:O,onChange:e=>R(e.target.value),className:"bg-black/30 border border-white/10 rounded-xl px-4 py-3 font-mono text-sm focus:border-green-500 outline-none "+(P?"text-[#00ff00]":""),children:[t.jsx("option",{value:"RUB",children:"RUB"}),t.jsx("option",{value:"USD",children:"USD"}),t.jsx("option",{value:"ETH",children:"ETH"})]})]}),"FOR_TRADE"===C&&t.jsx("div",{className:"animate-in slide-in-from-top-2",children:t.jsx("input",{value:D,onChange:e=>_(e.target.value),placeholder:"Ð§Ñ‚Ð¾ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ Ð²Ð·Ð°Ð¼ÐµÐ½? (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: Nintendo 3DS)",className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 font-mono text-sm focus:border-green-500 outline-none "+(P?"text-[#00ff00]":"")})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-pixel opacity-50 uppercase tracking-widest mb-2 block",children:"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¸ Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ñ"}),t.jsx("textarea",{value:m,onChange:e=>p(e.target.value),rows:6,className:"w-full bg-black/30 border border-white/10 rounded-xl px-5 py-4 font-mono text-sm focus:border-green-500 outline-none resize-none leading-relaxed "+(P?"text-[#00ff00] placeholder-gray-600":""),placeholder:"ÐžÐ¿Ð¸ÑˆÐ¸Ñ‚Ðµ Ð°Ñ€Ñ‚ÐµÑ„Ð°ÐºÑ‚, ÐµÐ³Ð¾ Ð¿Ñ€Ð¾Ð¸ÑÑ…Ð¾Ð¶Ð´ÐµÐ½Ð¸Ðµ Ð¸ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ð´Ð»Ñ ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ð¸..."})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("h3",{className:"font-pixel text-[11px] opacity-70 tracking-widest uppercase flex items-center gap-2",children:[t.jsx(ge,{size:14,className:"text-blue-400"})," Ð¢Ð•Ð¥ÐÐ˜Ð§Ð•Ð¡ÐšÐ˜Ð™_ÐŸÐÐ¡ÐŸÐžÐ Ð¢"]})}),t.jsx("div",{className:"grid grid-cols-1 gap-4 p-5 rounded-2xl border border-white/5 "+(P?"bg-black":"bg-black/20"),children:(pt[h]||["ÐŸÑ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒ","Ð“Ð¾Ð´","ÐœÐ¾Ð´ÐµÐ»ÑŒ"]).map(e=>t.jsxs("div",{children:[t.jsx("label",{className:"text-[9px] font-mono opacity-40 uppercase mb-1 block",children:e}),t.jsx("input",{value:y[e]||"",onChange:t=>k(s=>({...s,[e]:t.target.value})),className:"w-full bg-black/20 border border-white/5 rounded-lg px-4 py-3 font-mono text-xs focus:border-green-500 outline-none transition-all "+(P?"text-[#00ff00]":""),placeholder:`Ð£ÐºÐ°Ð¶Ð¸Ñ‚Ðµ ${e}...`})]},e))}),t.jsxs("div",{className:"pt-4 border-t border-white/10",children:[t.jsxs("h3",{className:"font-pixel text-[11px] opacity-70 tracking-widest uppercase flex items-center gap-2 mb-4",children:[t.jsx(ie,{size:14,className:"text-yellow-400"})," Ð¡Ð’Ð¯Ð—ÐÐÐÐ«Ð• ÐŸÐ Ð•Ð”ÐœÐ•Ð¢Ð«"]}),t.jsxs("div",{className:"max-h-48 overflow-y-auto grid grid-cols-1 gap-2 pr-2 custom-scrollbar",children:[0===n.filter(e=>e.id!==l?.id).length&&t.jsx("div",{className:"text-center opacity-30 text-[10px] py-4",children:"ÐÐµÑ‚ Ð´Ñ€ÑƒÐ³Ð¸Ñ… Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚Ð¾Ð² Ð´Ð»Ñ ÑÐ²ÑÐ·ÐºÐ¸"}),n.filter(e=>e.id!==l?.id).map(e=>t.jsxs("div",{onClick:()=>{return t=e.id,void T(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"flex items-center gap-3 p-2 rounded-lg border cursor-pointer transition-all "+(S.includes(e.id)?"bg-green-500/10 border-green-500 text-green-500":"border-white/10 hover:bg-white/5"),children:[t.jsx("div",{className:"w-8 h-8 rounded bg-gray-800 overflow-hidden flex-shrink-0",children:t.jsx("img",{src:"string"==typeof e.imageUrls[0]?e.imageUrls[0]:e.imageUrls[0]?.thumbnail||"https://placehold.co/600x400?text=NO+IMAGE",className:"w-full h-full object-cover"})}),t.jsx("div",{className:"text-xs truncate flex-1",children:e.title}),S.includes(e.id)&&t.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"})]},e.id))]})]})]})]})}),t.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[t.jsxs("button",{onClick:()=>F(!1),className:"flex-1 py-5 bg-green-500 text-black rounded-2xl font-pixel text-sm tracking-[0.2em] hover:scale-[1.01] active:scale-95 transition-all shadow-[0_0_30px_rgba(74,222,128,0.4)] flex items-center justify-center gap-3 font-black",children:[t.jsx(we,{size:20})," Ð¡ÐžÐ¥Ð ÐÐÐ˜Ð¢Ð¬ Ð’ ÐÐ Ð¥Ð˜Ð’"]}),t.jsxs("button",{onClick:()=>F(!0),className:"px-8 py-5 bg-white/5 border-2 border-white/10 rounded-2xl font-pixel text-[10px] opacity-60 hover:opacity-100 hover:bg-white/10 transition-all flex items-center justify-center gap-3 tracking-widest",children:[t.jsx(je,{size:20})," Ð’ Ð§Ð•Ð ÐÐžÐ’Ð˜ÐšÐ˜"]})]})]})]})},Ft=({theme:s,userArtifacts:r,initialData:a,onBack:i,onSave:l,onDelete:n})=>{const[o,c]=e.useState(a?.title||""),[d,x]=e.useState(a?.description||""),[m,p]=e.useState(a?.coverImage||""),[h,u]=e.useState(a?.exhibitIds||[]),b=e.useRef(null),f="winamp"===s;return t.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 animate-in fade-in pb-32 "+(f?"font-mono text-gray-300":""),children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("button",{onClick:i,className:"flex items-center gap-2 font-pixel text-[10px] opacity-70 hover:opacity-100 uppercase tracking-widest "+(f?"text-[#00ff00]":""),children:[t.jsx(z,{size:14})," ÐžÐ¢ÐœÐ•ÐÐ"]}),t.jsxs("div",{className:"flex gap-4",children:[a&&n&&t.jsxs("button",{onClick:()=>{confirm("Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸ÑŽ?")&&n(a.id)},className:"text-red-500 hover:text-red-400 flex items-center gap-2 font-pixel text-[10px] uppercase",children:[t.jsx($,{size:14})," Ð£Ð”ÐÐ›Ð˜Ð¢Ð¬"]}),t.jsx("h2",{className:"font-pixel text-lg "+(f?"text-[#00ff00]":""),children:a?"Ð Ð•Ð”ÐÐšÐ¢Ð˜Ð ÐžÐ’ÐÐÐ˜Ð•":"ÐÐžÐ’ÐÐ¯_ÐšÐžÐ›Ð›Ð•ÐšÐ¦Ð˜Ð¯"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{onClick:()=>b.current?.click(),className:"aspect-video rounded-2xl border-2 border-dashed flex flex-col items-center justify-center cursor-pointer transition-all relative overflow-hidden group "+(f?"border-[#505050] bg-[#191919] text-[#00ff00]":"dark"===s?"border-white/10 hover:border-green-500/50 bg-white/5":"border-black/10 hover:border-black/30"),children:[m?t.jsxs(t.Fragment,{children:[t.jsx("img",{src:m,className:"absolute inset-0 w-full h-full object-cover"}),t.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity",children:t.jsx(U,{size:32,className:"text-white"})})]}):t.jsxs(t.Fragment,{children:[t.jsx(U,{size:32,className:"opacity-50 mb-2"}),t.jsx("span",{className:"text-[10px] font-pixel opacity-50",children:"ÐžÐ‘Ð›ÐžÐ–ÐšÐ"})]}),t.jsx("input",{type:"file",ref:b,className:"hidden",accept:"image/*",onChange:async e=>{if(e.target.files&&e.target.files[0]){const t=await ot(e.target.files[0]);p(t)}}})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-pixel opacity-50 uppercase tracking-widest mb-2 block",children:"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ"}),t.jsx("input",{value:o,onChange:e=>c(e.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-5 py-4 font-mono text-sm focus:border-green-500 outline-none "+(f?"text-[#00ff00] placeholder-gray-600":""),placeholder:"ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: ÐœÐ¾Ð¸ Ñ€ÐµÑ‚Ñ€Ð¾ ÐºÐ¾Ð½ÑÐ¾Ð»Ð¸"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-pixel opacity-50 uppercase tracking-widest mb-2 block",children:"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ"}),t.jsx("textarea",{value:d,onChange:e=>x(e.target.value),rows:4,className:"w-full bg-black/30 border border-white/10 rounded-xl px-5 py-4 font-mono text-sm focus:border-green-500 outline-none resize-none "+(f?"text-[#00ff00] placeholder-gray-600":""),placeholder:"Ðž Ñ‡ÐµÐ¼ ÑÑ‚Ð° Ð¿Ð¾Ð´Ð±Ð¾Ñ€ÐºÐ°..."})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"font-pixel text-[11px] opacity-70 tracking-widest uppercase",children:"Ð’Ð«Ð‘Ð•Ð Ð˜Ð¢Ð• ÐÐ Ð¢Ð•Ð¤ÐÐšÐ¢Ð«"}),t.jsxs("span",{className:"text-xs font-mono",children:[h.length," Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð¾"]})]}),t.jsx("div",{className:"grid grid-cols-2 gap-3 max-h-[500px] overflow-y-auto pr-2 custom-scrollbar",children:0===r.length?t.jsxs("div",{className:"col-span-2 text-center py-10 opacity-50 font-mono text-xs border border-dashed border-white/10 rounded-xl",children:["Ð£ Ð²Ð°Ñ Ð¿Ð¾ÐºÐ° Ð½ÐµÑ‚ ÑÐ²Ð¾Ð¸Ñ… Ð°Ñ€Ñ‚ÐµÑ„Ð°ÐºÑ‚Ð¾Ð². ",t.jsx("br",{})," Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð¸Ñ…, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð² ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸ÑŽ."]}):r.map(e=>{const s=h.includes(e.id);return t.jsxs("div",{onClick:()=>{return t=e.id,void u(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"relative aspect-square rounded-xl overflow-hidden cursor-pointer border-2 transition-all "+(s?"border-green-500 opacity-100":"border-transparent opacity-60 hover:opacity-100"),children:[t.jsx("img",{src:"string"==typeof e.imageUrls[0]?e.imageUrls[0]:e.imageUrls[0]?.thumbnail||"https://placehold.co/600x400?text=NO+IMAGE",className:"w-full h-full object-cover"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent flex flex-col justify-end p-2",children:t.jsx("span",{className:"text-[9px] font-pixel text-white truncate",children:e.title})}),t.jsx("div",{className:"absolute top-2 right-2",children:s?t.jsx(pe,{size:18,className:"text-green-500 bg-black rounded-full"}):t.jsx(Ne,{size:18,className:"text-white drop-shadow-md"})})]},e.id)})})]})]}),t.jsxs("button",{onClick:()=>o.trim()?m?void l({id:a?.id,title:o,description:d,coverImage:m,exhibitIds:h,likes:a?.likes||0,likedBy:a?.likedBy||[]}):alert("Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¾Ð±Ð»Ð¾Ð¶ÐºÑƒ"):alert("Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ð¸"),className:"w-full py-5 bg-green-500 text-black rounded-2xl font-pixel text-sm tracking-[0.2em] hover:scale-[1.01] active:scale-95 transition-all shadow-[0_0_30px_rgba(74,222,128,0.4)] flex items-center justify-center gap-3 font-black",children:[t.jsx(we,{size:20})," Ð¡ÐžÐ¥Ð ÐÐÐ˜Ð¢Ð¬ ÐšÐžÐ›Ð›Ð•ÐšÐ¦Ð˜Ð®"]})]})},Pt=({theme:r,onBack:a,onSave:i})=>{const[l,n]=e.useState(""),[o,c]=e.useState(xt.MISC),[d,x]=e.useState("MEDIUM"),[m,p]=e.useState(""),[h,u]=e.useState(""),b=e.useRef(null),f="winamp"===r;return t.jsxs("div",{className:"max-w-xl mx-auto space-y-8 animate-in fade-in pb-32 "+(f?"font-mono text-gray-300":""),children:[t.jsxs("div",{className:"flex items-center justify-between border-b border-dashed border-white/10 pb-4",children:[t.jsxs("button",{onClick:a,className:"flex items-center gap-2 font-pixel text-[10px] opacity-70 hover:opacity-100 uppercase tracking-widest "+(f?"text-[#00ff00]":""),children:[t.jsx(z,{size:14})," ÐžÐ¢ÐœÐ•ÐÐ"]}),t.jsxs("h2",{className:"font-pixel text-lg flex items-center gap-2 "+(f?"text-[#00ff00]":""),children:[t.jsx(j,{size:18})," ÐÐžÐ’ÐžÐ• Ð–Ð•Ð›ÐÐÐ˜Ð•"]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{onClick:()=>b.current?.click(),className:"aspect-video rounded-2xl border-2 border-dashed flex flex-col items-center justify-center cursor-pointer transition-all relative overflow-hidden group "+(f?"border-[#505050] bg-[#191919] text-[#00ff00]":"dark"===r?"border-white/10 hover:border-purple-500/50 bg-white/5":"border-black/10 hover:border-black/30"),children:[h?t.jsxs(t.Fragment,{children:[t.jsx("img",{src:h,className:"absolute inset-0 w-full h-full object-cover opacity-50 group-hover:opacity-30 transition-opacity"}),t.jsx("div",{className:"z-10 text-xs font-pixel uppercase tracking-widest bg-black/50 px-3 py-1 rounded",children:"Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ñ€ÐµÑ„ÐµÑ€ÐµÐ½Ñ"})]}):t.jsxs(t.Fragment,{children:[t.jsx(U,{size:32,className:"opacity-50 mb-2"}),t.jsx("span",{className:"text-[10px] font-pixel opacity-50",children:"Ð”ÐžÐ‘ÐÐ’Ð˜Ð¢Ð¬ Ð Ð•Ð¤Ð•Ð Ð•ÐÐ¡ (Ð¤ÐžÐ¢Ðž)"})]}),t.jsx("input",{type:"file",ref:b,className:"hidden",accept:"image/*",onChange:async e=>{if(e.target.files&&e.target.files[0]){const t=await ot(e.target.files[0]);u(t)}}})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-pixel opacity-50 uppercase tracking-widest mb-2 block",children:"Ð§Ñ‚Ð¾ Ð²Ñ‹ Ð¸Ñ‰ÐµÑ‚Ðµ?"}),t.jsx("input",{value:l,onChange:e=>n(e.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-5 py-4 font-mono text-sm focus:border-purple-500 outline-none transition-colors "+(f?"text-[#00ff00] placeholder-gray-600":""),placeholder:"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ ÐºÐ¾Ð½ÑÐ¾Ð»Ð¸, Ð¸Ð³Ñ€Ñ‹, Ð³Ð°Ð´Ð¶ÐµÑ‚Ð°...",autoFocus:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-pixel opacity-50 uppercase tracking-widest mb-2 block",children:"ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ"}),t.jsx("select",{value:o,onChange:e=>c(e.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-4 font-mono text-sm focus:border-purple-500 outline-none appearance-none "+(f?"text-[#00ff00]":""),children:Object.values(xt).map(e=>t.jsx("option",{value:e,children:e},e))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-pixel opacity-50 uppercase tracking-widest mb-2 block",children:"ÐŸÑ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚ Ð¿Ð¾Ð¸ÑÐºÐ°"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(ut).map(([e,r])=>t.jsxs("button",{onClick:()=>x(e),className:"p-3 rounded-xl border flex items-center justify-center gap-2 transition-all "+(d===e?r.color+" bg-white/10":"border-white/10 opacity-50 hover:opacity-100"),children:[s.createElement(r.icon,{size:14}),t.jsx("span",{className:"text-[10px] font-bold uppercase",children:r.label})]},e))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-pixel opacity-50 uppercase tracking-widest mb-2 block",children:"Ð—Ð°Ð¼ÐµÑ‚ÐºÐ¸ (Ð‘ÑŽÐ´Ð¶ÐµÑ‚, ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ, Ñ€ÐµÐ³Ð¸Ð¾Ð½)"}),t.jsx("textarea",{value:m,onChange:e=>p(e.target.value),rows:4,className:"w-full bg-black/30 border border-white/10 rounded-xl px-5 py-4 font-mono text-sm focus:border-purple-500 outline-none resize-none "+(f?"text-[#00ff00] placeholder-gray-600":""),placeholder:"Ð˜Ñ‰Ñƒ Ð² ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ð¸ Mint, Ð±ÑŽÐ´Ð¶ÐµÑ‚ Ð´Ð¾ 5000Ñ€..."})]})]}),t.jsxs("button",{onClick:()=>{if(!l.trim())return alert("Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ Ñ‚Ð¾Ð³Ð¾, Ñ‡Ñ‚Ð¾ Ð¸Ñ‰ÐµÑ‚Ðµ");i({id:crypto.randomUUID(),title:l,category:o,priority:d,notes:m,referenceImageUrl:h,timestamp:(new Date).toISOString()})},className:"w-full py-5 bg-purple-500 text-white rounded-2xl font-pixel text-sm tracking-[0.2em] hover:scale-[1.01] active:scale-95 transition-all shadow-[0_0_30px_rgba(168,85,247,0.4)] flex items-center justify-center gap-3 font-black",children:[t.jsx(j,{size:20})," Ð”ÐžÐ‘ÐÐ’Ð˜Ð¢Ð¬ Ð’ Ð’Ð˜Ð¨Ð›Ð˜Ð¡Ð¢"]})]})]})},Bt=({item:r,theme:a,onBack:i,onDelete:l,onAuthorClick:n,currentUser:o,userInventory:c=[]})=>{const d=ut[r.priority],x=o===r.owner,m="xp"===a,p="winamp"===a,[h,u]=e.useState(!1),b=tt().users.find(e=>e.username===r.owner)||{username:r.owner},f=tt().users.find(e=>e.username===o)||{username:o};return t.jsxs("div",{className:"max-w-2xl mx-auto animate-in fade-in pb-20 pt-4 px-4 "+(p?"font-mono text-gray-300":""),children:[h&&t.jsx(St,{recipient:b,currentUser:f,userInventory:c,onClose:()=>u(!1),isWishlist:!0,wishlistId:r.id}),t.jsxs("div",{className:"flex items-center justify-between mb-6 border-b border-white/10 pb-4",children:[t.jsxs("button",{onClick:i,className:"flex items-center gap-2 font-pixel text-[10px] opacity-70 hover:opacity-100 uppercase tracking-widest "+(p?"text-[#00ff00]":""),children:[t.jsx(z,{size:14})," ÐÐÐ—ÐÐ”"]}),x&&l&&t.jsxs("button",{onClick:()=>l(r.id),className:"text-red-500 hover:text-red-400 transition-all flex items-center gap-2 font-pixel text-[10px] uppercase",children:[t.jsx($,{size:14})," Ð£Ð”ÐÐ›Ð˜Ð¢Ð¬ Ð—ÐÐŸÐ ÐžÐ¡"]})]}),t.jsx("div",{className:"p-1 rounded-3xl border-2 border-dashed "+(m?"border-[#0058EE] bg-white":p?"border-[#505050] bg-[#191919]":"border-purple-500/30 "+("dark"===a?"bg-dark-surface":"bg-white")),children:t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsx("div",{className:"flex justify-center",children:t.jsxs("div",{className:`px-4 py-1.5 rounded-full border flex items-center gap-2 text-[10px] font-pixel font-bold uppercase tracking-widest ${d.color} bg-black/5`,children:[s.createElement(d.icon,{size:14}),"WANTED: ",r.priority," PRIORITY"]})}),t.jsxs("div",{className:"aspect-video rounded-xl overflow-hidden border-2 relative flex items-center justify-center "+(p?"border-[#505050] bg-black":"dark"===a?"border-white/10 bg-black/20":"border-black/10 bg-gray-50"),children:[r.referenceImageUrl?t.jsx("img",{src:r.referenceImageUrl,className:"w-full h-full object-contain",alt:r.title}):t.jsxs("div",{className:"flex flex-col items-center opacity-30",children:[t.jsx(j,{size:48}),t.jsx("span",{className:"font-pixel text-[10px] mt-2",children:"ÐÐ•Ð¢ Ð Ð•Ð¤Ð•Ð Ð•ÐÐ¡Ð"})]}),"GRAIL"===r.priority&&t.jsx("div",{className:"absolute inset-0 border-4 border-yellow-500/20 pointer-events-none animate-pulse"})]}),t.jsxs("div",{className:"text-center space-y-2",children:[t.jsx("div",{className:"font-pixel text-[10px] opacity-50 uppercase tracking-widest "+(p?"text-[#00ff00]":""),children:r.category}),t.jsx("h1",{className:"text-2xl md:text-3xl font-pixel font-black "+(p?"text-[#00ff00]":""),children:r.title})]}),t.jsxs("div",{className:"p-6 rounded-xl border "+(p?"bg-black border-[#505050]":"dark"===a?"bg-black/30 border-white/10":"bg-gray-100 border-black/5"),children:[t.jsxs("h3",{className:"font-pixel text-[10px] opacity-50 mb-3 flex items-center gap-2 uppercase tracking-widest",children:[t.jsx(N,{size:14})," ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ Ð¿Ð¾Ð¸ÑÐºÐ° / Ð—Ð°Ð¼ÐµÑ‚ÐºÐ¸"]}),t.jsx("p",{className:"font-mono text-sm leading-relaxed whitespace-pre-wrap italic "+(p?"text-[#00ff00]":""),children:r.notes||"ÐÐ²Ñ‚Ð¾Ñ€ Ð½Ðµ Ð¾ÑÑ‚Ð°Ð²Ð¸Ð» Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ð¿Ñ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ð¹ Ðº Ð¿Ð¾Ð¸ÑÐºÑƒ."})]}),t.jsx("div",{className:"flex items-center justify-center pt-4 border-t border-dashed border-white/10",children:t.jsxs("div",{onClick:()=>n(r.owner),className:"flex items-center gap-3 cursor-pointer group p-2 hover:bg-white/5 rounded-xl transition-all",children:[t.jsx("img",{src:nt(r.owner),className:"w-10 h-10 rounded-full border-2 border-purple-500/30"}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-pixel text-[9px] opacity-50 uppercase",children:"Ð˜Ñ‰ÐµÑ‚ Ð°Ð³ÐµÐ½Ñ‚"}),t.jsxs("div",{className:"font-bold font-pixel text-xs group-hover:text-purple-400 transition-colors",children:["@",r.owner]})]})]})}),!x&&t.jsxs("div",{className:"text-center pt-4 space-y-3",children:[t.jsx("p",{className:"text-[10px] opacity-40 font-mono",children:"Ð•ÑÑ‚ÑŒ ÑÑ‚Ð¾Ñ‚ Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚?"}),t.jsxs("button",{onClick:()=>u(!0),className:"w-full px-6 py-4 bg-green-600 text-white font-pixel text-xs font-bold rounded-xl hover:bg-green-500 transition-transform shadow-lg shadow-green-900/20 flex items-center justify-center gap-2 uppercase tracking-widest",children:[t.jsx(le,{size:16})," Ð•ÑÑ‚ÑŒ Ñƒ Ð¼ÐµÐ½Ñ! ÐŸÑ€ÐµÐ´Ð»Ð¾Ð¶Ð¸Ñ‚ÑŒ"]}),t.jsx("button",{onClick:()=>n(r.owner),className:"text-[10px] font-bold text-purple-400 hover:underline uppercase",children:"ÐÐ°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ"})]})]})})]})},Ht=({type:e,username:s,currentUserUsername:r,theme:a,onBack:i,onUserClick:n})=>{const o=tt().users,c=o.find(e=>e.username===s);if(!c)return t.jsxs("div",{className:"p-8 text-center font-pixel",children:[t.jsxs("button",{onClick:i,className:"mb-4 flex items-center gap-2 mx-auto",children:[t.jsx(z,{size:16})," ÐÐÐ—ÐÐ”"]}),"ÐŸÐžÐ›Ð¬Ð—ÐžÐ’ÐÐ¢Ð•Ð›Ð¬ ÐÐ• ÐÐÐ™Ð”Ð•Ð"]});const d="followers"===e?c.followers||[]:c.following||[],x="followers"===e?"ÐŸÐžÐ”ÐŸÐ˜Ð¡Ð§Ð˜ÐšÐ˜":"ÐŸÐžÐ”ÐŸÐ˜Ð¡ÐšÐ˜",m="winamp"===a;return t.jsxs("div",{className:"max-w-2xl mx-auto animate-in fade-in pb-20 pt-4 px-4 "+(m?"font-mono text-gray-300":""),children:[t.jsxs("div",{className:"flex items-center gap-4 mb-6 border-b border-white/10 pb-4",children:[t.jsxs("button",{onClick:i,className:"opacity-70 hover:opacity-100 flex items-center gap-2 font-pixel text-xs "+(m?"text-[#00ff00]":""),children:[t.jsx(z,{size:16})," ÐÐÐ—ÐÐ”"]}),t.jsxs("h2",{className:"font-pixel text-lg font-bold "+(m?"text-[#00ff00]":""),children:[x," ",t.jsxs("span",{className:"text-green-500",children:["@",s]})]})]}),t.jsx("div",{className:"space-y-3",children:0===d.length?t.jsx("div",{className:"text-center opacity-50 py-12 font-mono text-xs border-2 border-dashed border-white/10 rounded-xl",children:"Ð¡ÐŸÐ˜Ð¡ÐžÐš ÐŸÐ£Ð¡Ð¢"}):d.map(e=>{const s=o.find(t=>t.username===e),i=s?.avatarUrl||nt(e),c=s?.tagline||"No status",d=(e=>{if(!r)return!1;const t=o.find(e=>e.username===r);return t?.following.includes(e)})(e),x=e===r;return t.jsxs("div",{onClick:()=>n(e),className:"flex items-center justify-between p-4 rounded-xl border transition-all cursor-pointer hover:bg-white/5 \n                                    "+(m?"bg-[#191919] border-[#505050] text-[#00ff00]":"dark"===a?"bg-dark-surface border-white/10 text-gray-200":"bg-white border-black/10 text-gray-800"),children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border border-white/20",children:t.jsx("img",{src:i,alt:e,className:"w-full h-full object-cover"})}),t.jsxs("div",{children:[t.jsxs("div",{className:"font-bold font-pixel text-xs "+(m?"text-[#00ff00]":""),children:["@",e]}),t.jsx("div",{className:"text-[10px] font-mono opacity-50 truncate max-w-[150px]",children:c})]})]}),!x&&r&&t.jsx("button",{onClick:t=>(async(e,t)=>{e.stopPropagation(),r&&await ct(r,t)})(t,e),className:"p-2 rounded-lg transition-all "+(d?"bg-transparent border border-white/20 opacity-50":"bg-green-500 text-black shadow-[0_0_10px_rgba(74,222,128,0.3)]"),children:d?t.jsx(ve,{size:16}):t.jsx(l,{size:16})})]},e)})})]})},Gt=({theme:s,exhibits:r,collections:a,users:i,onBack:l,onExhibitClick:n,onCollectionClick:o,onUserClick:c,onLike:d,currentUser:x})=>{const[m,p]=e.useState(""),[h,u]=e.useState("ARTIFACTS"),b=e.useMemo(()=>{if(!m)return[];const e=m.toLowerCase();return r.filter(t=>{if(t.isDraft)return!1;const s=t.title.toLowerCase().includes(e),r=t.description.toLowerCase().includes(e),a=t.category.toLowerCase().includes(e),i=t.owner.toLowerCase().includes(e),l=!!t.specs&&Object.values(t.specs).some(t=>t.toLowerCase().includes(e));return s||r||a||i||l})},[m,r]),f=e.useMemo(()=>{if(!m)return[];const e=m.toLowerCase();return a.filter(t=>t.title.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)||t.owner.toLowerCase().includes(e))},[m,a]),g=e.useMemo(()=>{if(!m)return[];const e=m.toLowerCase();return i.filter(t=>t.username.toLowerCase().includes(e)||t.tagline.toLowerCase().includes(e))},[m,i]),w="winamp"===s;return t.jsxs("div",{className:"max-w-4xl mx-auto animate-in fade-in pb-32",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-6 sticky top-20 z-30 pt-4 pb-4 border-b backdrop-blur-md "+(w?"bg-[#282828]/90 border-[#505050]":"bg-transparent border-white/10"),children:[t.jsx("button",{onClick:l,className:"p-2 rounded-full transition-colors "+(w?"hover:bg-[#505050]":"hover:bg-white/10"),children:t.jsx(z,{size:20,className:w?"text-[#00ff00]":""})}),t.jsxs("div",{className:"flex-1 flex items-center px-4 py-3 rounded-2xl border "+(w?"bg-black border-[#505050] text-[#00ff00]":"dark"===s?"bg-black/40 border-white/20":"bg-white border-black/10"),children:[t.jsx(j,{size:18,className:"opacity-50 mr-3"}),t.jsx("input",{autoFocus:!0,type:"text",value:m,onChange:e=>p(e.target.value),placeholder:"ÐŸÐžÐ˜Ð¡Ðš ÐŸÐž Ð‘ÐÐ—Ð• Ð”ÐÐÐÐ«Ð¥...",className:"bg-transparent border-none outline-none text-sm font-mono w-full "+(w?"text-[#00ff00] placeholder-[#00ff00]/50":"")})]})]}),t.jsxs("div",{className:"flex mb-8 border-b "+(w?"border-[#505050]":"border-gray-500/30"),children:[t.jsxs("button",{onClick:()=>u("ARTIFACTS"),className:"flex-1 pb-3 text-xs font-pixel flex justify-center items-center gap-2 "+("ARTIFACTS"===h?w?"text-[#00ff00] border-b-2 border-[#00ff00]":"text-green-500 border-b-2 border-green-500":"opacity-50"),children:[t.jsx(ue,{size:14})," ÐÐ Ð¢Ð•Ð¤ÐÐšÐ¢Ð«",m&&t.jsx("span",{className:"bg-white/10 px-1.5 rounded-full text-[9px]",children:b.length})]}),t.jsxs("button",{onClick:()=>u("COLLECTIONS"),className:"flex-1 pb-3 text-xs font-pixel flex justify-center items-center gap-2 "+("COLLECTIONS"===h?w?"text-[#00ff00] border-b-2 border-[#00ff00]":"text-green-500 border-b-2 border-green-500":"opacity-50"),children:[t.jsx(ye,{size:14})," ÐšÐžÐ›Ð›Ð•ÐšÐ¦Ð˜Ð˜",m&&t.jsx("span",{className:"bg-white/10 px-1.5 rounded-full text-[9px]",children:f.length})]}),t.jsxs("button",{onClick:()=>u("USERS"),className:"flex-1 pb-3 text-xs font-pixel flex justify-center items-center gap-2 "+("USERS"===h?w?"text-[#00ff00] border-b-2 border-[#00ff00]":"text-green-500 border-b-2 border-green-500":"opacity-50"),children:[t.jsx(oe,{size:14})," Ð›Ð®Ð”Ð˜",m&&t.jsx("span",{className:"bg-white/10 px-1.5 rounded-full text-[9px]",children:g.length})]})]}),t.jsxs("div",{className:"space-y-6",children:[!m&&t.jsx("div",{className:"text-center py-20 opacity-30 font-pixel text-xs uppercase tracking-widest",children:"Ð’Ð’Ð•Ð”Ð˜Ð¢Ð• Ð—ÐÐŸÐ ÐžÐ¡ Ð”Ð›Ð¯ ÐŸÐžÐ˜Ð¡ÐšÐ"}),m&&"ARTIFACTS"===h&&t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:0===b.length?t.jsx("div",{className:"col-span-full text-center opacity-50 py-10 font-mono text-xs",children:"ÐÐ¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾"}):b.map(e=>t.jsx(Nt,{item:e,theme:s,onClick:n,isLiked:e.likedBy?.includes(x?.username||""),onLike:t=>d(e.id,t),onAuthorClick:c},e.id))}),m&&"COLLECTIONS"===h&&t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:0===f.length?t.jsx("div",{className:"col-span-full text-center opacity-50 py-10 font-mono text-xs",children:"ÐÐ¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾"}):f.map(e=>t.jsx(vt,{col:e,theme:s,onClick:o,onShare:()=>{}},e.id))}),m&&"USERS"===h&&t.jsx("div",{className:"space-y-4",children:0===g.length?t.jsx("div",{className:"text-center opacity-50 py-10 font-mono text-xs",children:"ÐÐ¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾"}):g.map(e=>t.jsxs("div",{onClick:()=>c(e.username),className:"flex items-center gap-4 p-4 rounded-xl border cursor-pointer hover:bg-white/5 "+(w?"border-[#505050] bg-[#191919]":"dark"===s?"border-white/10 bg-dark-surface":"border-black/10 bg-white"),children:[t.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border border-white/20",children:t.jsx("img",{src:e.avatarUrl||nt(e.username),className:"w-full h-full object-cover"})}),t.jsxs("div",{children:[t.jsxs("div",{className:"font-bold font-pixel text-sm "+(w?"text-[#00ff00]":""),children:["@",e.username]}),t.jsx("div",{className:"text-[10px] font-mono opacity-60 "+(w?"text-[#00ff00]":""),children:e.tagline})]})]},e.username))})]})]})},$t=({ownerUsername:s,currentUser:r,wishlistItems:a,theme:i,onBack:l,onItemClick:n,onUserClick:o})=>{const[c,d]=e.useState(!1),x="winamp"===i;return t.jsxs("div",{className:"max-w-6xl mx-auto animate-in fade-in pb-32 pt-4 px-4 "+(x?"font-mono text-gray-300":""),children:[t.jsxs("div",{className:"flex items-center justify-between mb-8 pb-4 border-b border-white/10",children:[t.jsxs("button",{onClick:l,className:"flex items-center gap-2 font-pixel text-[10px] opacity-70 hover:opacity-100 uppercase tracking-widest "+(x?"text-[#00ff00]":""),children:[t.jsx(z,{size:14})," ÐÐÐ—ÐÐ”"]}),t.jsxs("button",{onClick:()=>{const e=window.location.href;navigator.clipboard.writeText(e),d(!0),setTimeout(()=>d(!1),2e3)},className:"flex items-center gap-2 font-pixel text-[10px] uppercase tracking-widest transition-all "+(c?"text-green-500":"opacity-70 hover:opacity-100"),children:[t.jsx(te,{size:14})," ",c?"Ð¡Ð¡Ð«Ð›ÐšÐ Ð¡ÐšÐžÐŸÐ˜Ð ÐžÐ’ÐÐÐ":"ÐŸÐžÐ”Ð•Ð›Ð˜Ð¢Ð¬Ð¡Ð¯"]})]}),t.jsxs("div",{className:"text-center mb-10",children:[t.jsxs("div",{className:"inline-block relative mb-4",children:[t.jsx("img",{src:nt(s),className:"w-20 h-20 rounded-full border-4 "+(x?"border-[#505050]":"border-purple-500/30")}),t.jsx("div",{className:"absolute -bottom-2 -right-2 bg-black text-white p-2 rounded-full border border-white/10",children:t.jsx(ke,{size:16,className:x?"text-[#00ff00]":"text-purple-400"})})]}),t.jsxs("h1",{className:"text-2xl md:text-4xl font-pixel font-black uppercase mb-2 "+(x?"text-[#00ff00]":""),children:["WISHLIST_@",s]}),t.jsx("p",{className:"font-mono text-xs opacity-50 uppercase tracking-widest",children:"Ð“Ð»Ð¾Ð±Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ñ€Ð¾Ð·Ñ‹ÑÐº Ð°Ñ€Ñ‚ÐµÑ„Ð°ÐºÑ‚Ð¾Ð²"})]}),0===a.length?t.jsxs("div",{className:"p-12 border-2 border-dashed rounded-xl flex flex-col items-center justify-center text-center opacity-50 "+(x?"border-[#505050]":"border-white/10"),children:[t.jsx(j,{size:48,className:"mb-4 opacity-50"}),t.jsx("p",{className:"font-mono text-sm uppercase",children:"Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð¶ÐµÐ»Ð°ÐµÐ¼Ð¾Ð³Ð¾ Ð¿ÑƒÑÑ‚"})]}):t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:a.map(e=>t.jsx(jt,{item:e,theme:i,onClick:n,onUserClick:o},e.id))})]})};function Yt(e,t="medium"){return e&&Array.isArray(e)&&0!==e.length?function(e,t="medium"){return e?"object"==typeof e&&e[t]?e[t]:"string"==typeof e?e:"https://placehold.co/600x400?text=NO+IMAGE":"https://placehold.co/600x400?text=NO+IMAGE"}(e[0],t):"https://placehold.co/600x400?text=NO+IMAGE"}const Wt=({viewMode:e})=>t.jsx("div",{className:`animate-pulse ${"GRID"===e?"aspect-[3/4]":"h-24"} bg-white/5 rounded-xl border border-white/5`}),Vt=({theme:s,user:r,stories:a,exhibits:i,wishlist:l,collections:n,feedMode:o,setFeedMode:c,feedViewMode:d,setFeedViewMode:x,feedType:m,setFeedType:p,selectedCategory:h,setSelectedCategory:u,onNavigate:b,onExhibitClick:f,onLike:g,onUserClick:w,onWishlistClick:N,onCollectionClick:v})=>{const y="winamp"===s,[k,C]=e.useState(null),[S,I]=e.useState(20),T=e.useRef(null);e.useEffect(()=>{C(null),I(20)},[h,m]);const L=e.useMemo(()=>i.filter(e=>e.owner!==r.username&&(!e.isDraft&&(("Ð’Ð¡Ð•"===h||e.category===h)&&((!k||e.subcategory===k)&&!("FOLLOWING"===m&&!r.following.includes(e.owner)))))).map(e=>({...e,_ts:new Date(e.timestamp).getTime()})).sort((e,t)=>t._ts!==e._ts?t._ts-e._ts:t.id.localeCompare(e.id)),[i,r.username,r.following,h,k,m]),A=e.useMemo(()=>l.filter(e=>e.owner!==r.username&&(("Ð’Ð¡Ð•"===h||e.category===h)&&!("FOLLOWING"===m&&!r.following.includes(e.owner)))).sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()),[l,r.username,h,m]),O=e.useMemo(()=>n.filter(e=>e.owner!==r.username&&!("FOLLOWING"===m&&!r.following.includes(e.owner))).sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()),[n,r.username,m]);e.useEffect(()=>{const e=new IntersectionObserver(e=>{e[0].isIntersecting&&I(e=>e+20)},{threshold:.1});return T.current&&e.observe(T.current),()=>e.disconnect()},[L.length,A.length,O.length]);const D=L.slice(0,S),z=A.slice(0,S),U=O.slice(0,S);return t.jsxs("div",{className:"pb-24 space-y-4 animate-in fade-in",children:[t.jsx("header",{className:"md:hidden flex justify-between items-center px-4 pt-4 bg-transparent",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-8 h-8 rounded flex items-center justify-center font-bold text-black font-pixel text-xs "+(y?"bg-[#292929] text-[#00ff00] border border-[#505050]":"bg-green-500"),children:"NA"}),t.jsx("h1",{className:"text-lg font-pixel font-bold tracking-tighter "+(y?"text-[#00ff00]":"text-current"),children:"NeoArchive"})]})}),"ARTIFACTS"===o&&a.length>0&&t.jsxs("div",{className:"pl-4 max-w-5xl mx-auto w-full pt-2",children:[t.jsxs("h3",{className:"font-pixel text-[10px] opacity-50 mb-3 flex items-center gap-2 tracking-widest",children:[t.jsx(E,{size:12,className:"text-yellow-500"})," ÐžÐ‘ÐÐžÐ’Ð›Ð•ÐÐ˜Ð¯"]}),t.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 scrollbar-hide pr-4",children:a.map((e,r)=>t.jsxs("div",{onClick:()=>e.latestItem&&f(e.latestItem),className:"flex flex-col items-center gap-2 cursor-pointer group min-w-[70px]",children:[t.jsx("div",{className:"relative p-[2px] rounded-full bg-gradient-to-tr from-green-500 to-blue-500",children:t.jsx("div",{className:"rounded-full p-[2px] "+("dark"===s?"bg-black":"bg-white"),children:t.jsx("img",{src:e.avatar,className:"w-14 h-14 rounded-full object-cover"})})}),t.jsxs("span",{className:"text-[10px] font-bold truncate max-w-[70px]",children:["@",e.username]})]},r))})]}),t.jsx("div",{className:"pt-2 pb-2 px-4 transition-all "+("dark"===s?"":y?"bg-[#191919] border-b border-[#505050]":""),children:t.jsxs("div",{className:"max-w-5xl mx-auto w-full space-y-4",children:[t.jsxs("div",{className:"flex gap-4",children:[t.jsxs("div",{className:"flex-1 flex p-1 rounded-xl border "+(y?"bg-[#292929] border-[#505050]":"dark"===s?"bg-white/5 border-white/5":"bg-black/5 border-black/5"),children:[t.jsxs("button",{onClick:()=>c("ARTIFACTS"),className:"flex-1 flex items-center justify-center gap-2 py-2 rounded-lg text-[10px] font-bold transition-all "+("ARTIFACTS"===o?y?"bg-[#00ff00] text-black":"bg-green-500 text-black shadow-lg":"opacity-50"),children:[t.jsx(Ce,{size:14})," Ð›Ð•ÐÐ¢Ð"]}),t.jsxs("button",{onClick:()=>c("COLLECTIONS"),className:"flex-1 flex items-center justify-center gap-2 py-2 rounded-lg text-[10px] font-bold transition-all "+("COLLECTIONS"===o?y?"bg-[#00ff00] text-black":"bg-blue-500 text-white shadow-lg":"opacity-50"),children:[t.jsx(Ee,{size:14})," ÐšÐžÐ›Ð›Ð•ÐšÐ¦Ð˜Ð˜"]}),t.jsxs("button",{onClick:()=>c("WISHLIST"),className:"flex-1 flex items-center justify-center gap-2 py-2 rounded-lg text-[10px] font-bold transition-all "+("WISHLIST"===o?y?"bg-[#00ff00] text-black":"bg-purple-500 text-white shadow-lg":"opacity-50"),children:[t.jsx(ke,{size:14})," Ð’Ð˜Ð¨Ð›Ð˜Ð¡Ð¢"]})]}),t.jsx("button",{onClick:()=>b("SEARCH"),className:"px-4 rounded-xl border flex items-center justify-center "+(y?"bg-black border-[#00ff00] text-[#00ff00]":"bg-white/5 border-white/10"),children:t.jsx(j,{size:20})})]}),t.jsxs("div",{className:"flex items-center justify-between gap-2 overflow-x-auto scrollbar-hide pb-2",children:[t.jsxs("div",{className:"flex p-1 rounded-xl shrink-0 "+(y?"border border-[#505050]":"dark"===s?"bg-white/5":"bg-black/5"),children:[t.jsx("button",{onClick:()=>p("FOR_YOU"),className:"px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all "+("FOR_YOU"===m?y?"bg-[#00ff00] text-black":"bg-green-500 text-black shadow":"opacity-50"),children:"Ð“Ð›ÐÐ’ÐÐÐ¯"}),t.jsx("button",{onClick:()=>p("FOLLOWING"),className:"px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all "+("FOLLOWING"===m?y?"bg-[#00ff00] text-black":"bg-green-500 text-black shadow":"opacity-50"),children:"ÐŸÐžÐ”ÐŸÐ˜Ð¡ÐšÐ˜"})]}),t.jsxs("div",{className:"flex gap-1 shrink-0 ml-auto",children:[t.jsx("button",{onClick:()=>x("GRID"),className:"p-2 rounded-lg "+("GRID"===d?"bg-white/10 text-green-500":"opacity-30"),children:t.jsx(Ce,{size:16})}),t.jsx("button",{onClick:()=>x("LIST"),className:"p-2 rounded-lg "+("LIST"===d?"bg-white/10 text-green-500":"opacity-30"),children:t.jsx(Se,{size:16})})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide",children:[t.jsx("button",{onClick:()=>u("Ð’Ð¡Ð•"),className:"px-4 py-1.5 rounded-full text-[10px] font-bold whitespace-nowrap border transition-all "+("Ð’Ð¡Ð•"===h?"bg-white text-black border-white":"border-current opacity-40 hover:opacity-100"),children:"Ð’Ð¡Ð•"}),Object.values(xt).map(e=>t.jsx("button",{onClick:()=>u(e),className:"px-4 py-1.5 rounded-full text-[10px] font-bold whitespace-nowrap border transition-all "+(h===e?y?"bg-[#00ff00] text-black border-[#00ff00]":"bg-green-500 text-black border-green-500":"border-white/10 opacity-60 hover:opacity-100"),children:e},e))]}),"Ð’Ð¡Ð•"!==h&&mt[h]&&t.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide animate-in slide-in-from-top-2",children:[t.jsxs("button",{onClick:()=>C(null),className:"px-3 py-1 rounded-lg text-[9px] font-bold whitespace-nowrap border transition-all "+(k?"border-transparent opacity-50":"bg-white/10 border-white"),children:["Ð’Ð¡Ð• ",h]}),mt[h].map(e=>t.jsx("button",{onClick:()=>C(e),className:"px-3 py-1 rounded-lg text-[9px] font-bold whitespace-nowrap border transition-all "+(k===e?"bg-white/10 border-white":"border-transparent opacity-50"),children:e},e))]})]})]})}),t.jsxs("div",{className:"px-4 max-w-5xl mx-auto w-full",children:["ARTIFACTS"===o?t.jsx(t.Fragment,{children:0===i.length?t.jsx("div",{className:"grid grid-cols-2 gap-4",children:[1,2,3,4].map(e=>t.jsx(Wt,{viewMode:d},e))}):0===L.length?t.jsxs("div",{className:"text-center py-20 opacity-50 font-mono text-xs border-2 border-dashed border-white/10 rounded-3xl",children:[t.jsx("div",{className:"mb-2 text-2xl",children:"ðŸœï¸"}),"Ð—Ð”Ð•Ð¡Ð¬ ÐŸÐžÐšÐ ÐŸÐ£Ð¡Ð¢Ðž",t.jsx("br",{}),"FOLLOWING"===m?"ÐŸÐ¾Ð´Ð¿Ð¸ÑˆÐ¸Ñ‚ÐµÑÑŒ Ð½Ð° Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ñ… Ð°Ð²Ñ‚Ð¾Ñ€Ð¾Ð²":"ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ ÑÐ±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹"]}):t.jsx("div",{className:"grid gap-4 "+("GRID"===d?"grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5":"grid-cols-1"),children:D.map(e=>"GRID"===d?t.jsx(Nt,{item:e,theme:s,onClick:f,isLiked:e.likedBy?.includes(r?.username||"")||!1,onLike:t=>g(e.id,t),onAuthorClick:w},e.id):t.jsxs("div",{onClick:()=>f(e),className:"flex gap-4 p-3 rounded-xl border cursor-pointer hover:bg-white/5 transition-all "+("dark"===s?"bg-white/5 border-white/10":"bg-white border-black/10"),children:[t.jsx("div",{className:"w-24 h-24 rounded-lg overflow-hidden flex-shrink-0 bg-black/20",children:t.jsx("img",{src:Yt(e.imageUrls,"thumbnail"),className:"w-full h-full object-cover"})}),t.jsxs("div",{className:"flex-1 flex flex-col justify-between",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-[9px] font-pixel opacity-50 uppercase",children:e.category}),t.jsxs("div",{className:"flex items-center gap-1 text-[10px] opacity-60",children:[t.jsx(R,{size:10})," ",e.likes]})]}),t.jsx("h3",{className:"font-bold font-pixel text-sm mt-1 line-clamp-1",children:e.title}),t.jsx("p",{className:"text-[10px] opacity-60 line-clamp-2 mt-1",children:e.description})]}),t.jsx("div",{className:"flex items-center gap-2 mt-2",children:t.jsxs("span",{className:"text-[10px] font-bold opacity-70",children:["@",e.owner]})})]})]},e.id))})}):"COLLECTIONS"===o?t.jsx(t.Fragment,{children:0===O.length?t.jsx("div",{className:"text-center py-20 opacity-30 font-mono text-xs border-2 border-dashed border-white/10 rounded-3xl",children:"ÐšÐžÐ›Ð›Ð•ÐšÐ¦Ð˜Ð™ ÐÐ•Ð¢"}):t.jsx("div",{className:"grid gap-4 "+("GRID"===d?"grid-cols-2 sm:grid-cols-3 md:grid-cols-4":"grid-cols-1"),children:U.map(e=>t.jsx(vt,{col:e,theme:s,onClick:v,onShare:()=>{}},e.id))})}):t.jsx(t.Fragment,{children:0===A.length?t.jsx("div",{className:"text-center py-20 opacity-30 font-mono text-xs border-2 border-dashed border-white/10 rounded-3xl",children:"Ð’Ð˜Ð¨Ð›Ð˜Ð¡Ð¢ ÐŸÐ£Ð¡Ð¢"}):t.jsx("div",{className:"grid gap-4 "+("GRID"===d?"grid-cols-2 sm:grid-cols-3 md:grid-cols-4":"grid-cols-1"),children:z.map(e=>t.jsx(jt,{item:e,theme:s,onClick:N,onUserClick:w},e.id))})}),t.jsx("div",{ref:T,className:"h-20 flex items-center justify-center opacity-30",children:S<("ARTIFACTS"===o?L.length:"COLLECTIONS"===o?O.length:A.length)&&t.jsxs("div",{className:"animate-pulse flex items-center gap-2 text-xs font-mono",children:[t.jsx(Ie,{size:16})," Ð—ÐÐ“Ð Ð£Ð—ÐšÐ Ð”ÐÐÐÐ«Ð¥..."]})})]})]})},qt=()=>{const[s,r]=e.useState([]);e.useEffect(()=>{const e=()=>{};return()=>e()},[]);const a=e=>{switch(e){case"LIKE":return t.jsx(R,{size:16,className:"text-red-500"});case"COMMENT":return t.jsx(C,{size:16,className:"text-blue-500"});case"FOLLOW":return t.jsx(l,{size:16,className:"text-green-500"});case"TRADE_OFFER":return t.jsx(f,{size:16,className:"text-yellow-500"});default:return t.jsx(de,{size:16,className:"text-white"})}};return t.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 w-full max-w-xs pointer-events-none",children:s.map(e=>t.jsxs("div",{className:"pointer-events-auto bg-black/90 border border-green-500/50 text-white p-3 rounded-xl shadow-2xl flex items-start gap-3 animate-in slide-in-from-right fade-in duration-300",children:[t.jsx("div",{className:"mt-1",children:a(e.type)}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"text-xs font-bold font-pixel mb-1 flex justify-between",children:[t.jsx("span",{children:"ÐÐžÐ’ÐžÐ• Ð¡ÐžÐ‘Ð«Ð¢Ð˜Ð•"}),t.jsx("button",{onClick:()=>{return t=e.id,void r(e=>e.filter(e=>e.id!==t));var t},className:"opacity-50 hover:opacity-100",children:t.jsx(V,{size:12})})]}),t.jsxs("div",{className:"text-xs font-mono",children:[t.jsxs("span",{className:"text-green-400 font-bold",children:["@",e.actor]}),t.jsxs("span",{className:"opacity-80",children:[" ","LIKE"===e.type?"Ð¾Ñ†ÐµÐ½Ð¸Ð» Ð²Ð°Ñˆ Ð¿Ð¾ÑÑ‚":"COMMENT"===e.type?"Ð¿Ñ€Ð¾ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð»":"Ð²Ð·Ð°Ð¸Ð¼Ð¾Ð´ÐµÐ¹ÑÑ‚Ð²ÑƒÐµÑ‚"]})]}),e.targetPreview&&t.jsxs("div",{className:"text-[10px] opacity-60 mt-1 truncate border-l-2 border-white/20 pl-2",children:['"',e.targetPreview,'"']})]})]},e.id))})},Kt=({theme:s,user:r,exhibits:a,allExhibits:i=[],collections:l,wishlist:n=[],onBack:o,onExhibitClick:c,onCollectionClick:d,onLike:x,onWishlistClick:m})=>{const[p,h]=e.useState("MY_ITEMS"),u=a.filter(e=>e.isDraft),b=a.filter(e=>!e.isDraft),f=i.filter(e=>e.likedBy?.includes(r.username)),g=n.filter(e=>e.owner===r.username),w="winamp"===s,N=(e,s)=>t.jsx("button",{onClick:()=>h(e),className:"px-3 py-1 text-[10px] font-bold font-pixel uppercase transition-all "+(p===e?w?"text-wa-gold border-b-2 border-wa-gold":"text-green-500 border-b-2 border-green-500":"opacity-50 hover:opacity-100 border-b-2 border-transparent"),children:w?`[ ${s} ]`:s});return t.jsxs("div",{className:"max-w-4xl mx-auto animate-in fade-in pb-32 "+(w?"font-mono text-gray-300":""),children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("button",{onClick:o,className:"flex items-center gap-2 hover:underline opacity-70 font-pixel text-xs "+(w?"text-[#00ff00]":""),children:[t.jsx(z,{size:16})," ÐÐÐ—ÐÐ”"]}),t.jsxs("div",{className:"font-pixel text-lg flex items-center gap-2 "+(w?"text-[#00ff00]":""),children:[t.jsx(B,{size:24}),"ÐœÐžÐ¯ ÐŸÐžÐ›ÐšÐ"]})]}),t.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2 mb-8 "+(w?"border-b border-[#505050]":"border-b border-white/10"),onTouchStart:e=>e.stopPropagation(),onTouchMove:e=>e.stopPropagation(),onTouchEnd:e=>e.stopPropagation(),children:[N("MY_ITEMS","ÐŸÐ Ð•Ð”ÐœÐ•Ð¢Ð«"),N("COLLECTIONS","ÐÐ›Ð¬Ð‘ÐžÐœÐ«"),N("WISHLIST","Ð’Ð˜Ð¨Ð›Ð˜Ð¡Ð¢"),N("FAVORITES","Ð˜Ð—Ð‘Ð ÐÐÐÐžÐ•"),N("DRAFTS","Ð§Ð•Ð ÐÐžÐ’Ð˜ÐšÐ˜")]}),"DRAFTS"===p&&t.jsxs("div",{className:"animate-in slide-in-from-right-4",children:[t.jsxs("h3",{className:"font-pixel text-xs mb-4 opacity-70 flex items-center gap-2 uppercase tracking-widest",children:[t.jsx(je,{size:14})," Ð§ÐµÑ€Ð½Ð¾Ð²Ð¸ÐºÐ¸ (",u.length,")"]}),0===u.length?t.jsx("div",{className:"text-center py-10 opacity-30 font-pixel text-xs",children:"ÐÐµÑ‚ Ñ‡ÐµÑ€Ð½Ð¾Ð²Ð¸ÐºÐ¾Ð²"}):t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:u.map(e=>t.jsxs("div",{className:"relative group opacity-80 hover:opacity-100",children:[t.jsx("div",{className:"absolute top-2 right-2 z-10 bg-yellow-500 text-black text-[8px] font-bold px-1.5 py-0.5 rounded font-pixel",children:"DRAFT"}),t.jsx(Nt,{item:e,theme:s,onClick:c,isLiked:!1,onLike:t=>x(e.id,t),onAuthorClick:()=>{}})]},e.id))})]}),"MY_ITEMS"===p&&t.jsxs("div",{className:"animate-in slide-in-from-right-4",children:[t.jsxs("h3",{className:"font-pixel text-xs mb-4 flex items-center gap-2 uppercase tracking-widest",children:[t.jsx(B,{size:16})," Ð’Ð°ÑˆÐ¸ Ð°Ñ€Ñ‚ÐµÑ„Ð°ÐºÑ‚Ñ‹ (",b.length,")"]}),0===b.length?t.jsx("div",{className:"p-12 border-2 border-dashed rounded-xl flex flex-col items-center justify-center text-center opacity-50 "+(w?"border-[#505050]":"dark"===s?"border-dark-dim":"border-light-dim"),children:t.jsx("p",{className:"font-mono text-sm uppercase",children:"Ð’Ð°ÑˆÐ° Ð¿Ð¾Ð»ÐºÐ° Ð¿ÑƒÑÑ‚Ð°"})}):t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:b.map(e=>t.jsx(Nt,{item:e,theme:s,onClick:c,isLiked:e.likedBy?.includes(r.username)||!1,onLike:t=>x(e.id,t),onAuthorClick:()=>{}},e.id))})]}),"WISHLIST"===p&&t.jsxs("div",{className:"animate-in slide-in-from-right-4",children:[t.jsxs("h3",{className:"font-pixel text-xs mb-4 flex items-center gap-2 uppercase tracking-widest",children:[t.jsx(j,{size:16})," Ð’Ð¸ÑˆÐ»Ð¸ÑÑ‚ (",g.length,")"]}),0===g.length?t.jsx("div",{className:"p-12 border-2 border-dashed rounded-xl flex flex-col items-center justify-center text-center opacity-50 "+(w?"border-[#505050]":"dark"===s?"border-dark-dim":"border-light-dim"),children:t.jsx("p",{className:"font-mono text-sm uppercase",children:"Ð’Ð¸ÑˆÐ»Ð¸ÑÑ‚ Ð¿ÑƒÑÑ‚"})}):t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:g.map(e=>t.jsx(jt,{item:e,theme:s,onClick:m,onUserClick:()=>{}},e.id))})]}),"FAVORITES"===p&&t.jsxs("div",{className:"animate-in slide-in-from-right-4",children:[t.jsxs("h3",{className:"font-pixel text-xs mb-4 flex items-center gap-2 uppercase tracking-widest",children:[t.jsx(R,{size:16,className:"text-red-500"})," Ð˜Ð·Ð±Ñ€Ð°Ð½Ð½Ñ‹Ðµ Ð°Ñ€Ñ‚ÐµÑ„Ð°ÐºÑ‚Ñ‹ (",f.length,")"]}),0===f.length?t.jsx("div",{className:"p-12 border-2 border-dashed rounded-xl flex flex-col items-center justify-center text-center opacity-50 "+(w?"border-[#505050]":"dark"===s?"border-dark-dim":"border-light-dim"),children:t.jsx("p",{className:"font-mono text-sm uppercase",children:"Ð’Ñ‹ ÐµÑ‰Ðµ Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ð»Ð°Ð¹ÐºÐ½ÑƒÐ»Ð¸"})}):t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:f.map(e=>t.jsx(Nt,{item:e,theme:s,onClick:c,isLiked:!0,onLike:t=>x(e.id,t),onAuthorClick:()=>{}},e.id))})]}),"COLLECTIONS"===p&&t.jsxs("div",{className:"animate-in slide-in-from-right-4",children:[t.jsxs("h3",{className:"font-pixel text-xs mb-4 flex items-center gap-2 uppercase tracking-widest",children:[t.jsx(ye,{size:16})," ÐšÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ð¸ (",l.length,")"]}),0===l.length?t.jsx("div",{className:"p-8 border-2 border-dashed rounded-xl flex flex-col items-center justify-center text-center opacity-50 "+(w?"border-[#505050]":"dark"===s?"border-dark-dim":"border-light-dim"),children:t.jsx("p",{className:"font-mono text-xs uppercase",children:"ÐÐµÑ‚ ÑÐ¾Ð·Ð´Ð°Ð½Ð½Ñ‹Ñ… ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ð¹"})}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(e=>t.jsx(vt,{col:e,theme:s,onClick:d,onShare:()=>{}},e.id))})]})]})};function Xt(){const[s,r]=e.useState("dark"),[a,i]=e.useState("AUTH"),[l,n]=e.useState(!0),[o,c]=e.useState(!0),[d,x]=e.useState(!1),[m,p]=e.useState(null),[h,u]=e.useState([]),[b,f]=e.useState([]),[g,w]=e.useState([]),[N,v]=e.useState([]),[y,k]=e.useState([]),[C,S]=e.useState([]),[I,T]=e.useState([]),[L,A]=e.useState(null),[O,R]=e.useState(null),[D,U]=e.useState(null),[_,M]=e.useState(""),[F,P]=e.useState(void 0),[B,H]=e.useState("Ð’Ð¡Ð•"),[G,$]=e.useState("ARTIFACTS"),[Y,W]=e.useState("GRID"),[V,q]=e.useState("FOR_YOU"),[K,X]=e.useState("followers"),[Z,J]=e.useState(null),[Q,ee]=e.useState(!1),[te,se]=e.useState(""),[re,ae]=e.useState(""),[ie,le]=e.useState("ONLINE"),[ne,oe]=e.useState(""),[ce,xe]=e.useState(""),[me,pe]=e.useState("ARTIFACTS"),[he,ue]=e.useState(""),be=e.useRef(null),fe=e.useMemo(()=>{if(!m)return[];const e=m.following||[],t=h.filter(t=>e.includes(t.owner)&&!t.isDraft).sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime());return Array.from(new Set(t.map(e=>e.owner))).slice(0,10).map(e=>({username:e,avatar:nt(e),latestItem:t.find(t=>t.owner===e)}))},[m,h]),ge=e.useCallback(async()=>{const e=window.location.pathname.split("/").filter(Boolean),t=e[0];if(t)if("community"===t)i("COMMUNITY_HUB");else if("activity"===t)i("ACTIVITY");else if("search"===t)i("SEARCH");else if("create"===t)i("CREATE_HUB");else if("my-collection"===t)i("MY_COLLECTION");else if("u"===t||"profile"===t){const t=e[1];t&&(M(t),"wishlist"===e[2]?i("USER_WISHLIST"):i("USER_PROFILE"))}else if("artifact"===t){const t=e[1];let r=tt().exhibits.find(e=>e.id===t);if(!r)try{r=await(async e=>{const t=Ge.exhibits.find(t=>t.id===e);if(t)return t;const s=await Ye(),r=await s.get("exhibits",e);if(r)return r;try{const t=await Ke(`/exhibits/${e}`);return t&&(await s.put("exhibits",t),Ge.exhibits.push(t)),t}catch{return null}})(t)}catch(s){}r?(A(r),i("EXHIBIT")):i("FEED")}else if("collection"===t){const t=e[1];let r=tt().collections.find(e=>e.id===t);if(!r)try{r=await(async e=>{const t=Ge.collections.find(t=>t.id===e);if(t)return t;const s=await Ye(),r=await s.get("collections",e);if(r)return r;try{const t=await Ke(`/collections/${e}`);return t&&(await s.put("collections",t),Ge.collections.push(t)),t}catch{return null}})(t)}catch(s){}r&&(R(r),i("COLLECTION_DETAIL"))}else i("FEED");else i("FEED")},[]);e.useEffect(()=>{const e=()=>ge();return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)},[ge]);const we=(e,t)=>{t?.username&&M(t.username),t?.item&&(A(t.item),P(t.highlightCommentId)),t?.collection&&R(t.collection),t?.wishlistItem&&U(t.wishlistItem),i(e);let s="/";"USER_PROFILE"===e?s=`/u/${t?.username||_}`:"USER_WISHLIST"===e?s=`/u/${t?.username||_}/wishlist`:"EXHIBIT"===e?s=`/artifact/${t?.item?.id||L?.id}`:"COLLECTION_DETAIL"===e?s=`/collection/${t?.collection?.id||O?.id}`:"COMMUNITY_HUB"===e?s="/community":"ACTIVITY"===e?s="/activity":"SEARCH"===e?s="/search":"CREATE_HUB"===e?s="/create":"MY_COLLECTION"===e&&(s="/my-collection"),window.history.pushState({view:e,params:t},"",s),window.scrollTo(0,0)},je=()=>{window.history.length>1?window.history.back():we("FEED")},Ne=e.useCallback(()=>{const e=tt();if(u(e.exhibits||[]),f(e.collections||[]),w(e.wishlist||[]),v(e.notifications||[]),k(e.messages||[]),S(e.guestbook||[]),T([...e.tradeRequests||[]]),x(!navigator.onLine),m){const t=e.users.find(e=>e.username===m.username);t&&p(t)}},[m]);e.useEffect(()=>{const e=(t=()=>{Ne()},We.push(t),()=>{const e=We.indexOf(t);e>-1&&We.splice(e,1)});var t;return()=>{e()}},[Ne]),e.useEffect(()=>{(async()=>{try{const e=await et();Ne(),e?(p(e),e.settings?.theme&&r(e.settings.theme),await ge()):i("AUTH")}catch(e){i("AUTH")}finally{n(!1),setTimeout(()=>c(!1),50)}})()},[]);const ke=async e=>{const t=`neo_viewed_${e.id}`,s=sessionStorage.getItem(t);let r=e;s||(r={...e,views:(e.views||0)+1},u(t=>t.map(t=>t.id===e.id?r:t)),sessionStorage.setItem(t,"true"),await st(r)),we("EXHIBIT",{item:r})},Se=async(e,t)=>{if(t?.stopPropagation(),!m)return;const s=h.find(t=>t.id===e);if(s){const t=s.likedBy?.includes(m.username),r={...s,likes:t?s.likes-1:s.likes+1,likedBy:t?s.likedBy.filter(e=>e!==m.username):[...s.likedBy||[],m.username]};u(t=>t.map(t=>t.id===e?r:t)),L?.id===e&&A(r),await st(r),t||s.owner===m.username||lt(s.owner,"LIKE",m.username,s.id,s.title)}},Ie=e.useCallback(async(e,t)=>{p(e),e.settings?.theme&&r(e.settings.theme),t||localStorage.removeItem("neo_active_user"),await ge()},[ge]),He=["FEED","COMMUNITY_HUB","CREATE_HUB","ACTIVITY"],$e=He.indexOf(a),qe=It({onSwipeLeft:()=>{$e>=0&&$e<He.length-1&&we(He[$e+1])},onSwipeRight:()=>{$e>0&&we(He[$e-1])}});if(l||o)return t.jsxs("div",{className:"fixed inset-0 bg-black flex flex-col items-center justify-center z-50",children:[t.jsx(Fe,{theme:"dark"}),t.jsx(Rt,{size:"lg",text:"INITIALIZING SYSTEM"})]});if("AUTH"===a)return t.jsxs("div",{className:"min-h-screen bg-dark-bg text-white relative overflow-hidden",children:[t.jsx(yt,{title:"NeoArchive: Ð’Ñ…Ð¾Ð´"}),t.jsx(Fe,{theme:"dark"}),t.jsx(Pe,{}),t.jsx("div",{className:"relative z-10",children:t.jsx(dt,{theme:"dark",onLogin:Ie})})]});const Je=e=>{if("winamp"===s)switch(e){case"FEED":return t.jsx(ze,{size:24});case"COMMUNITY_HUB":return t.jsx(De,{size:24});case"CREATE_HUB":return t.jsx(E,{size:24});case"ACTIVITY":return t.jsx(Re,{size:24});default:return null}if("xp"===s)switch(e){case"FEED":return t.jsx(Me,{size:24});case"COMMUNITY_HUB":return t.jsx(Le,{size:24});case"CREATE_HUB":return t.jsx(_e,{size:24});case"ACTIVITY":return t.jsx(Ue,{size:24});default:return null}switch(e){case"FEED":return t.jsx(Ce,{size:24});case"COMMUNITY_HUB":return t.jsx(Le,{size:24});case"CREATE_HUB":return t.jsx(Oe,{size:24});case"ACTIVITY":return t.jsx(de,{size:24});default:return null}};return t.jsxs("div",{className:`min-h-screen transition-colors duration-300 pb-safe ${(()=>{switch(s){case"xp":return"bg-[#ECE9D8] text-black font-sans";case"winamp":return"bg-[#191919] font-winamp text-gray-300";case"light":return"bg-light-bg text-gray-900";default:return"bg-dark-bg text-gray-100"}})()}`,...qe,children:[t.jsx(yt,{title:"NeoArchive"}),t.jsx(Fe,{theme:"dark"===s?"dark":"light"}),"dark"===s&&t.jsx(Pe,{}),t.jsx(qt,{}),d&&t.jsxs("div",{className:"fixed top-16 md:top-20 left-0 right-0 z-40 bg-yellow-500/90 text-black text-center py-1 px-4 text-xs font-bold font-mono flex justify-center items-center gap-2",children:[t.jsx(Te,{size:14})," OFFLINE MODE / SYNCHRONIZING..."]}),m&&t.jsxs(t.Fragment,{children:[t.jsxs("nav",{className:`hidden md:flex fixed top-0 left-0 w-full z-50 px-6 h-16 items-center justify-between backdrop-blur-md transition-all duration-300 ${(()=>{switch(s){case"xp":return"bg-gradient-to-b from-[#245DDA] to-[#245DDA] border-b-2 border-[#003C74] text-white";case"winamp":return"bg-[#292929] border-b border-[#505050] text-[#00ff00] font-winamp";case"light":return"bg-white/90 backdrop-blur-md border-b border-gray-200 text-gray-900";default:return"bg-black/80 backdrop-blur-md border-b border-white/10 text-white"}})()}`,children:[t.jsxs("div",{className:"flex items-center gap-3 cursor-pointer group",onClick:()=>we("FEED"),children:[t.jsx("div",{className:"w-8 h-8 flex items-center justify-center font-bold text-xs rounded border transition-colors "+("winamp"===s?"border-[#505050] bg-[#191919] text-[#00ff00]":"bg-green-500 border-green-500 text-black"),children:"NA"}),t.jsx("span",{className:"font-pixel font-bold text-lg tracking-[0.2em] group-hover:opacity-80 transition-opacity "+("winamp"===s?"text-[#00ff00]":"text-white"),children:"NEO_ARCHIVE"})]}),t.jsxs("div",{className:"flex items-center gap-8",children:[t.jsxs("button",{onClick:()=>we("FEED"),className:"flex items-center gap-2 font-pixel text-xs font-bold transition-all hover:scale-105 "+("FEED"===a?"text-green-500":"opacity-60 hover:opacity-100"),children:[t.jsx(Ce,{size:18})," Ð›Ð•ÐÐ¢Ð"]}),t.jsxs("button",{onClick:()=>we("COMMUNITY_HUB"),className:"flex items-center gap-2 font-pixel text-xs font-bold transition-all hover:scale-105 "+("COMMUNITY_HUB"===a?"text-green-500":"opacity-60 hover:opacity-100"),children:[t.jsx(Le,{size:18})," Ð¡Ð•Ð¢Ð¬"]}),t.jsxs("button",{onClick:()=>we("CREATE_HUB"),className:"flex items-center gap-2 font-pixel text-xs font-bold transition-all hover:scale-105 "+("CREATE_HUB"===a?"text-green-500":"opacity-60 hover:opacity-100"),children:[t.jsx(Ae,{size:18})," Ð¡ÐžÐ—Ð”ÐÐ¢Ð¬"]}),t.jsxs("button",{onClick:()=>we("ACTIVITY"),className:"flex items-center gap-2 font-pixel text-xs font-bold transition-all hover:scale-105 relative "+("ACTIVITY"===a?"text-green-500":"opacity-60 hover:opacity-100"),children:[t.jsx(de,{size:18})," ÐÐšÐ¢Ð˜Ð’ÐÐžÐ¡Ð¢Ð¬",N.some(e=>e.recipient===m.username&&!e.isRead)&&t.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full animate-pulse shadow-[0_0_5px_red]"})]})]}),t.jsxs("div",{className:"flex items-center gap-6",children:[t.jsx("button",{onClick:()=>we("SEARCH"),className:"opacity-60 hover:opacity-100 transition-opacity",children:t.jsx(j,{size:20})}),t.jsx("div",{className:"h-6 w-[1px] bg-white/10"}),t.jsxs("div",{onClick:()=>we("USER_PROFILE",{username:m.username}),className:"flex items-center gap-3 cursor-pointer group",children:[t.jsxs("div",{className:"text-right hidden lg:block",children:[t.jsxs("div",{className:"font-pixel text-xs font-bold "+("winamp"===s?"text-[#00ff00]":"text-white"),children:["@",m.username]}),t.jsx("div",{className:"text-[9px] font-mono opacity-50 uppercase",children:m.tagline||"USER"})]}),t.jsx("img",{src:m.avatarUrl,className:"w-9 h-9 rounded-full border-2 transition-all "+("winamp"===s?"border-[#505050]":"border-white/20 group-hover:border-green-500")})]})]})]}),t.jsx("nav",{className:`md:hidden fixed bottom-0 left-0 w-full z-50 pb-safe ${(()=>{switch(s){case"xp":return"bg-[#ECE9D8] border-t-2 border-[#003C74] text-black shadow-[0_-2px_5px_rgba(0,0,0,0.1)]";case"winamp":return"bg-[#292929] border-t border-[#505050] text-[#00ff00]";case"light":return"bg-white/90 backdrop-blur-md border-t border-gray-200 text-gray-900";default:return"bg-black/90 backdrop-blur-md border-t border-white/10 text-white"}})()}`,children:t.jsxs("div",{className:"flex justify-around items-center h-16",children:[t.jsx("button",{onClick:()=>we("FEED"),className:"flex flex-col items-center gap-1 p-2 "+("FEED"===a?"opacity-100":"opacity-50"),children:Je("FEED")}),t.jsx("button",{onClick:()=>we("COMMUNITY_HUB"),className:"flex flex-col items-center gap-1 p-2 "+("COMMUNITY_HUB"===a?"opacity-100":"opacity-50"),children:Je("COMMUNITY_HUB")}),t.jsx("button",{onClick:()=>we("CREATE_HUB"),className:"flex flex-col items-center gap-1 p-2 "+("CREATE_HUB"===a?"opacity-100 scale-110":"opacity-50"),children:t.jsx(Ae,{size:28})}),t.jsxs("button",{onClick:()=>we("ACTIVITY"),className:"flex flex-col items-center gap-1 p-2 relative "+("ACTIVITY"===a?"opacity-100":"opacity-50"),children:[Je("ACTIVITY"),N.some(e=>e.recipient===m.username&&!e.isRead)&&t.jsx("div",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full animate-pulse"})]}),t.jsx("button",{onClick:()=>we("USER_PROFILE",{username:m.username}),className:"flex flex-col items-center gap-1 p-2 "+("USER_PROFILE"===a&&_===m.username?"opacity-100":"opacity-50"),children:t.jsx(ve,{size:24})})]})})]}),t.jsxs("div",{className:"md:pt-16",children:["FEED"===a&&m&&t.jsx(Vt,{theme:s,user:m,stories:fe,exhibits:h,wishlist:g,collections:b,feedMode:G,setFeedMode:$,feedViewMode:Y,setFeedViewMode:W,feedType:V,setFeedType:q,selectedCategory:B,setSelectedCategory:H,onNavigate:(e,t)=>we(e,t),onExhibitClick:ke,onLike:Se,onUserClick:e=>we("USER_PROFILE",{username:e}),onWishlistClick:e=>{U(e),i("WISHLIST_DETAIL")},onCollectionClick:e=>we("COLLECTION_DETAIL",{collection:e})}),"ACTIVITY"===a&&m&&t.jsx("div",{className:"p-4 pb-24",children:t.jsx(Dt,{notifications:N,messages:y,currentUser:m,theme:s,onAuthorClick:e=>we("USER_PROFILE",{username:e}),onExhibitClick:(e,t)=>{const s=h.find(t=>t.id===e);s&&we("EXHIBIT",{item:s,highlightCommentId:t})},onChatClick:e=>we("DIRECT_CHAT",{username:e})})}),"MY_COLLECTION"===a&&m&&t.jsx(Kt,{theme:s,user:m,exhibits:h.filter(e=>e.owner===m.username),allExhibits:h,collections:b.filter(e=>e.owner===m.username),wishlist:g,onBack:()=>we("FEED"),onExhibitClick:e=>{e.isDraft?we("CREATE_ARTIFACT",{initialData:e}):ke(e)},onCollectionClick:e=>we("COLLECTION_DETAIL",{collection:e}),onLike:Se,onWishlistClick:e=>{U(e),i("WISHLIST_DETAIL")}}),"EXHIBIT"===a&&L&&t.jsx(Lt,{exhibit:L,theme:s,onBack:je,onShare:()=>{},onFavorite:()=>{},onLike:e=>Se(e),isFavorited:!1,isLiked:L.likedBy?.includes(m?.username||"")||!1,onPostComment:async(e,t,s)=>{if(!m)return;const r={id:crypto.randomUUID(),parentId:s,author:m.username,text:t,timestamp:(new Date).toLocaleString(),likes:0,likedBy:[]},a={...L,comments:[...L.comments||[],r]};A(a),await st(a),L.owner!==m.username&&lt(L.owner,"COMMENT",m.username,L.id,L.title)},onCommentLike:async e=>{if(!m)return;const t=L.comments.map(t=>{if(t.id===e){const e=t.likedBy?.includes(m.username);return e||t.author===m.username||lt(t.author,"LIKE_COMMENT",m.username,L.id,t.text.slice(0,30)),{...t,likes:e?t.likes-1:t.likes+1,likedBy:e?t.likedBy.filter(e=>e!==m.username):[...t.likedBy||[],m.username]}}return t}),s={...L,comments:t};A(s),await st(s)},onDeleteComment:async(e,t)=>{const s=L.comments.filter(e=>e.id!==t),r={...L,comments:s};A(r),await st(r)},onAuthorClick:e=>we("USER_PROFILE",{username:e}),onFollow:e=>{m&&(ct(m.username,e),m.following.includes(e)||lt(e,"FOLLOW",m.username))},onMessage:e=>{we("DIRECT_CHAT",{username:e})},onDelete:async e=>{await(async e=>{Ge.exhibits=Ge.exhibits.filter(t=>t.id!==e),Ve();const t=await Ye();await t.delete("exhibits",e),await Ke(`/exhibits/${e}`,"DELETE")})(e),je()},onEdit:e=>we("CREATE_ARTIFACT",{initialData:e}),onAddToCollection:()=>J(L.id),onExhibitClick:ke,isFollowing:m?.following?.includes(L.owner)||!1,currentUser:m?.username||"",currentUserProfile:m,isAdmin:m?.isAdmin||!1,users:tt().users,allExhibits:h,highlightCommentId:F}),"COLLECTION_DETAIL"===a&&O&&t.jsx("div",{className:"max-w-4xl mx-auto p-4 pb-24",children:t.jsx(Ut,{collection:O,artifacts:h.filter(e=>O.exhibitIds.includes(e.id)),theme:s,onBack:je,onExhibitClick:ke,onAuthorClick:e=>we("USER_PROFILE",{username:e}),currentUser:m?.username||"",onDelete:async e=>{await at(e),je()},onLike:async e=>{}})}),"WISHLIST_DETAIL"===a&&D&&m&&t.jsx(Bt,{item:D,theme:s,onBack:je,currentUser:m.username,onAuthorClick:e=>we("USER_PROFILE",{username:e}),onDelete:async e=>{await(async e=>{Ge.wishlist=Ge.wishlist.filter(t=>t.id!==e),Ve(),await Ze(e),await Ke(`/wishlist/${e}`,"DELETE")})(e),je()},userInventory:h.filter(e=>e.owner===m.username)}),"USER_WISHLIST"===a&&t.jsx($t,{ownerUsername:_,currentUser:m,wishlistItems:g.filter(e=>e.owner===_),theme:s,onBack:je,onItemClick:e=>{U(e),i("WISHLIST_DETAIL")},onUserClick:e=>we("USER_PROFILE",{username:e})}),"SOCIAL_LIST"===a&&t.jsx(Ht,{type:K,username:_,currentUserUsername:m?.username,theme:s,onBack:je,onUserClick:e=>we("USER_PROFILE",{username:e})}),"SEARCH"===a&&t.jsx("div",{className:"p-4 pb-24",children:t.jsx(Gt,{theme:s,exhibits:h,collections:b,users:tt().users,onBack:je,onExhibitClick:ke,onCollectionClick:e=>{R(e),i("COLLECTION_DETAIL")},onUserClick:e=>we("USER_PROFILE",{username:e}),onLike:Se,currentUser:m})}),"COMMUNITY_HUB"===a&&t.jsx("div",{className:"p-4 pb-24",children:t.jsx(Ot,{theme:s,users:tt().users,exhibits:h,onExhibitClick:ke,onUserClick:e=>we("USER_PROFILE",{username:e}),onBack:()=>we("FEED"),currentUser:m})}),"DIRECT_CHAT"===a&&m&&t.jsx(_t,{theme:s,currentUser:m,partnerUsername:_,messages:y.filter(e=>e.sender.toLowerCase()===m.username.toLowerCase()&&e.receiver.toLowerCase()===_.toLowerCase()||e.sender.toLowerCase()===_.toLowerCase()&&e.receiver.toLowerCase()===m.username.toLowerCase()),onBack:je,onSendMessage:async e=>{const t={id:crypto.randomUUID(),sender:m.username,receiver:_,text:e,timestamp:(new Date).toLocaleString(),isRead:!1};await(async e=>{Ge.messages.push(e),Ve();const t=await Ye();await t.put("messages",e),await Ke("/messages","POST",e)})(t)}}),"CREATE_HUB"===a&&t.jsxs("div",{className:"p-6 pb-24 animate-in slide-in-from-bottom-10",children:[t.jsxs("div",{className:"flex items-center justify-between mb-8",children:[t.jsxs("button",{onClick:je,className:"flex items-center gap-2 opacity-50 hover:opacity-100",children:[t.jsx(z,{size:16})," ÐÐÐ—ÐÐ”"]}),t.jsx("h2",{className:"font-pixel text-lg",children:"Ð¡ÐžÐ—Ð”ÐÐ¢Ð¬"})]}),t.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[t.jsxs("button",{onClick:()=>we("CREATE_ARTIFACT"),className:"p-6 border border-green-500/30 rounded-2xl flex items-center gap-4 hover:bg-green-500/10 transition-all",children:[t.jsx("div",{className:"w-12 h-12 bg-green-500/20 rounded-full flex items-center justify-center text-green-500",children:t.jsx(Oe,{size:24})}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-pixel text-sm font-bold",children:"ÐÐžÐ’Ð«Ð™ ÐÐ Ð¢Ð•Ð¤ÐÐšÐ¢"}),t.jsx("div",{className:"text-xs opacity-50",children:"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚ Ð² ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸ÑŽ"})]})]}),t.jsxs("button",{onClick:()=>we("CREATE_COLLECTION"),className:"p-6 border border-blue-500/30 rounded-2xl flex items-center gap-4 hover:bg-blue-500/10 transition-all",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-full flex items-center justify-center text-blue-500",children:t.jsx(ye,{size:24})}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-pixel text-sm font-bold",children:"ÐÐžÐ’ÐÐ¯ ÐšÐžÐ›Ð›Ð•ÐšÐ¦Ð˜Ð¯"}),t.jsx("div",{className:"text-xs opacity-50",children:"ÐžÐ±ÑŠÐµÐ´Ð¸Ð½Ð¸Ñ‚ÑŒ Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚Ñ‹ Ð² Ð°Ð»ÑŒÐ±Ð¾Ð¼"})]})]}),t.jsxs("button",{onClick:()=>we("CREATE_WISHLIST"),className:"p-6 border border-purple-500/30 rounded-2xl flex items-center gap-4 hover:bg-purple-500/10 transition-all",children:[t.jsx("div",{className:"w-12 h-12 bg-purple-500/20 rounded-full flex items-center justify-center text-purple-500",children:t.jsx(j,{size:24})}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-pixel text-sm font-bold",children:"Ð’ ÐŸÐžÐ˜Ð¡ÐšÐ• (WISHLIST)"}),t.jsx("div",{className:"text-xs opacity-50",children:"ÐžÐ±ÑŠÑÐ²Ð¸Ñ‚ÑŒ Ñ€Ð¾Ð·Ñ‹ÑÐº Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚Ð°"})]})]})]})]}),"CREATE_ARTIFACT"===a&&t.jsx("div",{className:"p-4 pb-24",children:t.jsx(Mt,{theme:s,onBack:je,onSave:async e=>{if(!m)return;const t={...e,id:e.id||crypto.randomUUID(),owner:m.username,timestamp:(new Date).toLocaleString(),likes:0,views:0};e.id?await st(t):await(async e=>{Ge.exhibits.unshift(e),Ve();const t=await Ye();await t.put("exhibits",e),await Ke("/exhibits","POST",e)})(t),je()},initialData:L,userArtifacts:h.filter(e=>e.owner===m?.username)})}),"CREATE_COLLECTION"===a&&t.jsx("div",{className:"p-4 pb-24",children:t.jsx(Ft,{theme:s,userArtifacts:h.filter(e=>e.owner===m?.username&&!e.isDraft),onBack:je,onSave:async e=>{if(!m)return;const t={...e,id:e.id||crypto.randomUUID(),owner:m.username,timestamp:(new Date).toLocaleString()};e.id?await rt(t):await(async e=>{Ge.collections.push(e),Ve();const t=await Ye();await t.put("collections",e),await Ke("/collections","POST",e)})(t),je()},initialData:O,onDelete:async e=>{await at(e),je()}})}),"CREATE_WISHLIST"===a&&t.jsx("div",{className:"p-4 pb-24",children:t.jsx(Pt,{theme:s,onBack:je,onSave:async e=>{if(!m)return;const t={...e,owner:m.username};await(async e=>{Ge.wishlist.push(e),Ve(),await Xe("wishlist",e),await Ke("/wishlist","POST",e)})(t),je()}})}),Z&&m&&t.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-end sm:items-center justify-center p-4",children:t.jsxs("div",{className:"w-full max-w-sm rounded-xl p-6 "+("winamp"===s?"bg-[#292929] border border-[#505050] text-gray-300":"bg-dark-surface border border-white/10 text-white"),children:[t.jsx("h3",{className:"font-pixel text-sm mb-4",children:"Ð”ÐžÐ‘ÐÐ’Ð˜Ð¢Ð¬ Ð’ ÐšÐžÐ›Ð›Ð•ÐšÐ¦Ð˜Ð®"}),t.jsxs("div",{className:"space-y-2 mb-4 max-h-60 overflow-y-auto",children:[b.filter(e=>e.owner===m.username).map(e=>t.jsxs("button",{onClick:async()=>{if(e.exhibitIds.includes(Z))return;const t={...e,exhibitIds:[...e.exhibitIds,Z]};await rt(t);const s=h.find(e=>e.id===Z);s&&s.owner!==m.username&&lt(s.owner,"LIKE",m.username,s.id,s.title+" (Saved)"),J(null),alert("Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¾!")},className:"w-full p-3 text-left border border-white/10 rounded hover:bg-white/5 flex items-center gap-2",children:[t.jsx(Ee,{size:16})," ",e.title]},e.id)),0===b.filter(e=>e.owner===m.username).length&&t.jsx("div",{className:"opacity-50 text-xs",children:"ÐÐµÑ‚ ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ð¹"})]}),t.jsx("button",{onClick:()=>J(null),className:"w-full py-3 bg-white/10 rounded font-bold text-xs",children:"ÐžÐ¢ÐœÐ•ÐÐ"})]})}),"USER_PROFILE"===a&&m&&t.jsx(Et,{user:m,viewedProfileUsername:_,exhibits:h,collections:b,guestbook:C,theme:s,onBack:je,onLogout:()=>{(async()=>{const e=await Ye();await e.delete("system",Be),window.location.reload()})(),i("AUTH")},onFollow:e=>{m&&(ct(m.username,e),m.following.includes(e)||lt(e,"FOLLOW",m.username))},onChat:e=>we("DIRECT_CHAT",{username:e}),onExhibitClick:ke,onLike:Se,onAuthorClick:e=>we("USER_PROFILE",{username:e}),onCollectionClick:e=>{R(e),i("COLLECTION_DETAIL")},onShareCollection:()=>{},onViewHallOfFame:()=>i("HALL_OF_FAME"),onGuestbookPost:async e=>{if(!m)return;const t={id:crypto.randomUUID(),author:m.username,targetUser:_,text:e,timestamp:(new Date).toLocaleString(),isRead:!1};await(async e=>{Ge.guestbook.push(e),Ve(),await Xe("guestbook",e),await Ke("/guestbook","POST",e)})(t),_!==m.username&&lt(_,"GUESTBOOK",m.username)},refreshData:Ne,isEditingProfile:Q,setIsEditingProfile:ee,editTagline:te,setEditTagline:se,editBio:re,setEditBio:ae,editStatus:ie,setEditStatus:le,editTelegram:ne,setEditTelegram:oe,editPassword:ce,setEditPassword:xe,onSaveProfile:async()=>{if(!m)return;const e={...m,tagline:te,bio:re,status:ie,telegram:ne};ce&&(e.password=ce),await it(e),ee(!1),xe("")},onProfileImageUpload:async e=>{if(e.target.files?.[0]&&m){const t=await ot(e.target.files[0]);await it({...m,avatarUrl:t})}},onProfileCoverUpload:async e=>{if(e.target.files?.[0]&&m){const t=await ot(e.target.files[0]);await it({...m,coverUrl:t})}},guestbookInput:he,setGuestbookInput:ue,guestbookInputRef:be,profileTab:me,setProfileTab:pe,onOpenSocialList:(e,t)=>{M(e),X(t),i("SOCIAL_LIST")},onThemeChange:e=>r(e),onWishlistClick:e=>{U(e),i("WISHLIST_DETAIL")}}),"HALL_OF_FAME"===a&&m&&t.jsx(zt,{theme:s,achievements:m.achievements,onBack:je})]})]})}class Zt extends s.Component{state={hasError:!1,error:null,errorInfo:null};static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ðŸ”´ [ErrorBoundary] Uncaught error:",e,t),this.setState({errorInfo:t})}render(){return this.state.hasError?t.jsxs("div",{className:"fixed inset-0 z-[10000] p-4 md:p-10 bg-black text-green-500 font-mono h-screen overflow-auto",children:[t.jsx("h1",{className:"text-2xl font-bold mb-4 border-b border-green-500 pb-2 animate-pulse",children:"SYSTEM FAILURE [FATAL ERROR]"}),t.jsx("p",{className:"mb-4 text-sm opacity-80",children:"ÐŸÑ€Ð¾Ð¸Ð·Ð¾ÑˆÐµÐ» ÑÐ±Ð¾Ð¹ Ð²Ð¸Ð·ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸. Ð”Ð°Ð½Ð½Ñ‹Ðµ Ð´Ð»Ñ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ¸:"}),t.jsxs("pre",{className:"text-xs bg-green-900/20 p-4 border border-green-500/50 rounded overflow-auto mb-4 whitespace-pre-wrap break-all",children:[this.state.error&&this.state.error.toString(),t.jsx("br",{}),this.state.errorInfo?.componentStack]}),t.jsx("button",{onClick:()=>window.location.reload(),className:"border border-green-500 px-4 py-2 hover:bg-green-500 hover:text-black transition-colors uppercase text-sm font-bold",children:"ÐŸÐ•Ð Ð•Ð—ÐÐ“Ð Ð£Ð—ÐšÐ / REBOOT"})]}):this.props.children}}const Jt=document.getElementById("root");if(!Jt)throw new Error("Could not find root element to mount to");console.log("ðŸš€ [System] Starting application mount...");r.createRoot(Jt).render(t.jsx(s.StrictMode,{children:t.jsx(Zt,{children:t.jsx(Xt,{})})}));
