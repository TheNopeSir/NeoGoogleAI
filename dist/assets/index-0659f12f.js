import{r as e,j as t,R as s,c as r}from"./vendor-react-0e43bb6b.js";import{o as a}from"./vendor-idb-22bc75a1.js";import{T as i,U as l,S as n,a as o,L as c,E as d,b as x,C as m,c as p,A as h,M as u,W as b,R as g,D as f,G as w,d as j,e as N,f as v,g as y,h as k,i as C,Z as E,j as S,k as I,l as T,F as O,m as A,n as L,o as R,H as D,I as z,p as U,q as _,r as M,s as F,K as P,P as B,t as G,u as H,v as $,w as Y,x as V,y as W,z as K,X as q,B as X,J as Z,N as J,O as Q,Q as ee,V as te,Y as se,_ as re,$ as ae,a0 as ie,a1 as le,a2 as ne,a3 as oe,a4 as ce,a5 as de,a6 as xe,a7 as me,a8 as pe,a9 as he,aa as ue,ab as be,ac as ge,ad as fe,ae as we,af as je,ag as Ne,ah as ve,ai as ye,aj as ke,ak as Ce,al as Ee,am as Se,an as Ie,ao as Te,ap as Oe,aq as Ae,ar as Le,as as Re,at as De,au as ze,av as Ue,aw as _e,ax as Me,ay as Fe,az as Pe,aA as Be,aB as Ge,aC as He,aD as $e,aE as Ye,aF as Ve,aG as We,aH as Ke}from"./vendor-icons-1ffe362c.js";import"./vendor-88abe87b.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const qe=({theme:s})=>{const r=e.useRef(null);return e.useEffect(()=>{if("light"===s){const e=r.current;if(e){const t=e.getContext("2d");t&&t.clearRect(0,0,e.width,e.height)}return}const e=r.current;if(!e)return;const t=e.getContext("2d");if(!t)return;let a=e.width=window.innerWidth,i=e.height=window.innerHeight;const l=Math.floor(a/20),n=new Array(l).fill(1),o="„Ç¢„Ç°„Ç´„Çµ„Çø„Éä„Éè„Éû„É§„É£„É©„ÉØ„Ç¨„Ç∂„ÉÄ„Éê„Éë„Ç§„Ç£„Ç≠„Ç∑„ÉÅ„Éã„Éí„Éü„É™„É∞„ÇÆ„Ç∏„ÉÇ„Éì„Éî„Ç¶„Ç•„ÇØ„Çπ„ÉÑ„Éå„Éï„É†„É¶„É•„É´„Ç∞„Ç∫„Éñ„ÉÖ„Éó„Ç®„Çß„Ç±„Çª„ÉÜ„Éç„Éò„É°„É¨„É±„Ç≤„Çº„Éá„Éô„Éö„Ç™„Ç©„Ç≥„ÇΩ„Éà„Éé„Éõ„É¢„É®„Éß„É≠„É≤„Ç¥„Çæ„Éâ„Éú„Éù„É¥„ÉÉ„É≥0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",c=setInterval(()=>{t.fillStyle="rgba(9, 9, 11, 0.1)",t.fillRect(0,0,a,i),t.fillStyle="#22c55e",t.font="15px monospace";for(let e=0;e<n.length;e++){const s=o.charAt(Math.floor(119*Math.random()));t.fillText(s,20*e,20*n[e]),20*n[e]>i&&Math.random()>.975&&(n[e]=0),n[e]++}},50),d=()=>{a=e.width=window.innerWidth,i=e.height=window.innerHeight};return window.addEventListener("resize",d),()=>{clearInterval(c),window.removeEventListener("resize",d)}},[s]),t.jsx("canvas",{ref:r,className:"fixed top-0 left-0 w-full h-full -z-10 transition-opacity duration-500 pointer-events-none "+("light"===s?"opacity-0":"opacity-15")})},Xe=()=>t.jsxs("div",{className:"pointer-events-none fixed inset-0 z-20 overflow-hidden h-full w-full mix-blend-overlay opacity-30",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-[rgba(255,255,255,0.03)] to-transparent animate-scanline h-[100vh] w-full"}),t.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(18,16,16,0)_50%,rgba(0,0,0,0.1)_50%),linear-gradient(90deg,rgba(255,0,0,0.03),rgba(0,255,0,0.01),rgba(0,0,255,0.03))] bg-[length:100%_3px,3px_100%] pointer-events-none"}),t.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle,transparent_60%,rgba(0,0,0,0.4)_150%)]"})]}),Ze="neo_active_user",Je="NEO_RESET_2025_V1";let Qe={exhibits:[],collections:[],notifications:[],messages:[],users:[],guestbook:[],wishlist:[],guilds:[],tradeRequests:[]},et=null;const tt=()=>(et||(et=a("NeoArchive_V3_Turbo",2,{upgrade(e){if(e.objectStoreNames.contains("system")||e.createObjectStore("system"),!e.objectStoreNames.contains("exhibits")){const t=e.createObjectStore("exhibits",{keyPath:"id"});t.createIndex("by-owner","owner"),t.createIndex("by-date","timestamp")}if(!e.objectStoreNames.contains("collections")){e.createObjectStore("collections",{keyPath:"id"}).createIndex("by-owner","owner")}if(e.objectStoreNames.contains("users")||e.createObjectStore("users",{keyPath:"username"}),!e.objectStoreNames.contains("notifications")){e.createObjectStore("notifications",{keyPath:"id"}).createIndex("by-recipient","recipient")}e.objectStoreNames.contains("messages")||e.createObjectStore("messages",{keyPath:"id"}),e.objectStoreNames.contains("generic")||e.createObjectStore("generic",{keyPath:"id"})},blocked(){console.warn("Database blocked: please close other tabs with this app open.")},blocking(){et&&(et.then(e=>e.close()),et=null)},terminated(){console.error("Database terminated unexpectedly")}})),et),st=[],rt=()=>st.forEach(e=>e()),at=new Map,it=async(e,t="GET",s)=>{const r="GET"===t?`${t}:${e}`:null;if(r&&at.has(r))return console.log(`[API] Deduplicating request: ${e}`),at.get(r);const a=new AbortController,i=setTimeout(()=>a.abort(),15e3),l=(async()=>{try{const r={method:t,headers:{"Content-Type":"application/json"},signal:a.signal};s&&(r.body=JSON.stringify(s));let l=`/api${e}`;if("GET"===t){const e=l.includes("?")?"&":"?";l+=`${e}_t=${Date.now()}`}const n=await fetch(l,r);if(clearTimeout(i),!n.ok){const e=await n.text();throw new Error(`API Error ${n.status}: ${e.slice(0,100)}`)}return await n.json()}catch(l){if(clearTimeout(i),"AbortError"===l.name)throw console.warn(`[API] Timeout on ${e} - switching to offline mode logic`),new Error("Network timeout");throw console.error(`‚ùå API Call Failed [${e}]:`,l.message),l}finally{r&&at.delete(r)}})();return r&&at.set(r,l),l},lt=async(e,t)=>{const s=await tt();await s.put("generic",{id:t.id,table:e,data:t})},nt=async e=>{const t=await tt();await t.delete("generic",e)},ot=async()=>{try{if(Qe.exhibits.length>0)return console.log("‚úÖ [Sync] Using cached feed data, will refresh in background"),void it("/feed?limit=100").then(e=>{Array.isArray(e)&&(Qe.exhibits=e.sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()),rt(),tt().then(t=>{const s=t.transaction("exhibits","readwrite");return e.forEach(e=>s.store.put(e)),s.done}))}).catch(e=>console.warn("[Sync] Background feed refresh failed:",e));console.log("üì¶ [Sync] Loading critical feed data...");const e=await it("/feed?limit=100");if(!Array.isArray(e))return;Qe.exhibits=e.sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()),rt(),tt().then(t=>{const s=t.transaction("exhibits","readwrite");return e.forEach(e=>s.store.put(e)),s.done}).then(()=>console.log("‚úÖ [Sync] Feed persisted")),console.log(`‚úÖ [Sync] Feed loaded: ${e.length} items`)}catch(e){console.warn("[Sync] Critical feed load failed:",e)}},ct=async e=>{console.log("üîÑ [Sync] Starting background sync...");const t=await tt(),s=async(e,s,r,a)=>{try{const i=await it(e);if(!Array.isArray(i))return;if(a)if("exhibits"===a){const e=new Set(Qe.exhibits.map(e=>e.id)),t=i.filter(t=>!e.has(t.id)),s=Qe.exhibits.map(e=>{const t=i.find(t=>t.id===e.id);return t?{...t,likedBy:t.likedBy&&t.likedBy.length>0?t.likedBy:e.likedBy,comments:t.comments&&t.comments.length>0?t.comments:e.comments}:e});Qe.exhibits=[...s,...t].sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime())}else Qe[a]=i;else"generic"===s&&("wishlist"===r&&(Qe.wishlist=i),"guestbook"===r&&(Qe.guestbook=i));rt();const l=t.transaction(s,"readwrite"),n=l.objectStore(s);"generic"===s&&r?i.forEach(e=>n.put({id:e.id,table:r,data:e})):i.forEach(e=>n.put(e)),await l.done,console.log(`‚úÖ [Sync] ${e} persisted`)}catch(i){console.warn(`[Sync] Failed ${e}:`,i)}};Promise.allSettled([s("/feed?limit=100","exhibits",void 0,"exhibits"),s("/users","users",void 0,"users"),s("/collections","collections",void 0,"collections"),s("/wishlist","generic","wishlist","wishlist"),s("/guestbook","generic","guestbook","guestbook")]).then(e=>{const t=e.filter(e=>"rejected"===e.status);t.length>0&&console.warn(`[Sync] ${t.length} requests failed`)}),e&&(it(`/sync?username=${e}`).then(async e=>{if(e){if(e.users?.length){const s=t.transaction("users","readwrite");e.users.forEach(e=>{s.store.put(e);const t=Qe.users.findIndex(t=>t.username===e.username);-1!==t?Qe.users[t]=e:Qe.users.push(e)}),await s.done}if(e.collections?.length){const s=t.transaction("collections","readwrite");e.collections.forEach(e=>{s.store.put(e);const t=Qe.collections.findIndex(t=>t.id===e.id);-1!==t?Qe.collections[t]=e:Qe.collections.push(e)}),await s.done}rt()}}).catch(e=>console.warn("[Sync] Personal Sync Error",e)),Promise.all([it(`/notifications?username=${e}`),it(`/messages?username=${e}`)]).then(async([e,s])=>{const r=t.transaction(["notifications","messages"],"readwrite");Array.isArray(e)&&(e.forEach(e=>r.objectStore("notifications").put(e)),Qe.notifications=e),Array.isArray(s)&&(s.forEach(e=>r.objectStore("messages").put(e)),Qe.messages=s),await r.done,rt()}).catch(e=>console.warn("[Sync] Messages Sync Error",e)))},dt=async()=>{try{localStorage.removeItem("neo_archive_db_cache_v2")}catch(t){}if(localStorage.getItem("neo_force_reset_key")!==Je){console.warn("‚ö†Ô∏è FORCE CLEARING CACHE FOR UPDATE");try{const e=await tt();await e.clear("exhibits"),await e.clear("collections"),await e.clear("users"),await e.clear("notifications"),await e.clear("messages"),await e.clear("generic"),localStorage.setItem("neo_force_reset_key",Je)}catch(t){console.error("Cache reset failed:",t)}}let e;await(async()=>{try{const e=await Promise.race([tt(),new Promise((e,t)=>setTimeout(()=>t(new Error("DB_OPEN_TIMEOUT")),2e3))]),[t,s,r]=await Promise.all([e.getAll("users"),e.getAll("notifications"),e.getAll("messages")]);Qe.users=t,Qe.notifications=s,Qe.messages=r}catch(t){console.warn("Critical hydration failed (clean slate?):",t)}})(),await(async()=>{try{const e=await tt(),[t,s,r]=await Promise.all([e.getAll("exhibits"),e.getAll("collections"),e.getAll("generic")]);Qe.exhibits=t.sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()),Qe.collections=s,Qe.wishlist=r.filter(e=>"wishlist"===e.table).map(e=>e.data),Qe.guestbook=r.filter(e=>"guestbook"===e.table).map(e=>e.data),Qe.guilds=r.filter(e=>"guilds"===e.table).map(e=>e.data),Qe.tradeRequests=r.filter(e=>"tradeRequests"===e.table).map(e=>e.data),console.log(`[NeoDB] Content Hydrated: ${t.length} items`),rt()}catch(t){console.error("Content hydration failed:",t)}})();try{const t=await tt(),s=await t.get("system",Ze);e=s?.value}catch(t){console.warn("Could not read session from DB")}return e?(await ot(),ct(e),Qe.users.find(t=>t.username===e)||null):null},xt=()=>({...Qe}),mt=async e=>{const t=Qe.exhibits.findIndex(t=>t.id===e.id);-1!==t&&(Qe.exhibits[t]=e),rt();const s=await tt();await s.put("exhibits",e);const r=await it("/exhibits","POST",e);if(r&&r.imageUrls){const a={...e,imageUrls:r.imageUrls};-1!==t&&(Qe.exhibits[t]=a),await s.put("exhibits",a),rt()}},pt=async e=>{Qe.collections=Qe.collections.map(t=>t.id===e.id?e:t),rt();const t=await tt();await t.put("collections",e),await it("/collections","POST",e)},ht=async e=>{Qe.collections=Qe.collections.filter(t=>t.id!==e),rt();const t=await tt();await t.delete("collections",e),await it(`/collections/${e}`,"DELETE")},ut=async e=>{const t=Qe.users.findIndex(t=>t.username===e.username);-1!==t&&(Qe.users[t]=e),rt();const s=await tt();await s.put("users",e),await it("/users","POST",{id:e.username,...e})},bt=async(e,t,s,r,a)=>{const i={id:crypto.randomUUID(),type:t,recipient:e,actor:s,targetId:r,targetPreview:a,timestamp:(new Date).toISOString(),isRead:!1};await it("/notifications","POST",i)},gt=e=>{if(!e)return"https://ui-avatars.com/api/?name=NA&background=000&color=fff";const t=Qe.users.find(t=>t.username===e);return t?.avatarUrl?t.avatarUrl:`https://ui-avatars.com/api/?name=${e}&background=random&color=fff&bold=true`},ft=e=>new Promise((t,s)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>t(r.result),r.onerror=e=>s(e)}),wt=async(e,t)=>{const s=Qe.users.find(t=>t.username===e);s&&(s.following.includes(t)?s.following=s.following.filter(e=>e!==t):s.following.push(t),await ut(s))},jt=({theme:s,onLogin:r})=>{const[a,f]=e.useState("ENTRY"),[w,j]=e.useState(""),[N,v]=e.useState(""),[y,k]=e.useState(!1),[C,E]=e.useState(""),[S,I]=e.useState(!0),T=e.useRef(null),[O,A]=e.useState(""),[L,R]=e.useState(""),[D,z]=e.useState(!1),[U,_]=e.useState(!1),[M,F]=e.useState(null);e.useEffect(()=>{"true"===new URLSearchParams(window.location.search).get("verified")&&(R("–ü–û–ß–¢–ê –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ê"),f("LOGIN"),window.history.replaceState({},document.title,window.location.pathname+window.location.hash)),fetch("/api/health").then(e=>e.json()).then(e=>{"number"==typeof e.totalUsers&&F(e.totalUsers)}).catch(console.error)},[]),e.useEffect(()=>{if("TELEGRAM"===a&&T.current){window.onTelegramAuth=async e=>{_(!0);try{const t=await(async e=>{const t=await it("/auth/telegram","POST",e),s=await tt();return await s.put("system",{key:Ze,value:t.username},Ze),await s.put("users",t),Qe.users.push(t),rt(),ct(t.username),t})(e);await r(t,!0)}catch(t){A("LOGIN FAILED: "+(t.message||"Server Error")),_(!1)}},T.current.innerHTML="";const e=document.createElement("script");e.src="https://telegram.org/js/telegram-widget.js?22",e.async=!0,e.setAttribute("data-telegram-login","TrusterStoryBot"),e.setAttribute("data-size","large"),e.setAttribute("data-radius","10"),e.setAttribute("data-onauth","onTelegramAuth(user)"),e.setAttribute("data-request-access","write"),T.current.appendChild(e)}},[a,r]);const P=()=>{A(""),R(""),z(!1),v(""),E(""),k(!1)},B=()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let t="";for(let s=0;s<16;s++)t+=e.charAt(Math.floor(70*Math.random()));v(t),k(!0)},G=async e=>{e.preventDefault(),_(!0),A(""),R("");const t=w.trim(),s=N.trim();try{const e=await(async(e,t)=>{const s=await it("/auth/login","POST",{identifier:e,password:t}),r=await tt();await r.put("system",{key:Ze,value:s.username},Ze),await r.put("users",s);const a=Qe.users.findIndex(e=>e.username===s.username);return-1!==a?Qe.users[a]=s:Qe.users.push(s),rt(),await ot(),ct(s.username),s})(t,s);await r(e,S)}catch(a){A(a.message||"–û–®–ò–ë–ö–ê –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò"),_(!1)}},H=async e=>{if(e.preventDefault(),!w||!N||!C)return void A("–ó–ê–ü–û–õ–ù–ò–¢–ï –í–°–ï –ü–û–õ–Ø");_(!0),A(""),z(!1);const t=w.trim().toLowerCase(),s=C.trim(),r=N.trim();try{await(async(e,t,s,r)=>{const a=await it("/auth/register","POST",{username:e,password:t,tagline:s,email:r}),i=await tt();return await i.put("system",{key:Ze,value:a.username},Ze),await i.put("users",a),Qe.users.push(a),rt(),await ot(),ct(a.username),a})(s,r,"–ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å",t),R("–£–°–ü–ï–®–ù–û. –¢–ï–ü–ï–†–¨ –í–û–ô–î–ò–¢–ï."),f("LOGIN"),v("")}catch(a){A(a.message||"–û–®–ò–ë–ö–ê –†–ï–ì–ò–°–¢–†–ê–¶–ò–ò"),a.message?.includes("–∑–∞–Ω—è—Ç—ã")&&(z(!0),R("Email –∏–ª–∏ –ù–∏–∫–Ω–µ–π–º –∑–∞–Ω—è—Ç"))}finally{_(!1)}},$=async e=>{if(e.preventDefault(),w){_(!0),A(""),R("");try{await(async e=>await it("/auth/recover","POST",{email:e}))(w.trim().toLowerCase()),R("–ù–û–í–´–ô –ü–ê–†–û–õ–¨ –û–¢–ü–†–ê–í–õ–ï–ù –ù–ê EMAIL"),f("LOGIN")}catch(t){A(t.message||"–û–®–ò–ë–ö–ê –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–Ø")}finally{_(!1)}}else A("–£–ö–ê–ñ–ò–¢–ï EMAIL")};return t.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-black",children:t.jsx("div",{className:"w-full max-w-sm p-8 bg-black border border-white/10 rounded-lg shadow-[0_0_30px_rgba(0,0,0,0.5)]",children:"ENTRY"===a?t.jsxs("div",{className:"flex flex-col gap-4 w-full",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("button",{onClick:()=>{f("LOGIN"),P()},className:"py-8 border font-pixel text-xs uppercase tracking-widest hover:bg-white hover:text-black transition-colors flex flex-col items-center gap-2 border-white/20 text-white/80",children:[t.jsx(i,{size:24}),t.jsx("span",{children:"–í–•–û–î"})]}),t.jsxs("button",{onClick:()=>{f("REGISTER"),P()},className:"py-8 border font-pixel text-xs uppercase tracking-widest hover:bg-white hover:text-black transition-colors flex flex-col items-center gap-2 border-white/20 text-white/80",children:[t.jsx(l,{size:24}),t.jsx("span",{children:"–†–ï–ì"})]})]}),t.jsxs("button",{onClick:()=>{f("TELEGRAM"),P()},className:"py-4 border font-pixel text-[10px] uppercase tracking-widest hover:bg-[#0088cc] hover:text-white hover:border-[#0088cc] transition-colors flex items-center justify-center gap-2 border-white/20 text-white/60",children:[t.jsx(n,{size:16})," TELEGRAM"]}),null!==M&&t.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 opacity-50",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse shadow-[0_0_5px_#22c55e]"}),t.jsxs("span",{className:"text-[10px] font-mono text-green-500 tracking-[0.2em]",children:["ACTIVE_NODES: ",M.toLocaleString()]})]})]}):"TELEGRAM"===a?t.jsxs("div",{className:"flex flex-col gap-4 w-full",children:[t.jsx("div",{className:"flex justify-center my-4 min-h-[80px]",ref:T,children:t.jsx("div",{className:"animate-pulse text-[10px] font-mono text-white/50",children:"..."})}),O&&t.jsx("div",{className:"text-red-500 text-[10px] font-mono text-center",children:O}),t.jsx("button",{type:"button",onClick:()=>{f("ENTRY"),P()},className:"text-[10px] font-mono opacity-50 hover:underline text-center text-white",children:"–û–¢–ú–ï–ù–ê"})]}):"LOGIN"===a?t.jsxs("form",{onSubmit:G,className:"flex flex-col gap-4 w-full",children:[L&&t.jsx("div",{className:"text-green-500 text-[10px] font-mono text-center mb-2",children:L}),t.jsxs("div",{className:"flex items-center gap-2 border-b p-3 border-white/20",children:[t.jsx(o,{size:16,className:"text-white/50"}),t.jsx("input",{value:w,onChange:e=>j(e.target.value),type:"text",className:"bg-transparent w-full focus:outline-none font-mono text-sm text-white placeholder-white/30",placeholder:"LOGIN / EMAIL",required:!0})]}),t.jsxs("div",{className:"flex items-center gap-2 border-b p-3 border-white/20",children:[t.jsx(c,{size:16,className:"text-white/50"}),t.jsx("input",{value:N,onChange:e=>v(e.target.value),type:y?"text":"password",className:"bg-transparent w-full focus:outline-none font-mono text-sm text-white placeholder-white/30",placeholder:"******",required:!0}),t.jsx("button",{type:"button",onClick:()=>k(!y),className:"opacity-50 hover:opacity-100 focus:outline-none text-white",children:y?t.jsx(d,{size:16}):t.jsx(x,{size:16})})]}),t.jsxs("div",{className:"flex justify-between items-center px-1",children:[t.jsxs("div",{onClick:()=>I(!S),className:"flex items-center gap-2 cursor-pointer opacity-70 hover:opacity-100 select-none text-white",children:[S?t.jsx(m,{size:14}):t.jsx(p,{size:14}),t.jsx("span",{className:"text-[10px] font-mono uppercase",children:"–°–û–•–†–ê–ù–ò–¢–¨"})]}),t.jsx("button",{type:"button",onClick:()=>{f("RECOVERY"),A("")},className:"text-[10px] font-mono text-white/50 hover:text-white hover:underline uppercase",children:"–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?"})]}),O&&t.jsxs("div",{className:"flex items-center gap-2 text-red-500 text-[10px] font-mono justify-center",children:[t.jsx(h,{size:14})," ",O]}),t.jsx("button",{type:"submit",disabled:U,className:"mt-2 py-3 font-bold font-pixel text-xs uppercase bg-white text-black hover:bg-gray-200",children:U?"...":"–í–û–ô–¢–ò"}),t.jsx("button",{type:"button",onClick:()=>{f("ENTRY"),P()},className:"text-[10px] font-mono opacity-50 hover:underline text-center text-white",children:"–ù–ê–ó–ê–î"})]}):"REGISTER"===a?t.jsxs("form",{onSubmit:H,className:"flex flex-col gap-4 w-full",children:[t.jsxs("div",{className:"flex items-center gap-2 border-b p-2 border-white/20",children:[t.jsx(u,{size:16,className:"text-white/50"}),t.jsx("input",{value:w,onChange:e=>j(e.target.value),type:"email",className:"bg-transparent w-full focus:outline-none font-mono text-sm text-white placeholder-white/30",placeholder:"EMAIL",required:!0})]}),t.jsxs("div",{className:"flex items-center gap-2 border-b p-2 border-white/20",children:[t.jsx(o,{size:16,className:"text-white/50"}),t.jsx("input",{value:C,onChange:e=>E(e.target.value),className:"bg-transparent w-full focus:outline-none font-mono text-sm text-white placeholder-white/30",placeholder:"NICKNAME",required:!0})]}),t.jsxs("div",{className:"flex items-center gap-2 border-b p-2 border-white/20",children:[t.jsx(c,{size:16,className:"text-white/50"}),t.jsx("input",{value:N,onChange:e=>v(e.target.value),type:y?"text":"password",className:"bg-transparent w-full focus:outline-none font-mono text-sm text-white placeholder-white/30",placeholder:"PASS",required:!0}),t.jsx("button",{type:"button",onClick:B,className:"opacity-50 hover:opacity-100 text-white",children:t.jsx(b,{size:14})})]}),O&&t.jsx("div",{className:"text-red-500 text-[10px] font-mono text-center",children:O}),t.jsx("button",{type:"submit",disabled:U,className:"mt-2 py-3 font-bold font-pixel text-xs uppercase bg-white text-black hover:bg-gray-200",children:U?"...":"–°–û–ó–î–ê–¢–¨"}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("button",{type:"button",onClick:()=>{f("ENTRY"),P()},className:"text-[10px] font-mono opacity-50 hover:underline text-white",children:"–ù–ê–ó–ê–î"}),D&&t.jsx("button",{type:"button",onClick:()=>f("RECOVERY"),className:"text-[10px] font-mono text-yellow-500 hover:underline",children:"–í–û–°–°–¢–ê–ù–û–í–ò–¢–¨?"})]})]}):"RECOVERY"===a?t.jsxs("form",{onSubmit:$,className:"flex flex-col gap-4 w-full animate-in fade-in",children:[t.jsx("h3",{className:"text-white font-pixel text-xs text-center mb-2",children:"–í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï –î–û–°–¢–£–ü–ê"}),t.jsxs("div",{className:"flex items-center gap-2 border-b p-3 border-white/20",children:[t.jsx(u,{size:16,className:"text-white/50"}),t.jsx("input",{value:w,onChange:e=>j(e.target.value),type:"email",className:"bg-transparent w-full focus:outline-none font-mono text-sm text-white placeholder-white/30",placeholder:"–í–ê–® EMAIL",required:!0})]}),t.jsx("p",{className:"text-[10px] font-mono text-white/50 text-center",children:"–°–∏—Å—Ç–µ–º–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç –µ–≥–æ –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—É—é –ø–æ—á—Ç—É."}),O&&t.jsxs("div",{className:"flex items-center gap-2 text-red-500 text-[10px] font-mono justify-center",children:[t.jsx(h,{size:14})," ",O]}),t.jsx("button",{type:"submit",disabled:U,className:"mt-2 py-3 font-bold font-pixel text-xs uppercase bg-white text-black hover:bg-gray-200 flex items-center justify-center gap-2",children:U?"...":t.jsxs(t.Fragment,{children:[t.jsx(g,{size:14})," –°–ë–†–û–°–ò–¢–¨"]})}),t.jsx("button",{type:"button",onClick:()=>{f("LOGIN"),P()},className:"text-[10px] font-mono opacity-50 hover:underline text-center text-white",children:"–û–¢–ú–ï–ù–ê"})]}):void 0})})},Nt={PHONES:"–¢–ï–õ–ï–§–û–ù–´",GAMES:"–ò–ì–†–´",MAGAZINES:"–ñ–£–†–ù–ê–õ–´",MUSIC:"–ú–£–ó–´–ö–ê",VIDEO:"–í–ò–î–ï–û",TOYS:"–ò–ì–†–£–®–ö–ò",COMPUTERS:"–ö–û–ú–ü–¨–Æ–¢–ï–†–´",CAMERAS:"–ö–ê–ú–ï–†–´",MISC:"–ü–†–û–ß–ï–ï"},vt={[Nt.PHONES]:["–°–º–∞—Ä—Ç—Ñ–æ–Ω—ã","–ö–Ω–æ–ø–æ—á–Ω—ã–µ —Ç–µ–ª–µ—Ñ–æ–Ω—ã","–†–∞—Å–∫–ª–∞–¥—É—à–∫–∏","–°–ª–∞–π–¥–µ—Ä—ã","–ö–ü–ö","–°—Ç–∞—Ü–∏–æ–Ω–∞—Ä–Ω—ã–µ","–ü–µ–π–¥–∂–µ—Ä—ã"],[Nt.GAMES]:["–ö–∞—Ä—Ç—Ä–∏–¥–∂–∏ (8-bit/16-bit)","–î–∏—Å–∫–∏ (CD/DVD/BD)","–ü–æ—Ä—Ç–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–Ω—Å–æ–ª–∏","–°—Ç–∞—Ü–∏–æ–Ω–∞—Ä–Ω—ã–µ –∫–æ–Ω—Å–æ–ª–∏","–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã","–ê—Ä–∫–∞–¥–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç—ã"],[Nt.MAGAZINES]:["–ò–≥—Ä–æ–≤—ã–µ","–ö–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã–µ","–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ","–ú—É–∑—ã–∫–∞–ª—å–Ω—ã–µ","–ö–æ–º–∏–∫—Å—ã","–ö–∞—Ç–∞–ª–æ–≥–∏","–ü–æ—Å—Ç–µ—Ä—ã"],[Nt.MUSIC]:["–ê—É–¥–∏–æ–∫–∞—Å—Å–µ—Ç—ã","–í–∏–Ω–∏–ª (LP/EP)","CD","MiniDisc","–ü–ª–µ–µ—Ä—ã (–ü–æ—Ä—Ç–∞—Ç–∏–≤)","Hi-Fi –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã","–ö–∞—Ç—É—à–∫–∏"],[Nt.VIDEO]:["VHS","DVD","Blu-ray","–í–∏–¥–µ–æ–ø–ª–µ–µ—Ä—ã","–ü—Ä–æ–µ–∫—Ç–æ—Ä—ã","Video CD"],[Nt.TOYS]:["Action Figures","–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã","–ú—è–≥–∫–∏–µ –∏–≥—Ä—É—à–∫–∏","–†–æ–±–æ—Ç—ã","–ù–∞—Å—Ç–æ–ª—å–Ω—ã–µ –∏–≥—Ä—ã","–¢–∞–º–∞–≥–æ—á–∏/–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞","–ú–æ–¥–µ–ª–∏–∑–º"],[Nt.COMPUTERS]:["–†–µ—Ç—Ä–æ –ü–ö","–ù–æ—É—Ç–±—É–∫–∏","–ö–æ–º–ø–ª–µ–∫—Ç—É—é—â–∏–µ","–ü–µ—Ä–∏—Ñ–µ—Ä–∏—è","–ù–æ—Å–∏—Ç–µ–ª–∏ (Floppy/ZIP)"],[Nt.CAMERAS]:["–ü–ª–µ–Ω–æ—á–Ω—ã–µ","–¶–∏—Ñ—Ä–æ–≤—ã–µ (Early Digital)","Polaroid/Instax","–í–∏–¥–µ–æ–∫–∞–º–µ—Ä—ã","–û–±—ä–µ–∫—Ç–∏–≤—ã"],[Nt.MISC]:["–ß–∞—Å—ã","–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã","–ú–µ—Ä—á","–£–ø–∞–∫–æ–≤–∫–∞","–†–µ–∫–ª–∞–º–∞","–î—Ä—É–≥–æ–µ"]},yt={[Nt.PHONES]:["–ë—Ä–µ–Ω–¥","–ú–æ–¥–µ–ª—å","–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞","–°—Ç–∞–Ω–¥–∞—Ä—Ç —Å–≤—è–∑–∏","–¢–∏–ø –∫–æ—Ä–ø—É—Å–∞"],[Nt.GAMES]:["–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞","–ù–∞–∑–≤–∞–Ω–∏–µ","–†–µ–≥–∏–æ–Ω","–ì–æ–¥","–ö–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è"],[Nt.MAGAZINES]:["–ù–∞–∑–≤–∞–Ω–∏–µ","–ù–æ–º–µ—Ä","–ì–æ–¥","–ò–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ","–Ø–∑—ã–∫"],[Nt.MUSIC]:["–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å","–ê–ª—å–±–æ–º","–ì–æ–¥","–ù–æ—Å–∏—Ç–µ–ª—å","–°–æ—Å—Ç–æ—è–Ω–∏–µ"],[Nt.VIDEO]:["–ù–∞–∑–≤–∞–Ω–∏–µ","–ì–æ–¥","–ù–æ—Å–∏—Ç–µ–ª—å","–†–µ–∂–∏—Å—Å–µ—Ä","–ò–∑–¥–∞—Ç–µ–ª—å"],[Nt.TOYS]:["–ù–∞–∑–≤–∞–Ω–∏–µ","–°–µ—Ä–∏—è","–ë—Ä–µ–Ω–¥","–ì–æ–¥","–ú–∞—Ç–µ—Ä–∏–∞–ª"],[Nt.COMPUTERS]:["–ë—Ä–µ–Ω–¥","–ú–æ–¥–µ–ª—å","–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä","–û–ó–£","–ì–æ–¥"],[Nt.CAMERAS]:["–ë—Ä–µ–Ω–¥","–ú–æ–¥–µ–ª—å","–¢–∏–ø","–ú–∞—Ç—Ä–∏—Ü–∞/–ü–ª–µ–Ω–∫–∞","–ì–æ–¥"],[Nt.MISC]:["–ù–∞–∑–≤–∞–Ω–∏–µ","–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å","–ì–æ–¥","–û–ø–∏—Å–∞–Ω–∏–µ"]},kt={NONE:{label:"",color:"",icon:null},FOR_TRADE:{label:"–û–ë–ú–ï–ù",color:"text-blue-300 border-blue-500 bg-blue-500/20",icon:g,badge:"–û–ë–ú–ï–ù"},FOR_SALE:{label:"–ü–†–û–î–ê–ñ–ê",color:"text-emerald-300 border-emerald-500 bg-emerald-500/20",icon:f,badge:"–ü–†–û–î–ê–ñ–ê"},GIFT:{label:"–î–ê–†–Æ",color:"text-pink-300 border-pink-500 bg-pink-500/20",icon:w,badge:"–û–¢–î–ê–ú"},NOT_FOR_SALE:{label:"–ù–ï –ü–†–û–î–ê–ï–¢–°–Ø",color:"text-gray-400 border-gray-600 bg-gray-500/20",icon:c,badge:"–õ–ò–ß–ù–û–ï"}},Ct={LOW:{label:"–ù–ê–ë–õ–Æ–î–ê–Æ",desc:"–ü—Ä–∏—Å–º–∞—Ç—Ä–∏–≤–∞—é—Å—å",color:"text-gray-400 border-gray-500 bg-gray-500/10",icon:x,border:"border-gray-500"},MEDIUM:{label:"–ò–ù–¢–ï–†–ï–°",desc:"–ö—É–ø–ª—é –ø—Ä–∏ —Å–ª—É—á–∞–µ",color:"text-blue-400 border-blue-500 bg-blue-500/10",icon:j,border:"border-blue-500"},HIGH:{label:"–û–•–û–¢–ê",desc:"–ê–∫—Ç–∏–≤–Ω–æ –∏—â—É",color:"text-orange-400 border-orange-500 bg-orange-500/10",icon:N,border:"border-orange-500"},GRAIL:{label:"–ì–†–ê–ê–õ–¨",desc:"–ú–µ—á—Ç–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–∏",color:"text-yellow-400 border-yellow-500 bg-yellow-500/10 animate-pulse",icon:v,glow:!0,border:"border-yellow-500"}},Et={HELLO_WORLD:{label:"HELLO WORLD",desc:"–ü–µ—Ä–≤—ã–π –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É",color:"bg-green-500",icon:i,target:1},UPLOADER:{label:"DATA_MINER",desc:"–ó–∞–≥—Ä—É–∂–µ–Ω–æ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤",color:"bg-blue-500",icon:y,target:5},INFLUENCER:{label:"NET_CELEB",desc:"–õ–∞–π–∫–æ–≤ –ø–æ–ª—É—á–µ–Ω–æ",color:"bg-purple-500",icon:k,target:50},CRITIC:{label:"OBSERVER",desc:"–û—Å—Ç–∞–≤–ª–µ–Ω–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤",color:"bg-yellow-500",icon:C,target:10},LEGEND:{label:"THE_ONE",desc:"–í–ª–∞–¥–µ–ª–µ—Ü –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–≥–æ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞",color:"bg-red-500",icon:E,target:1},COLLECTOR:{label:"ARCHIVIST",desc:"–°–æ–∑–¥–∞–Ω–æ –∫–æ–ª–ª–µ–∫—Ü–∏–π",color:"bg-orange-500",icon:S,target:3}},St={[Nt.PHONES]:["–ù–û–í–´–ô (SEALED)","LIKE NEW","EXC","GOOD","FAIR","PARTS"],[Nt.GAMES]:["SEALED","CIB","BOXED","LOOSE","D.O.A."],[Nt.MUSIC]:["MINT","NM","VG+","VG","G","POOR"],[Nt.MAGAZINES]:["NEW","FINE","VERY GOOD","GOOD","FAIR","POOR"],[Nt.VIDEO]:["SEALED","MINT","EXC","GOOD","VHS-RIP"],[Nt.TOYS]:["MISB (Sealed)","MIB (Boxed)","LOOSE (Complete)","LOOSE (Incomplete)","BROKEN"],[Nt.COMPUTERS]:["NOS (New Old Stock)","RESTORED","WORKING","UNTESTED","FOR PARTS"],[Nt.CAMERAS]:["MINT","NEAR MINT","EXC++","EXC","USER","UG"],[Nt.MISC]:["–ò–î–ï–ê–õ","–•–û–†–û–®–ï–ï","–ü–û–¢–ï–†–¢–û–ï","–°–õ–û–ú–ê–ù–û"]},It={[Nt.PHONES]:1.2,[Nt.GAMES]:1.5,[Nt.MAGAZINES]:1,[Nt.MUSIC]:1.3,[Nt.VIDEO]:1.1,[Nt.TOYS]:1.4,[Nt.COMPUTERS]:1.6,[Nt.CAMERAS]:1.7,[Nt.MISC]:.9},Tt=e=>{if(e.title.toUpperCase().includes("CURSED")||"–≤—Ñ—É—Ñ–≤—Ñ"===e.title&&("Truester"===e.owner||"@Truester"===e.owner))return"CURSED";const t=e.viewedBy?.length||Math.floor(.3*e.views),s=(30*e.likes+15*(e.comments?.length||0)+2*t)*((Date.now()-new Date(e.timestamp).getTime())/864e5<7?1.2:1)*(It[e.category]||1);return s>=15e3?"MYTHIC":s>=8e3?"LEGENDARY":s>=3e3?"EPIC":s>=800?"RARE":s>=200?"UNCOMMON":"COMMON"},Ot={COMMON:{name:"COMMON",color:"text-gray-500",bgColor:"bg-gray-500/10",borderDark:"border-dark-dim",badge:"bg-gray-500 text-white",icon:o,shadow:"",glow:!1},UNCOMMON:{name:"UNCOMMON",color:"text-green-500",bgColor:"bg-green-500/15",borderDark:"border-green-600 shadow-[0_0_8px_rgba(34,197,94,0.25)]",badge:"bg-green-600 text-white",icon:I,shadow:"shadow-[0_0_8px_rgba(34,197,94,0.15)]",glow:!0,glowColor:"rgba(34,197,94,0.2)"},RARE:{name:"RARE",color:"text-cyan-500",bgColor:"bg-cyan-500/20",borderDark:"border-cyan-500 shadow-[0_0_12px_rgba(6,182,212,0.35)]",badge:"bg-cyan-600 text-white",icon:T,shadow:"shadow-[0_0_12px_rgba(6,182,212,0.25)]",glow:!0,glowColor:"rgba(6,182,212,0.3)"},EPIC:{name:"EPIC",color:"text-purple-500",bgColor:"bg-purple-500/20",borderDark:"border-purple-500 shadow-[0_0_18px_rgba(168,85,247,0.45)]",badge:"bg-purple-600 text-white",icon:O,shadow:"shadow-[0_0_18px_rgba(168,85,247,0.35)]",glow:!0,glowColor:"rgba(168,85,247,0.4)"},LEGENDARY:{name:"LEGENDARY",color:"text-yellow-500",bgColor:"bg-yellow-500/25",borderDark:"border-yellow-500 shadow-[0_0_25px_rgba(234,179,8,0.55)]",badge:"bg-gradient-to-r from-yellow-600 to-orange-600 text-white",icon:E,shadow:"shadow-[0_0_25px_rgba(234,179,8,0.45)]",glow:!0,glowColor:"rgba(234,179,8,0.5)"},MYTHIC:{name:"MYTHIC",color:"text-pink-400",bgColor:"bg-gradient-to-br from-pink-500/30 to-blue-500/30",borderDark:"border-pink-500 shadow-[0_0_35px_rgba(236,72,153,0.7)] animate-pulse-slow",badge:"bg-gradient-to-r from-pink-600 via-purple-600 to-blue-600 text-white font-bold",icon:A,shadow:"shadow-[0_0_35px_rgba(236,72,153,0.6)] animate-pulse",glow:!0,glowColor:"rgba(236,72,153,0.6)",animated:!0},CURSED:{name:"CURSED",color:"text-red-500",bgColor:"bg-red-500/20",borderDark:"border-red-600 shadow-[0_0_30px_rgba(239,68,68,0.7)] animate-pulse-slow",badge:"bg-red-600 text-white font-black italic",icon:L,shadow:"shadow-[0_0_30px_rgba(220,38,38,0.6)] animate-pulse",glow:!0,glowColor:"rgba(239,68,68,0.7)",animated:!0}},At=({item:e,theme:r,onDelete:a,onUserClick:i,onClick:l})=>{const n=Ct[e.priority],o="xp"===r,c="winamp"===r,d="GRAIL"===e.priority;return t.jsxs("div",{onClick:()=>l&&l(e),className:`relative group flex flex-col h-full cursor-pointer transition-all duration-300 hover:-translate-y-1 overflow-hidden\n        ${o?"rounded border-2 border-[#0058EE] bg-white hover:shadow-lg":c?"rounded-none border border-[#505050] bg-[#191919] text-[#00ff00]":`rounded-xl border ${n.border} ${"dark"===r?"bg-black/40 hover:bg-white/5":"bg-white hover:bg-gray-50"}`}\n        ${d?"shadow-[0_0_20px_rgba(234,179,8,0.2)]":""}\n      `,children:[t.jsx("div",{className:"absolute top-2 left-2 z-20 pointer-events-none opacity-50 group-hover:opacity-100 transition-opacity",children:t.jsx(R,{size:16,className:n.color.split(" ")[0]})}),t.jsxs("div",{className:"relative aspect-square overflow-hidden border-b "+(o?"border-[#0058EE]":c?"border-[#505050]":"border-white/10"),children:[e.referenceImageUrl?t.jsxs(t.Fragment,{children:[t.jsx("img",{src:e.referenceImageUrl,alt:e.title,className:"w-full h-full object-cover transition-all duration-700 group-hover:scale-110 "+(d?"":"grayscale group-hover:grayscale-0")}),t.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(0,0,0,0)_50%,rgba(0,0,0,0.2)_50%)] bg-[length:100%_4px] pointer-events-none opacity-50"})]}):t.jsx("div",{className:"w-full h-full flex items-center justify-center bg-black/20",children:t.jsx(j,{size:32,className:"opacity-20"})}),t.jsx("div",{className:"absolute bottom-0 left-0 right-0 py-1 flex justify-center backdrop-blur-md border-t "+(o?"bg-white/90 border-blue-200":c?"bg-black border-[#505050]":"bg-black/80 border-white/10"),children:t.jsxs("div",{className:`flex items-center gap-1.5 text-[8px] font-pixel font-bold uppercase tracking-widest ${n.color.split(" ")[0]}`,children:[s.createElement(n.icon,{size:10}),n.label]})})]}),t.jsxs("div",{className:"p-3 flex flex-col flex-1",children:[t.jsxs("div",{className:"flex justify-between items-start gap-2 mb-2",children:[t.jsx("h3",{className:"text-[10px] font-bold font-pixel leading-tight uppercase "+(d?"text-yellow-500":c?"text-[#00ff00]":"dark"===r?"text-white":"text-black"),children:e.title}),d&&t.jsx(v,{size:12,className:"text-yellow-500 shrink-0"})]}),t.jsx("div",{className:"text-[9px] font-mono opacity-50 mb-3 truncate "+(c?"text-[#00ff00]":""),children:e.category}),t.jsxs("div",{className:"mt-auto pt-2 flex items-center justify-between border-t border-dashed "+(o?"border-gray-300":c?"border-[#505050]":"border-white/10"),children:[i?t.jsxs("div",{onClick:t=>{t.stopPropagation(),i(e.owner)},className:"flex items-center gap-2 cursor-pointer group/author w-full",children:[t.jsx("img",{src:gt(e.owner),className:"w-4 h-4 rounded-full border border-white/20"}),t.jsxs("span",{className:"text-[9px] font-pixel opacity-50 group-hover/author:opacity-100 transition-opacity truncate flex-1 "+(c?"text-[#00ff00]":""),children:["@",e.owner]})]}):t.jsx("div",{className:"h-4"}),a&&t.jsx("button",{onClick:t=>{t.stopPropagation(),a(e.id)},className:"text-[8px] text-red-500 opacity-50 hover:opacity-100 uppercase font-bold px-2",children:"DEL"})]})]})]})},Lt=({reactions:e=[],currentUsername:s,onReact:r,theme:a})=>{const i="winamp"===a,l=e?.some(e=>"LIKE"===e.type&&e.users?.includes(s)),n=e?.find(e=>"LIKE"===e.type)?.users?.length||0;return t.jsxs("button",{onClick:e=>{e.stopPropagation(),r()},className:"flex items-center gap-1 text-[10px] transition-all hover:scale-110 "+(l?"text-red-500 font-bold":i?"text-wa-green":"opacity-40 hover:opacity-100"),title:l?"–£–±—Ä–∞—Ç—å –ª–∞–π–∫":"–ü–æ—Å—Ç–∞–≤–∏—Ç—å –ª–∞–π–∫",children:[t.jsx(D,{size:14,fill:l?"currentColor":"none"}),t.jsx("span",{children:n})]})},Rt=({item:r,theme:a,onClick:i,currentUsername:l,onReact:n,onAuthorClick:o})=>{const[c,d]=e.useState(!1),m=Tt(r),p=Ot[m],h=p.icon,u="CURSED"===m,b=p.glow,g=r.viewedBy?.length||r.views;let f=[],w=0,j=null;try{f=r.reactions||[],w=((e=[])=>e.reduce((e,t)=>e+t.users.length,0))(f),j=((e=[],t)=>e.find(e=>"LIKE"===e.type&&e.users.includes(t))?"LIKE":null)(f,l)}catch(E){console.error("[ExhibitCard] Error processing reactions for item:",r.id,E),w=r.likes||0}const N=r.tradeStatus||"NONE",v=kt[N],y="xp"===a,k="winamp"===a,C=(()=>{const e=r.imageUrls?.[0];return e?"object"==typeof e&&e.thumbnail?e.thumbnail:"string"==typeof e?e:"https://placehold.co/600x400?text=NO+IMAGE":"https://placehold.co/600x400?text=NO+IMAGE"})();return k?t.jsxs("div",{onClick:()=>i(r),className:"group cursor-pointer flex flex-col h-full min-h-[200px] bg-[#292929] border-t-2 border-l-2 border-r-2 border-b-2 border-t-[#505050] border-l-[#505050] border-r-[#101010] border-b-[#101010] overflow-hidden",children:[t.jsxs("div",{className:"h-4 bg-gradient-to-r from-wa-blue-light to-wa-blue-dark flex items-center justify-between px-1 cursor-default select-none",children:[t.jsx("span",{className:"text-white font-winamp text-[10px] tracking-widest uppercase truncate w-[85%]",children:r.title}),t.jsx("div",{className:"w-2 h-2 bg-[#DCDCDC] border border-t-white border-l-white border-r-[#505050] border-b-[#505050]"})]}),t.jsxs("div",{className:"p-2 flex flex-col h-full",children:[t.jsxs("div",{className:"relative aspect-square mb-2 bg-black border-2 border-t-[#101010] border-l-[#101010] border-r-[#505050] border-b-[#505050] flex items-center justify-center overflow-hidden",children:[!c&&t.jsx("div",{className:"text-wa-green font-winamp text-xs animate-pulse",children:"LOADING..."}),t.jsx("img",{src:C,alt:r.title,loading:"lazy",onLoad:()=>d(!0),className:"w-full h-full object-cover transition-opacity duration-300 "+(c?"opacity-100":"opacity-0")}),t.jsx("div",{className:"absolute bottom-1 right-1 text-[8px] font-winamp text-wa-green bg-black/50 px-1",children:r.category})]}),t.jsxs("div",{className:"flex justify-between items-end mt-auto font-winamp text-wa-green text-[12px] leading-none",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("span",{className:"text-[10px] text-[#00A000]",children:[r.views," kbps"]}),t.jsxs("span",{className:"truncate max-w-[80px]",onClick:e=>{e.stopPropagation(),o(r.owner)},children:[r.owner,".mp3"]})]}),t.jsx("div",{className:"flex items-center gap-1",onClick:e=>e.stopPropagation(),children:t.jsx(Lt,{reactions:f,currentUsername:l,onReact:n,theme:a})})]})]})]}):t.jsxs("div",{onClick:()=>i(r),className:`group cursor-pointer flex flex-col h-full transition-all duration-300 hover:-translate-y-2 relative\n        ${y?"rounded-t-lg shadow-lg border-2 border-[#0058EE] bg-white":"rounded-2xl overflow-hidden border-2 "+("dark"===a?`bg-dark-surface border-white/10 hover:border-green-500/50 ${p.shadow}`:"bg-white border-black/5 hover:border-black/20 shadow-lg")}\n        ${u||p.animated?"animate-pulse":""}`,style:b&&"dark"===a?{boxShadow:`0 0 20px ${p.glowColor}, inset 0 0 20px ${p.glowColor}15`}:void 0,children:[y&&t.jsxs("div",{className:"h-6 bg-gradient-to-r from-[#0058EE] to-[#3F8CF3] rounded-t-[4px] flex items-center justify-between px-2 shadow-sm",children:[t.jsx("span",{className:"text-white font-bold text-[10px] drop-shadow-md truncate font-sans",children:r.title}),t.jsx("div",{className:"flex gap-1",children:t.jsx("div",{className:"w-3 h-3 bg-[#D64434] rounded-[2px] border border-white/30 shadow-inner"})})]}),t.jsxs("div",{className:"relative aspect-square overflow-hidden bg-black/20 "+(y?"":"rounded-t-2xl"),children:[!c&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-800 animate-pulse",children:t.jsx(z,{size:24,className:"text-white/20"})}),t.jsx("img",{src:C,alt:r.title,loading:"lazy",onLoad:()=>d(!0),className:"w-full h-full object-cover transition-all duration-500 group-hover:scale-110 "+(c?"opacity-100":"opacity-0")}),!y&&t.jsx("div",{className:"absolute top-2 left-2 px-2 py-0.5 rounded-lg backdrop-blur-md text-[8px] font-pixel border uppercase bg-black/60 text-white border-white/10",children:r.category}),t.jsxs("div",{className:`absolute top-2 right-2 px-2 py-0.5 rounded-lg flex items-center gap-1 text-[8px] font-pixel font-bold shadow-xl border border-white/10 ${p.badge}`,children:[t.jsx(h,{size:10})," ",p.name]}),"NONE"!==N&&t.jsxs("div",{className:`absolute bottom-2 left-2 px-2.5 py-1.5 rounded-lg flex items-center gap-1.5 text-[10px] font-bold tracking-wide shadow-lg uppercase border !bg-zinc-900/95 backdrop-blur-md ${v.color.replace(/bg-[\w/-]+/,"")}`,children:[v.icon&&s.createElement(v.icon,{size:12,strokeWidth:2.5}),v.badge]})]}),t.jsxs("div",{className:"p-4 flex flex-col flex-1 "+(y?"bg-[#ECE9D8]":""),children:[!y&&t.jsx("h3",{className:"text-sm font-bold font-pixel mb-1 line-clamp-2 leading-tight "+(u?"text-red-500":""),children:r.title}),t.jsxs("div",{className:"mt-1 font-mono text-[10px] "+(y?"text-black opacity-80":"opacity-60"),children:[t.jsx("span",{className:"truncate uppercase",children:r.condition||r.quality}),y&&t.jsx("div",{className:"text-[9px] text-gray-600 mt-1 uppercase tracking-wide",children:r.category})]}),t.jsxs("div",{className:"mt-auto pt-4 flex items-center justify-between border-t border-dashed "+(y?"border-gray-400":"border-white/10"),children:[t.jsxs("div",{onClick:e=>{e.stopPropagation(),o(r.owner)},className:"flex items-center gap-2 group/author",children:[t.jsx("img",{src:gt(r.owner),className:"w-5 h-5 rounded-full border "+(y?"border-gray-400":"border-white/20")}),t.jsxs("span",{className:"text-[10px] font-pixel opacity-50 group-hover/author:opacity-100 transition-opacity "+(y?"text-black":""),children:["@",r.owner]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"flex items-center gap-1 text-[10px] "+(y?"text-black/60":"opacity-40"),children:[t.jsx(x,{size:12})," ",t.jsx("span",{children:g})]}),t.jsx("div",{onClick:e=>e.stopPropagation(),children:t.jsx(Lt,{reactions:f,currentUsername:l,onReact:n,theme:a})})]})]})]})]})},Dt=({col:e,theme:s,onClick:r,onShare:a,isLiked:i,onLike:l})=>{const n="xp"===s,o="winamp"===s,c=e.exhibitIds?.length||0;return t.jsxs("div",{onClick:()=>r(e),className:"group relative aspect-[4/5] md:aspect-[3/4] cursor-pointer transition-all duration-300 hover:-translate-y-2 hover:shadow-2xl \n         "+(n?"rounded-t-lg border-2 border-[#0058EE] bg-white":o?"rounded-none border border-[#505050] bg-[#191919] text-[#00ff00]":"rounded-2xl overflow-hidden border-2 "+("dark"===s?"border-white/10 bg-dark-surface hover:border-green-500/30":"border-black/5 bg-white hover:border-black/20")),children:[n&&t.jsxs("div",{className:"h-6 bg-gradient-to-r from-[#0058EE] to-[#3F8CF3] rounded-t-[4px] flex items-center justify-between px-2 shadow-sm absolute top-0 left-0 right-0 z-20",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(U,{size:10,className:"text-white"}),t.jsx("span",{className:"text-white font-bold text-[10px] drop-shadow-md truncate font-sans",children:e.title})]}),t.jsx("div",{className:"flex gap-1",children:t.jsx("div",{className:"w-3 h-3 bg-[#D64434] rounded-[2px] border border-white/30 shadow-inner"})})]}),t.jsx("div",{className:"absolute inset-0 overflow-hidden "+(n?"top-6 border-b-2 border-[#0058EE]":""),children:t.jsx("img",{src:e.coverImage,alt:e.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110 opacity-80 group-hover:opacity-100"})}),t.jsxs("div",{className:"absolute inset-0 flex flex-col justify-between p-5 "+(n?"top-6 bg-gradient-to-t from-white/90 via-transparent to-transparent":"bg-gradient-to-t from-black/90 via-black/40 to-transparent"),children:[!n&&t.jsx("div",{className:"flex justify-between items-start",children:t.jsxs("div",{className:"px-2 py-1 rounded-lg backdrop-blur-md border text-[9px] font-pixel flex items-center gap-1.5 uppercase tracking-widest "+(o?"bg-black border-[#00ff00] text-[#00ff00]":"bg-black/40 border-white/10 text-white/90"),children:[t.jsx(S,{size:10,className:o?"text-[#00ff00]":"text-blue-400"})," –ö–û–õ–õ–ï–ö–¶–ò–Ø"]})}),n&&t.jsx("div",{})," ",t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("h3",{className:`${n?"text-blue-900 drop-shadow-sm font-sans":"font-pixel drop-shadow-md"} text-lg md:text-xl font-bold leading-tight mb-1 line-clamp-2 ${o?"text-[#00ff00]":n?"":"text-white"}`,children:e.title}),t.jsx("p",{className:"text-[10px] font-mono line-clamp-1 "+(n?"text-black/80":o?"text-[#00ff00] opacity-80":"text-white/60"),children:e.description||"–ë–µ–∑ –æ–ø–∏—Å–∞–Ω–∏—è"})]}),t.jsxs("div",{className:"pt-3 border-t flex items-center justify-between "+(n?"border-blue-900/20":o?"border-[#505050]":"border-white/10"),children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("img",{src:gt(e.owner),className:"w-6 h-6 rounded-full border "+(n?"border-blue-900/20":"border-white/30")}),t.jsxs("span",{className:"text-[10px] font-mono font-bold truncate max-w-[80px] "+(n?"text-black":o?"text-[#00ff00]":"text-white/80"),children:["@",e.owner]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[l&&t.jsxs("button",{onClick:e=>{e.stopPropagation(),l(e)},className:"flex items-center gap-1 px-2 py-1 rounded-lg backdrop-blur-sm border transition-colors "+(i?"bg-red-500/20 border-red-500/50 text-red-400":n?"bg-white/50 border-blue-900/10 text-blue-900 hover:bg-white":o?"bg-black border-[#505050] text-[#00ff00] hover:bg-[#202020]":"bg-white/10 border-white/10 text-white hover:bg-white/20"),children:[t.jsx(D,{size:14,fill:i?"currentColor":"none"}),t.jsx("span",{className:"text-[10px] font-bold",children:e.likes||0})]}),t.jsx("div",{className:"w-[1px] h-4 "+(n?"bg-black/20":"bg-white/20")}),t.jsx("div",{className:"px-2 py-1 rounded-lg text-[10px] font-bold backdrop-blur-sm "+(n?"bg-blue-600 text-white":o?"bg-[#00ff00] text-black":"bg-white/10 text-white"),children:c})]})]})]})]})]})},zt=({title:t,description:s,image:r,type:a="website",path:i=""})=>(e.useEffect(()=>{document.title=t;const e=(e,t)=>{let s=document.querySelector(`meta[name="${e}"]`);s||(s=document.createElement("meta"),s.setAttribute("name",e),document.head.appendChild(s)),s.setAttribute("content",t)},i=(e,t)=>{let s=document.querySelector(`meta[property="${e}"]`);s||(s=document.createElement("meta"),s.setAttribute("property",e),document.head.appendChild(s)),s.setAttribute("content",t)};s&&(e("description",s),i("og:description",s),e("twitter:description",s)),r&&(i("og:image",r),e("twitter:image",r)),i("og:type",a),i("og:title",t),e("twitter:title",t)},[t,s,r,a,i]),null),Ut=({title:e,children:s,className:r=""})=>t.jsxs("div",{className:`mb-6 bg-[#292929] border-t-2 border-l-2 border-r-2 border-b-2 border-t-[#505050] border-l-[#505050] border-r-[#101010] border-b-[#101010] ${r}`,children:[t.jsxs("div",{className:"h-4 bg-gradient-to-r from-wa-blue-light to-wa-blue-dark flex items-center justify-between px-1 cursor-default select-none mb-1",children:[t.jsx("span",{className:"text-white font-winamp text-[10px] tracking-widest uppercase",children:e}),t.jsx("div",{className:"w-2 h-2 bg-[#DCDCDC] border border-t-white border-l-white border-r-[#505050] border-b-[#505050]"})]}),t.jsx("div",{className:"p-2",children:s})]}),_t=({user:s,viewedProfileUsername:r,exhibits:a,collections:i,guestbook:l,theme:o,onBack:c,onLogout:d,onFollow:m,onChat:p,onExhibitClick:f,onReact:w,onAuthorClick:N,onCollectionClick:y,onShareCollection:k,onViewHallOfFame:E,onGuestbookPost:S,isEditingProfile:I,setIsEditingProfile:T,editTagline:O,setEditTagline:A,editBio:L,setEditBio:R,editStatus:z,setEditStatus:U,editTelegram:q,setEditTelegram:X,editPassword:Z,setEditPassword:J,onSaveProfile:Q,onProfileImageUpload:ee,onProfileCoverUpload:te,guestbookInput:se,setGuestbookInput:re,guestbookInputRef:ae,profileTab:ie,setProfileTab:le,refreshData:ne,onOpenSocialList:oe,onThemeChange:ce,onWishlistClick:de})=>{const xe=xt().users.find(e=>e.username===r)||{username:r,email:"ghost@matrix.net",tagline:"–¶–∏—Ñ—Ä–æ–≤–æ–π –ø—Ä–∏–∑—Ä–∞–∫",avatarUrl:gt(r),joinedDate:"Unknown",following:[],followers:[],achievements:[],telegram:"",settings:{}},me=s?.username===r,pe=s?.following?.includes(r)||!1,he="winamp"===o,ue=s.email?.includes("placeholder")||s.email?.includes("tg_"),[be,ge]=e.useState("SHELF"),[fe,we]=e.useState("ARTIFACTS"),[je,Ne]=e.useState(!1),[ve,ye]=e.useState(s?.settings||{theme:"dark"}),[ke,Ce]=e.useState(s.email);e.useEffect(()=>{s.email!==ke&&Ce(s.email)},[s.email]);const Ee=a.filter(e=>e.owner===r),Se=i.filter(e=>e.owner===r),Ie=xt().wishlist.filter(e=>e.owner===r),Te=a.filter(e=>e.likedBy?.includes(r)),Oe=l.filter(e=>e.targetUser.toLowerCase()===r.toLowerCase()).sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()),Ae=Ee.filter(e=>!e.isDraft),Le=e.useMemo(()=>0===Ae.length?null:[...Ae].sort((e,t)=>2*t.likes+t.views-(2*e.likes+e.views))[0],[Ae]);e.useMemo(()=>Ae.reduce((e,t)=>e+(t.views||0),0)+15*(xe.followers?.length||0)+1337,[Ae,xe]);const Re=async e=>{confirm("–£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å?")&&(await(async e=>{Qe.guestbook=Qe.guestbook.filter(t=>t.id!==e),rt(),await nt(e),await it(`/guestbook/${e}`,"DELETE")})(e),ne())},De=async(e,t)=>{if(!me)return;const r={...ve,[e]:t};ye(r),"theme"===e&&ce&&ce(t);const a={...s,settings:r};await ut(a)};return t.jsxs("div",{className:"max-w-4xl mx-auto space-y-4 animate-in slide-in-from-right-8 fade-in duration-500 pb-32 "+(he?"font-winamp text-wa-green":""),children:[t.jsx(zt,{title:`@${xe.username} | –ü—Ä–æ—Ñ–∏–ª—å`}),!he&&t.jsxs("button",{onClick:c,className:"flex items-center gap-2 hover:underline opacity-70 font-pixel text-xs px-4 md:px-0",children:[t.jsx(_,{size:16})," –ù–ê–ó–ê–î"]}),t.jsx("div",{className:he?"":"md:rounded-3xl border-b md:border overflow-hidden relative "+("dark"===o?"bg-dark-surface border-dark-dim":"bg-white border-light-dim"),children:he?t.jsx(Ut,{title:`USER: ${xe.username}`,children:t.jsxs("div",{className:"flex gap-4 items-start",children:[t.jsx("div",{className:"w-20 h-20 border-2 border-inset border-[#505050] p-1 bg-black",children:t.jsx("img",{src:xe.avatarUrl,className:"w-full h-full object-cover grayscale opacity-80 hover:opacity-100"})}),t.jsxs("div",{className:"flex-1 space-y-1",children:[t.jsx("div",{className:"text-[14px] text-wa-gold flex justify-between",children:t.jsx("span",{children:xe.username})}),t.jsx("div",{className:"text-[12px] opacity-80",children:xe.tagline}),t.jsxs("div",{className:"text-[12px] flex gap-2 mt-2",children:[t.jsxs("span",{onClick:()=>oe(xe.username,"followers"),className:"cursor-pointer hover:text-white",children:["–ü–æ–¥–ø–∏—Å—á–∏–∫–∏: ",xe.followers?.length||0]}),t.jsxs("span",{onClick:()=>oe(xe.username,"following"),className:"cursor-pointer hover:text-white",children:["–ü–æ–¥–ø–∏—Å–∫–∏: ",xe.following?.length||0]})]}),me&&t.jsx("button",{onClick:d,className:"px-2 border border-[#505050] bg-[#292929] text-[10px] hover:text-red-500 mt-2",children:"–í–´–ô–¢–ò"})]})]})}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"h-32 md:h-52 bg-gray-800 relative group",children:[xe.coverUrl?t.jsx("img",{src:xe.coverUrl,className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full "+("dark"===o?"bg-gradient-to-r from-green-900/20 to-black":"bg-gradient-to-r from-gray-100 to-gray-300")}),I&&me&&t.jsxs("label",{className:"absolute top-4 right-4 bg-black/50 text-white p-2 rounded-xl cursor-pointer hover:bg-black/70 border border-white/20 flex items-center gap-2 backdrop-blur-sm",children:[t.jsx(M,{size:16})," ",t.jsx("span",{className:"text-[10px] font-pixel",children:"–û–ë–õ–û–ñ–ö–ê"}),t.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:te})]})]}),t.jsxs("div",{className:"px-4 pb-6 relative",children:[t.jsxs("div",{className:"flex flex-col items-start -mt-10 md:-mt-12 gap-4 mb-2",children:[t.jsxs("div",{className:"relative group",children:[t.jsx("div",{className:"w-24 h-24 md:w-32 md:h-32 rounded-2xl overflow-hidden border-4 bg-black shadow-lg "+("dark"===o?"border-dark-surface":"border-white"),children:t.jsx("img",{src:xe.avatarUrl,className:"w-full h-full object-cover"})}),I&&me&&t.jsxs("label",{className:"absolute inset-0 bg-black/60 flex items-center justify-center cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity rounded-2xl",children:[t.jsx(M,{size:24,className:"text-white"}),t.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:ee})]})]}),t.jsx("div",{className:"flex-1 w-full",children:t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl md:text-3xl font-pixel font-bold flex items-center gap-2",children:["@",xe.username]}),t.jsxs("p",{className:"text-xs font-mono opacity-60 mt-1",children:["–í —Å–µ—Ç–∏ —Å ",xe.joinedDate]})]}),t.jsxs("div",{className:"flex items-center gap-6 border-t md:border-t-0 border-white/5 pt-3 md:pt-0",children:[t.jsxs("button",{onClick:()=>oe(xe.username,"followers"),className:"flex flex-col items-center group",children:[t.jsx("span",{className:"font-pixel text-lg leading-none group-hover:text-green-500",children:xe.followers?.length||0}),t.jsx("span",{className:"text-[9px] font-pixel opacity-50 uppercase group-hover:opacity-100",children:"–§–æ–ª–ª–æ–≤–µ—Ä—ã"})]}),t.jsxs("button",{onClick:()=>oe(xe.username,"following"),className:"flex flex-col items-center group",children:[t.jsx("span",{className:"font-pixel text-lg leading-none group-hover:text-green-500",children:xe.following?.length||0}),t.jsx("span",{className:"text-[9px] font-pixel opacity-50 uppercase group-hover:opacity-100",children:"–ü–æ–¥–ø–∏—Å–∫–∏"})]}),t.jsxs("button",{onClick:E,className:"flex flex-col items-center group",children:[t.jsx(F,{size:18,className:"group-hover:text-yellow-500"}),t.jsx("span",{className:"text-[9px] font-pixel opacity-50 uppercase group-hover:opacity-100",children:"–ù–∞–≥—Ä–∞–¥—ã"})]})]})]})})]}),t.jsx("div",{className:"space-y-4",children:I&&me?t.jsxs("div",{className:"space-y-4 bg-black/5 p-4 rounded-xl border border-dashed border-white/10",children:[ue&&t.jsxs("div",{className:"bg-red-500/10 border border-red-500/50 p-3 rounded-lg flex items-start gap-3",children:[t.jsx(h,{size:20,className:"text-red-500 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-red-500 font-bold text-xs mb-1",children:"–ù–ï–û–ë–•–û–î–ò–ú–û –ü–†–ò–í–Ø–ó–ê–¢–¨ EMAIL"}),t.jsx("p",{className:"text-[10px] opacity-70",children:"–í—ã –≤–æ—à–ª–∏ —á–µ—Ä–µ–∑ Telegram. –í–∞—à —Ç–µ–∫—É—â–∏–π email - –≤—Ä–µ–º–µ–Ω–Ω—ã–π. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π email –∏ –ø–∞—Ä–æ–ª—å, —á—Ç–æ–±—ã –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É."})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-pixel opacity-50 uppercase tracking-widest mb-1 block",children:"–°—Ç–∞—Ç—É—Å / –°–ª–æ–≥–∞–Ω"}),t.jsx("input",{value:O,onChange:e=>A(e.target.value),className:"w-full bg-black/20 border border-white/10 rounded-lg px-3 py-2 font-mono text-xs focus:border-green-500 outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-pixel opacity-50 uppercase tracking-widest mb-1 block",children:"–û —Å–µ–±–µ"}),t.jsx("textarea",{value:L,onChange:e=>R(e.target.value),rows:3,className:"w-full bg-black/20 border border-white/10 rounded-lg px-3 py-2 font-mono text-xs focus:border-green-500 outline-none resize-none"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-2 border-t border-white/5",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"text-[10px] font-pixel opacity-50 uppercase tracking-widest mb-1 flex items-center gap-2",children:[t.jsx(u,{size:12})," Email (–î–ª—è –≤—Ö–æ–¥–∞)"]}),t.jsx("input",{value:ke,onChange:e=>Ce(e.target.value),className:"w-full bg-black/20 border border-white/10 rounded-lg px-3 py-2 font-mono text-xs focus:border-green-500 outline-none"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"text-[10px] font-pixel opacity-50 uppercase tracking-widest mb-1 flex items-center gap-2",children:[t.jsx(P,{size:12})," –ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{value:Z,onChange:e=>J(e.target.value),type:je?"text":"password",placeholder:"–ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å...",className:"flex-1 bg-black/20 border border-white/10 rounded-lg px-3 py-2 font-mono text-xs focus:border-green-500 outline-none"}),t.jsx("button",{onClick:()=>Ne(!je),className:"p-2 border rounded-lg hover:bg-white/10",children:t.jsx(x,{size:14})}),t.jsx("button",{onClick:()=>{const e="ABCabc123!@#";let t="";for(let s=0;s<12;s++)t+=e.charAt(Math.floor(12*Math.random()));J(t),Ne(!0)},className:"p-2 border rounded-lg hover:bg-white/10",children:t.jsx(b,{size:14})})]})]})]}),t.jsxs("div",{className:"flex gap-2 pt-2",children:[t.jsx("button",{onClick:async()=>{if(!me)return;const e={...s,tagline:O,bio:L,status:z,telegram:q};ke&&ke.trim()?e.email=ke.trim():s.email&&(e.email=s.email),Z&&(e.password=Z),await ut(e),T(!1),J("")},className:"flex-1 bg-green-600 text-white px-4 py-2 rounded font-bold text-xs uppercase",children:"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"}),t.jsx("button",{onClick:()=>T(!1),className:"px-4 py-2 rounded border hover:bg-white/10 text-xs uppercase",children:"–û—Ç–º–µ–Ω–∞"})]})]}):t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-2",children:[t.jsx("p",{className:"font-mono font-bold text-sm leading-tight",children:xe.tagline}),t.jsx("div",{className:"flex gap-2 w-full md:w-auto mt-2 md:mt-0",children:me?t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>{A(s?.tagline||""),R(s?.bio||""),Ce(s?.email||""),T(!0)},className:"flex-1 md:flex-none px-3 py-1.5 border rounded-lg text-[10px] uppercase font-bold hover:bg-white/10 flex items-center justify-center gap-2",children:[t.jsx(B,{size:12})," –†–µ–¥."]}),t.jsx("button",{onClick:d,className:"px-3 py-1.5 border border-red-500/30 text-red-500 rounded-lg",children:t.jsx(G,{size:12})})]}):t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>m(xe.username),className:"flex-1 md:flex-none px-4 py-2 md:py-1.5 rounded-lg font-bold font-pixel text-[10px] uppercase transition-all "+(pe?"border border-white/20 opacity-60":"bg-green-500 text-black border-green-500"),children:pe?"–ü–æ–¥–ø–∏—Å–∞–Ω":"–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è"}),t.jsx("button",{onClick:()=>p(xe.username),className:"px-4 py-2 md:py-1.5 border rounded-lg hover:bg-white/10",children:t.jsx(C,{size:14})})]})})]}),xe.bio&&t.jsx("p",{className:"font-mono text-xs opacity-70 whitespace-pre-wrap leading-relaxed max-w-2xl",children:xe.bio}),me&&ue&&!I&&t.jsxs("div",{onClick:()=>T(!0),className:"mt-2 bg-red-500/10 border border-red-500/50 p-2 rounded flex items-center gap-2 cursor-pointer hover:bg-red-500/20",children:[t.jsx(h,{size:14,className:"text-red-500"}),t.jsx("span",{className:"text-[10px] text-red-400 font-bold",children:'–ù–∞–∂–º–∏—Ç–µ "–†–µ–¥.", —á—Ç–æ–±—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Email –∏ –ü–∞—Ä–æ–ª—å.'})]})]})})]})]})}),"SHELF"===be&&!I&&Le&&t.jsx("div",{className:"px-0 md:px-0",children:t.jsxs("div",{className:"relative overflow-hidden border rounded-xl flex h-28 md:h-32 group cursor-pointer "+(he?"bg-[#191919] border-[#505050]":"bg-gradient-to-r from-yellow-900/20 to-transparent border-yellow-500/20 hover:border-yellow-500/40"),onClick:()=>f(Le),children:[t.jsxs("div",{className:"w-24 md:w-32 h-full relative flex-shrink-0 bg-black",children:[t.jsx("img",{src:"string"==typeof Le.imageUrls[0]?Le.imageUrls[0]:Le.imageUrls[0]?.thumbnail||"https://placehold.co/600x400?text=NO+IMAGE",className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity"}),t.jsxs("div",{className:"absolute top-0 left-0 bg-yellow-500 text-black text-[8px] font-bold px-1.5 py-0.5 rounded-br-lg z-10 font-pixel",children:[t.jsx(v,{size:8,className:"inline mr-0.5"})," SHOWCASE"]})]}),t.jsxs("div",{className:"flex-1 p-3 flex flex-col justify-center min-w-0",children:[t.jsx("div",{className:"text-[9px] uppercase tracking-widest mb-1 "+(he?"text-[#00ff00]":"text-yellow-500 opacity-70"),children:"–ì–û–†–î–û–°–¢–¨ –ö–û–õ–õ–ï–ö–¶–ò–ò"}),t.jsx("h3",{className:"font-pixel text-sm md:text-lg font-bold truncate mb-1 "+(he?"text-[#00ff00]":"text-white"),children:Le.title}),t.jsxs("div",{className:"flex items-center gap-3 text-[10px] font-mono opacity-50",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(D,{size:10,className:"text-red-500"})," ",Le.likes]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(x,{size:10,className:"text-blue-400"})," ",Le.views]}),t.jsx("span",{className:"truncate max-w-[80px] border border-white/10 px-1 rounded",children:Le.category})]})]}),t.jsx("div",{className:"w-8 flex items-center justify-center border-l border-white/5 opacity-50 group-hover:opacity-100 group-hover:bg-white/5",children:t.jsx("div",{className:"border-t-2 border-r-2 border-white w-2 h-2 rotate-45 transform"})})]})}),t.jsxs("div",{className:"flex mb-4 mt-2 px-0 md:px-0 "+(he?"gap-1":"border-b border-gray-500/30"),children:[t.jsx("button",{onClick:()=>ge("SHELF"),className:"flex-1 pb-3 text-center "+("SHELF"===be?"border-b-2 border-green-500 text-green-500":"opacity-50"),children:t.jsx(H,{size:20,className:"mx-auto"})}),t.jsx("button",{onClick:()=>ge("FAVORITES"),className:"flex-1 pb-3 text-center "+("FAVORITES"===be?"border-b-2 border-green-500 text-green-500":"opacity-50"),children:t.jsx(D,{size:20,className:"mx-auto"})}),t.jsx("button",{onClick:()=>ge("LOGS"),className:"flex-1 pb-3 text-center "+("LOGS"===be?"border-b-2 border-green-500 text-green-500":"opacity-50"),children:t.jsx(C,{size:20,className:"mx-auto"})}),t.jsx("button",{onClick:()=>ge("WISHLIST"),className:"flex-1 pb-3 text-center "+("WISHLIST"===be?"border-b-2 border-green-500 text-green-500":"opacity-50"),children:t.jsx(j,{size:20,className:"mx-auto"})}),me&&t.jsx("button",{onClick:()=>ge("CONFIG"),className:"flex-1 pb-3 text-center "+("CONFIG"===be?"border-b-2 border-green-500 text-green-500":"opacity-50"),children:t.jsx($,{size:20,className:"mx-auto"})})]}),"SHELF"===be&&t.jsxs("div",{className:"space-y-6 animate-in fade-in px-0 md:px-0",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-4 px-2 md:px-0",children:[t.jsxs("button",{onClick:()=>we("ARTIFACTS"),className:"text-xs font-pixel uppercase "+("ARTIFACTS"===fe?"text-green-500 font-bold":"opacity-50"),children:["–ü—Ä–µ–¥–º–µ—Ç—ã (",Ae.length,")"]}),t.jsxs("button",{onClick:()=>we("COLLECTIONS"),className:"text-xs font-pixel uppercase "+("COLLECTIONS"===fe?"text-green-500 font-bold":"opacity-50"),children:["–ö–æ–ª–ª–µ–∫—Ü–∏–∏ (",Se.length,")"]})]}),"ARTIFACTS"===fe&&t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-4",children:[0===Ae.length&&t.jsx("div",{className:"col-span-full text-center opacity-50 text-xs py-8",children:"–ù–µ—Ç –ø—Ä–µ–¥–º–µ—Ç–æ–≤"}),Ae.map(e=>t.jsx(Rt,{item:e,theme:o,onClick:f,currentUsername:s.username,onReact:()=>w(e.id),onAuthorClick:()=>{}},e.id))]}),"COLLECTIONS"===fe&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[0===Se.length&&t.jsx("div",{className:"col-span-full text-center opacity-50 text-xs py-8",children:"–ù–µ—Ç –∫–æ–ª–ª–µ–∫—Ü–∏–π"}),Se.map(e=>t.jsx(Dt,{col:e,theme:o,onClick:y,onShare:k},e.id))]})]}),"FAVORITES"===be&&t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-4 animate-in fade-in px-0 md:px-0",children:[Te.map(e=>t.jsx(Rt,{item:e,theme:o,onClick:f,currentUsername:s.username,onReact:()=>w(e.id),onAuthorClick:N},e.id)),0===Te.length&&t.jsx("div",{className:"col-span-full text-center opacity-50 py-8 text-xs uppercase",children:"–ü—É—Å—Ç–æ"})]}),"WISHLIST"===be&&t.jsxs("div",{className:"space-y-6 animate-in fade-in px-0 md:px-0",children:[t.jsxs("button",{onClick:()=>{const e=`${window.location.origin}/u/${r}/wishlist`;navigator.clipboard.writeText(e),alert("–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!")},className:"w-full flex items-center justify-center gap-2 text-xs font-bold uppercase py-3 rounded-xl border-2 border-dashed "+(he?"border-[#00ff00] text-[#00ff00]":"border-white/20 opacity-80 hover:opacity-100"),children:[t.jsx(Y,{size:16})," –°–ö–û–ü–ò–†–û–í–ê–¢–¨ –°–°–´–õ–ö–£"]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-4",children:Ie.map(e=>t.jsx(At,{item:e,theme:o,onClick:de,onUserClick:N},e.id))})]}),"LOGS"===be&&t.jsxs("div",{className:"space-y-6 animate-in fade-in px-0 md:px-0",children:[t.jsxs("div",{className:"p-4 rounded-xl border flex gap-3 "+(he?"bg-[#191919] border-[#505050]":"bg-white/5 border-white/10"),children:[t.jsx("input",{ref:ae,value:se,onChange:e=>re(e.target.value),placeholder:"–û—Å—Ç–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å...",className:"flex-1 bg-transparent border-none outline-none text-sm font-mono"}),t.jsx("button",{onClick:()=>{se.trim()&&(S(se),re(""))},className:"text-green-500",children:t.jsx(n,{size:16})})]}),t.jsx("div",{className:"space-y-4",children:Oe.map(e=>t.jsxs("div",{className:"p-4 rounded-xl border "+(he?"bg-black border-[#505050]":"bg-white/5 border-white/10"),children:[t.jsxs("div",{className:"flex justify-between items-start mb-2",children:[t.jsxs("div",{className:"font-bold text-xs",children:["@",e.author]}),me&&t.jsx("button",{onClick:()=>Re(e.id),children:t.jsx(V,{size:12,className:"opacity-50 hover:text-red-500"})})]}),t.jsx("p",{className:"text-sm font-mono opacity-80",children:e.text})]},e.id))})]}),me&&"CONFIG"===be&&t.jsxs("div",{className:"p-6 rounded-xl border flex flex-col gap-6 animate-in fade-in bg-white/5 border-white/10 mx-0 md:mx-0",children:[t.jsxs("h3",{className:"font-pixel text-[10px] uppercase tracking-[0.2em] mb-4 flex items-center gap-2 opacity-70",children:[t.jsx(W,{size:14})," –í–Ω–µ—à–Ω–∏–π –≤–∏–¥"]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsx("button",{onClick:()=>De("theme","dark"),className:"p-4 border rounded hover:bg-white/10 text-xs",children:"Matrix"}),t.jsx("button",{onClick:()=>De("theme","light"),className:"p-4 border rounded hover:bg-white/10 text-xs",children:"Light"}),t.jsx("button",{onClick:()=>De("theme","xp"),className:"p-4 border rounded hover:bg-white/10 text-xs",children:"Windows XP"}),t.jsx("button",{onClick:()=>De("theme","winamp"),className:"p-4 border rounded hover:bg-white/10 text-green-500 border-green-500 text-xs",children:"Winamp"})]}),t.jsxs("div",{className:"pt-6 border-t border-white/10",children:[t.jsxs("h3",{className:"font-pixel text-[10px] uppercase tracking-[0.2em] mb-4 flex items-center gap-2 text-red-500",children:[t.jsx(K,{size:14})," Danger Zone"]}),t.jsxs("button",{onClick:async()=>{confirm("–í–ù–ò–ú–ê–ù–ò–ï! –≠—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—Å—Ç–∏—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π –∫—ç—à.")&&(await(async()=>{const e=await tt();await e.clear("exhibits"),await e.clear("collections"),await e.clear("users"),await e.clear("notifications"),await e.clear("messages"),await e.clear("generic"),window.location.reload()})(),window.location.reload())},className:"w-full py-4 border-2 border-red-500/50 text-red-500 rounded-xl hover:bg-red-500/10 font-bold text-xs uppercase flex items-center justify-center gap-2",children:[t.jsx(g,{size:16})," HARD RESET"]})]})]})]})},Mt=({targetItem:s,currentUser:r,userInventory:a,targetUserInventory:i=[],recipient:l,onClose:n,isWishlist:o=!1,wishlistId:c})=>{const[d,x]=e.useState(1),[m,p]=e.useState("DIRECT"),[u,b]=e.useState([]),[j,N]=e.useState(!o&&s?[s.id]:[]),[v,y]=e.useState(""),[k,C]=e.useState(""),[E,S]=e.useState(!1),I=e.useMemo(()=>a.filter(e=>!e.isDraft&&!e.lockedInTradeId),[a]);i.length;return t.jsx("div",{className:"fixed inset-0 z-[100] bg-black/90 backdrop-blur-md flex items-center justify-center p-4 animate-in zoom-in-95",children:t.jsxs("div",{className:"w-full max-w-2xl max-h-[90vh] h-full flex flex-col bg-[#1a1a1a] border border-white/10 rounded-2xl shadow-2xl overflow-hidden font-sans",children:[t.jsxs("div",{className:"bg-[#222] p-4 flex justify-between items-center border-b border-white/5 flex-shrink-0",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(g,{size:20,className:"text-green-500"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-bold text-sm tracking-widest uppercase font-pixel text-white",children:"–¢–û–†–ì–û–í–´–ô –¢–ï–†–ú–ò–ù–ê–õ"}),t.jsxs("div",{className:"text-[10px] opacity-50 text-white",children:["–°–¥–µ–ª–∫–∞ —Å @",l.username]})]})]}),t.jsx("button",{onClick:n,className:"hover:text-red-500 transition-colors text-white",children:t.jsx(q,{size:24})})]}),t.jsxs("div",{className:"flex border-b border-white/5 flex-shrink-0",children:[t.jsx("div",{className:"flex-1 h-1 "+(d>=1?"bg-green-500":"bg-white/10")}),t.jsx("div",{className:"flex-1 h-1 "+(d>=2?"bg-green-500":"bg-white/10")}),t.jsx("div",{className:"flex-1 h-1 "+(d>=3?"bg-green-500":"bg-white/10")})]}),t.jsxs("div",{className:"flex-1 overflow-hidden relative p-4 flex flex-col min-h-0",children:[1===d&&t.jsxs("div",{className:"space-y-4 overflow-y-auto max-h-[60vh] p-1",children:[t.jsx("h3",{className:"font-pixel text-center text-lg mb-6 text-white",children:"–í–´–ë–ï–†–ò–¢–ï –¢–ò–ü –°–î–ï–õ–ö–ò"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("button",{onClick:()=>p("DIRECT"),className:"p-4 border-2 rounded-xl flex items-center gap-4 transition-all "+("DIRECT"===m?"border-blue-500 bg-blue-500/10":"border-white/10 hover:border-white/30"),children:[t.jsx(g,{size:24,className:"DIRECT"===m?"text-blue-500":"opacity-50"}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-bold text-sm text-white",children:"–ü–†–Ø–ú–û–ô –û–ë–ú–ï–ù"}),t.jsx("div",{className:"text-[10px] opacity-50 mt-1",children:"1 –ø—Ä–µ–¥–º–µ—Ç ‚áÑ 1 –ø—Ä–µ–¥–º–µ—Ç"})]})]}),t.jsxs("button",{onClick:()=>p("MULTI"),className:"p-4 border-2 rounded-xl flex items-center gap-4 transition-all "+("MULTI"===m?"border-purple-500 bg-purple-500/10":"border-white/10 hover:border-white/30"),children:[t.jsx(Z,{size:24,className:"MULTI"===m?"text-purple-500":"opacity-50"}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-bold text-sm text-white",children:"–ú–£–õ–¨–¢–ò-–¢–†–ï–ô–î"}),t.jsx("div",{className:"text-[10px] opacity-50 mt-1",children:"–ú–Ω–æ–≥–æ ‚áÑ –ú–Ω–æ–≥–æ"})]})]}),t.jsxs("button",{onClick:()=>p("MONEY"),className:"p-4 border-2 rounded-xl flex items-center gap-4 transition-all "+("MONEY"===m?"border-green-500 bg-green-500/10":"border-white/10 hover:border-white/30"),children:[t.jsx(J,{size:24,className:"MONEY"===m?"text-green-500":"opacity-50"}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-bold text-sm text-white",children:"–ó–ê –î–ï–ù–¨–ì–ò (RUB)"}),t.jsx("div",{className:"text-[10px] opacity-50 mt-1",children:o?"–ü—Ä–æ–¥–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç":"–ö—É–ø–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç"})]})]}),t.jsxs("button",{onClick:()=>p("GIFT"),className:"p-4 border-2 rounded-xl flex items-center gap-4 transition-all "+("GIFT"===m?"border-pink-500 bg-pink-500/10":"border-white/10 hover:border-white/30"),children:[t.jsx(w,{size:24,className:"GIFT"===m?"text-pink-500":"opacity-50"}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-bold text-sm text-white",children:"–ü–û–î–ê–†–û–ö"}),t.jsx("div",{className:"text-[10px] opacity-50 mt-1",children:"–ë–µ–∑–≤–æ–∑–º–µ–∑–¥–Ω–æ"})]})]})]})]}),2===d&&t.jsxs("div",{className:"flex flex-col h-full min-h-0",children:["MONEY"===m&&t.jsxs("div",{className:"mb-4 p-4 bg-green-900/20 border border-green-500/30 rounded-xl flex items-center gap-4",children:[t.jsx(f,{size:24,className:"text-green-500"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"text-[10px] font-bold text-green-500 uppercase block mb-1",children:"–°—É–º–º–∞ —Å–¥–µ–ª–∫–∏ (RUB)"}),t.jsx("input",{type:"number",value:v,onChange:e=>y(e.target.value),placeholder:"5000",className:"w-full bg-transparent border-b border-green-500 text-xl font-mono text-white focus:outline-none"})]})]}),t.jsxs("div",{className:"flex-1 flex flex-col md:flex-row min-h-0 gap-4",children:[t.jsxs("div",{className:"flex-1 border border-white/10 rounded-xl flex flex-col min-h-0 "+("MONEY"!==m||o?"":"opacity-50 pointer-events-none"),children:[t.jsxs("div",{className:"p-3 bg-black/20 text-center border-b border-white/10 font-bold text-xs uppercase text-green-500",children:["–í–´ –û–¢–î–ê–ï–¢–ï (","MONEY"!==m||o?u.length:"–î–ï–ù–¨–ì–ò",")"]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-2 grid grid-cols-3 gap-2 content-start custom-scrollbar",children:[I.map(e=>t.jsxs("div",{onClick:()=>{return t=e.id,void b("MONEY"!==m?"DIRECT"===m?[t]:e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]:o?[t]:[]);var t},className:"relative aspect-square border-2 rounded cursor-pointer "+(u.includes(e.id)?"border-green-500":"border-white/10 hover:border-white/30"),children:[t.jsx("img",{src:"string"==typeof e.imageUrls[0]?e.imageUrls[0]:e.imageUrls[0]?.thumbnail||"https://placehold.co/600x400?text=NO+IMAGE",className:"w-full h-full object-cover rounded-sm"}),u.includes(e.id)&&t.jsx("div",{className:"absolute inset-0 bg-green-500/20 flex items-center justify-center",children:t.jsx(Q,{className:"text-green-500 font-bold"})})]},e.id)),0===I.length&&t.jsx("div",{className:"col-span-3 text-center text-xs opacity-30 py-4 text-white",children:"–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø—É—Å—Ç"})]})]}),"GIFT"!==m&&t.jsxs("div",{className:"flex-1 border border-white/10 rounded-xl flex flex-col min-h-0 bg-white/5 "+("MONEY"===m&&o?"opacity-50 pointer-events-none":""),children:[t.jsxs("div",{className:"p-3 bg-black/20 text-center border-b border-white/10 font-bold text-xs uppercase text-blue-500",children:["–í–´ –ü–û–õ–£–ß–ê–ï–¢–ï (","MONEY"===m&&o?"–î–ï–ù–¨–ì–ò":j.length,")"]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-2 grid grid-cols-3 gap-2 content-start custom-scrollbar",children:[s&&!o&&t.jsxs("div",{onClick:()=>{return e=s.id,void(("GIFT"!==m||o)&&N("MONEY"!==m?"DIRECT"===m?[e]:t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]:o?[]:[e]));var e},className:"relative aspect-square border-2 rounded cursor-pointer "+(j.includes(s.id)?"border-blue-500":"border-white/10 hover:border-white/30"),children:[t.jsx("img",{src:"string"==typeof s.imageUrls[0]?s.imageUrls[0]:s.imageUrls[0]?.thumbnail||"https://placehold.co/600x400?text=NO+IMAGE",className:"w-full h-full object-cover rounded-sm"}),t.jsx("div",{className:"absolute top-0 right-0 bg-yellow-500 text-black text-[8px] px-1 font-bold",children:"–¶–ï–õ–¨"}),j.includes(s.id)&&t.jsx("div",{className:"absolute inset-0 bg-blue-500/20 flex items-center justify-center",children:t.jsx(Q,{className:"text-blue-500 font-bold"})})]}),(!s||o)&&0===i.length&&t.jsx("div",{className:"col-span-3 text-center text-xs opacity-30 py-4 text-white",children:o&&"MONEY"===m?"–í—ã –ø–æ–ª—É—á–∏—Ç–µ –æ–ø–ª–∞—Ç—É":"–ü—Ä–µ–¥–º–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã"})]})]})]})]}),3===d&&t.jsxs("div",{className:"flex flex-col h-full space-y-4 overflow-y-auto p-1 custom-scrollbar",children:[t.jsxs("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10",children:[t.jsxs("h3",{className:"font-pixel text-xs opacity-50 mb-2 text-white",children:["–°–û–û–ë–©–ï–ù–ò–ï –î–õ–Ø @",l.username]}),t.jsx("textarea",{value:k,onChange:e=>C(e.target.value),className:"w-full bg-black/30 border border-white/10 rounded-lg p-3 text-sm font-mono focus:border-green-500 outline-none h-20 resize-none text-white",placeholder:"–ü—Ä–∏–≤–µ—Ç! –ü—Ä–µ–¥–ª–∞–≥–∞—é –æ–±–º–µ–Ω..."})]}),t.jsxs("div",{className:"flex items-center justify-between gap-4 p-4 border border-white/10 rounded-xl bg-black/20",children:[t.jsxs("div",{className:"text-center flex-1",children:[t.jsx("div",{className:"text-[10px] font-bold text-green-500 mb-1 uppercase",children:"–û–¢–î–ê–ï–¢–ï"}),"MONEY"!==m||o?t.jsxs("div",{className:"text-lg font-pixel text-white",children:[u.length," ",t.jsx("span",{className:"text-xs",children:"–ü–†–ï–î–ú."})]}):t.jsxs("div",{className:"text-lg font-pixel text-green-400",children:[v," ‚ÇΩ"]})]}),t.jsx("div",{className:"flex flex-col items-center opacity-50 text-white",children:t.jsx(Z,{})}),t.jsxs("div",{className:"text-center flex-1",children:[t.jsx("div",{className:"text-[10px] font-bold text-blue-500 mb-1 uppercase",children:"–ü–û–õ–£–ß–ê–ï–¢–ï"}),"MONEY"===m&&o?t.jsxs("div",{className:"text-lg font-pixel text-blue-400",children:[v," ‚ÇΩ"]}):t.jsxs("div",{className:"text-lg font-pixel text-white",children:[j.length," ",t.jsx("span",{className:"text-xs",children:"–ü–†–ï–î–ú."})]})]})]}),o&&t.jsx("div",{className:"p-3 bg-purple-500/10 border border-purple-500/30 rounded-xl text-center",children:t.jsx("p",{className:"text-[10px] text-purple-300 font-bold font-pixel uppercase",children:"–ò–°–ü–û–õ–ù–ï–ù–ò–ï –ñ–ï–õ–ê–ù–ò–Ø (WISHLIST)"})}),t.jsxs("div",{className:"text-center text-[10px] opacity-50 font-mono text-white",children:[t.jsx(h,{size:12,className:"inline mr-1"}),"–ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ. –°–¥–µ–ª–∫–∞ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Å–æ–≥–ª–∞—Å–∏—è –≤—Ç–æ—Ä–æ–π —Å—Ç–æ—Ä–æ–Ω—ã."]})]})]}),t.jsxs("div",{className:"p-4 bg-[#222] border-t border-white/5 flex justify-between flex-shrink-0",children:[d>1?t.jsx("button",{onClick:()=>x(e=>e-1),className:"px-6 py-3 border border-white/20 rounded-xl font-bold text-xs uppercase hover:bg-white/5 text-white",children:"–ù–∞–∑–∞–¥"}):t.jsx("div",{}),d<3?t.jsxs("button",{onClick:()=>{if(1===d)x(2);else if(2===d){if("MONEY"===m){if(!v||parseInt(v)<=0)return alert("–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—É–º–º—É –≤ —Ä—É–±–ª—è—Ö");if(o){if(0===u.length)return alert("–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–¥–º–µ—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –ø—Ä–æ–¥–∞–µ—Ç–µ")}else if(0===j.length)return alert("–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–¥–º–µ—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ö–æ—Ç–∏—Ç–µ –∫—É–ø–∏—Ç—å")}else if("GIFT"===m){if(0===u.length)return alert("–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥–∞—Ä–æ–∫")}else if(o){if(0===u.length)return alert("–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–¥–º–µ—Ç –¥–ª—è –æ–±–º–µ–Ω–∞")}else{if(0===j.length)return alert("–í—ã–±–µ—Ä–∏—Ç–µ, —á—Ç–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–æ–ª—É—á–∏—Ç—å");if(0===u.length)return alert("–í—ã–±–µ—Ä–∏—Ç–µ, —á—Ç–æ –≤—ã –æ—Ç–¥–∞–µ—Ç–µ")}x(3)}},className:"px-8 py-3 bg-green-600 text-black font-bold rounded-xl text-xs uppercase hover:bg-green-500 flex items-center gap-2",children:["–î–∞–ª–µ–µ ",t.jsx(X,{size:16})]}):t.jsx("button",{onClick:async()=>{S(!0);try{await(async()=>{})((l.username,v&&parseInt(v))),alert("–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!"),n()}catch(e){alert("–û—à–∏–±–∫–∞: "+e)}finally{S(!1)}},disabled:E,className:"px-8 py-3 bg-green-600 text-black font-bold rounded-xl text-xs uppercase hover:bg-green-500 flex items-center gap-2 shadow-lg shadow-green-900/50",children:E?"–û–¢–ü–†–ê–í–ö–ê...":"–û–¢–ü–†–ê–í–ò–¢–¨"})]})]})})},Ft=({onSwipeLeft:t,onSwipeRight:s,onSwipeUp:r,onSwipeDown:a})=>{const[i,l]=e.useState(null),[n,o]=e.useState(null);return{onTouchStart:e=>{o(null),l({x:e.targetTouches[0].clientX,y:e.targetTouches[0].clientY})},onTouchMove:e=>{o({x:e.targetTouches[0].clientX,y:e.targetTouches[0].clientY})},onTouchEnd:()=>{if(!i||!n)return;const e=i.x-n.x,l=i.y-n.y,o=e>75,c=e<-75,d=l>75,x=l<-75;Math.abs(e)>Math.abs(l)?(o&&t&&t(),c&&s&&s()):(d&&r&&r(),x&&a&&a())}}},Pt=(e,s)=>{if(!e)return"";return e.split(/(@\w+)/g).map((e,r)=>{if(e.startsWith("@")){const a=e.slice(1);return t.jsx("span",{onClick:e=>{e.stopPropagation(),s(a)},className:"text-blue-400 cursor-pointer hover:underline font-bold",children:e},r)}return e})},Bt=({exhibit:r,theme:a,onBack:i,onShare:l,onFavorite:o,onLike:c,isFavorited:d,isLiked:m,onPostComment:p,onCommentLike:h,onDeleteComment:u,onAuthorClick:b,onFollow:f,onMessage:w,onDelete:j,onEdit:N,onAddToCollection:v,onExhibitClick:y,isFollowing:k,currentUser:E,currentUserProfile:S,isAdmin:T,users:O,allExhibits:A,highlightCommentId:L})=>{const[R,z]=e.useState(0),[U,M]=e.useState(""),[F,P]=e.useState(!1),[G,H]=e.useState(!1),[$,Y]=e.useState(null),[W,K]=e.useState(null),[Z,J]=e.useState([]),[Q,de]=e.useState(!1),[xe,me]=e.useState(!1),[pe,he]=e.useState(1),[ue,be]=e.useState({x:0,y:0}),[ge,fe]=e.useState(!1),[we,je]=e.useState({x:0,y:0}),Ne="winamp"===a,ve=e.useMemo(()=>{const e=[],t=(e,t="medium")=>e?"object"==typeof e&&e[t]?e[t]:e:"https://placehold.co/600x400?text=NO+IMAGE",s=Array.isArray(r.imageUrls)&&r.imageUrls.length>0?r.imageUrls:["https://placehold.co/600x400?text=NO+IMAGE"];if(e.push({type:"image",url:t(s[0],"medium"),largeUrl:t(s[0],"large")}),r.videoUrl){const t=(e=>{if(!e)return null;let t=e;try{if(e.includes("youtube.com")||e.includes("youtu.be"))t=`https://www.youtube.com/embed/${e.split("v=")[1]?.split("&")[0]||e.split("/").pop()}`;else if(e.includes("rutube.ru")){const s=e.split("/video/")[1]?.split("/")[0];s&&(t=`https://rutube.ru/play/embed/${s}`)}}catch(s){return null}return t})(r.videoUrl);t&&e.push({type:"video",url:t})}return s.length>1&&s.slice(1).forEach(s=>e.push({type:"image",url:t(s,"medium"),largeUrl:t(s,"large")})),e},[r.imageUrls,r.videoUrl]),ye=r.specs||{},ke=r.comments||[],Ce=Tt(r),Ee=Ot[Ce],Se=Ee.icon,Ie="CURSED"===Ce,Te=r.tradeStatus||"NONE",Oe=kt[Te],Ae=Object.entries(ye).filter(([e,t])=>!!t),Le=E===r.owner,Re=Ft({onSwipeLeft:()=>z(e=>(e+1)%ve.length),onSwipeRight:()=>z(e=>(e-1+ve.length)%ve.length)});e.useEffect(()=>{z(0),he(1),be({x:0,y:0})},[r.id]),e.useEffect(()=>{be({x:0,y:0})},[R,pe]),e.useEffect(()=>{const e=e=>{"Escape"===e.key?(me(!1),he(1),be({x:0,y:0})):"ArrowRight"!==e.key||ge?"ArrowLeft"!==e.key||ge||z(e=>(e-1+ve.length)%ve.length):z(e=>(e+1)%ve.length)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[ve.length,ge]);const De=e.useMemo(()=>{const e=ke.filter(e=>!e.parentId).sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()),t=ke.reduce((e,t)=>(t.parentId&&(e[t.parentId]||(e[t.parentId]=[]),e[t.parentId].push(t)),e),{});return Object.keys(t).forEach(e=>{t[e].sort((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime())}),{roots:e,byParent:t}},[ke]);e.useEffect(()=>{L&&setTimeout(()=>{const e=document.getElementById(`comment-${L}`);e&&(e.scrollIntoView({behavior:"smooth",block:"center"}),e.classList.add("animate-pulse"),setTimeout(()=>e.classList.remove("animate-pulse"),2e3))},500)},[L,ke]);const ze=e.useMemo(()=>A?((e,t,s=4)=>{if(!e||!t)return[];const r=["the","and","for","with","edition","version","–Ω–æ–≤—ã–π","–ø—Ä–æ–¥–∞–º","–∫—É–ø–∏–ª"],a=e.title.toLowerCase().replace(/[^\w\s–∞-—è—ë]/gi,"").split(/\s+/).filter(e=>e.length>2&&!r.includes(e));return t.filter(t=>t.id!==e.id&&!t.isDraft).map(t=>{let s=0;t.category===e.category&&(s+=10),t.subcategory&&t.subcategory===e.subcategory&&(s+=25);const r=t.title.toLowerCase().split(/\s+/);let i=0;if(a.forEach(e=>{r.some(t=>t.includes(e)||e.includes(t))&&i++}),s+=15*i,e.relatedIds?.includes(t.id)&&(s+=100),t.specs&&e.specs){const r=Object.values(e.specs).find(e=>["sony","nintendo","sega","apple","nokia"].includes(e.toLowerCase())),a=Object.values(t.specs).find(e=>["sony","nintendo","sega","apple","nokia"].includes(e.toLowerCase()));r&&a&&r.toLowerCase()===a.toLowerCase()&&(s+=20)}return{item:t,score:s}}).filter(e=>e.score>5).sort((e,t)=>t.score-e.score).slice(0,s).map(e=>e.item)})(r,A):[],[r,A]),Ue=e.useMemo(()=>r.relatedIds&&A?A.filter(e=>r.relatedIds?.includes(e.id)):[],[r.relatedIds,A]);e.useEffect(()=>{if(null!==W){const e=W.toLowerCase();J(O.filter(t=>t.username.toLowerCase().includes(e)).slice(0,5))}else J([])},[W,O]);const _e=e=>{const t=encodeURIComponent(window.location.href),s=encodeURIComponent(`NeoArchive Artifact: ${r.title}`),a=encodeURIComponent(ve[R].url);switch(e){case"tg":window.open(`https://t.me/share/url?url=${t}&text=${s}`);break;case"wa":window.open(`https://api.whatsapp.com/send?text=${s}%20${t}`);break;case"pin":window.open(`https://pinterest.com/pin/create/button/?url=${t}&media=${a}&description=${s}`);break;case"copy":navigator.clipboard.writeText(window.location.href),P(!0),setTimeout(()=>P(!1),2e3)}H(!1)},Me=()=>{fe(!1)},Fe=(e,s=0)=>{const a=e.likedBy&&e.likedBy.includes(E),i=e.author===E,l=De.byParent[e.id]||[];return t.jsxs("div",{className:"flex flex-col "+(s>0?"ml-4 md:ml-8 border-l-2 border-white/10 pl-4 mt-2":"mt-4"),children:[t.jsxs("div",{id:`comment-${e.id}`,className:"p-3 border transition-all "+(Ne?"bg-black border-[#505050]":"rounded-xl bg-white/5 border-white/5 hover:border-white/10"),children:[t.jsxs("div",{className:"flex justify-between items-start mb-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("img",{src:gt(e.author),className:"w-5 h-5 rounded-full cursor-pointer",onClick:()=>b(e.author)}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{onClick:()=>b(e.author),className:"font-bold cursor-pointer text-green-500 font-pixel text-[10px] leading-none",children:["@",e.author]}),t.jsx("div",{className:"text-[9px] opacity-30 font-mono leading-none",children:e.timestamp})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{onClick:()=>h(e.id),className:"flex items-center gap-1 text-[10px] transition-colors "+(a?"text-red-500":"text-gray-500 hover:text-red-500"),children:[t.jsx(D,{size:12,fill:a?"currentColor":"none"})," ",e.likes>0&&e.likes]}),t.jsx("button",{onClick:()=>{return Y({id:(t=e).id,author:t.author}),M(`@${t.author} `),void document.getElementById("comment-input")?.focus();var t},className:"text-gray-500 hover:text-white transition-colors",title:"–û—Ç–≤–µ—Ç–∏—Ç—å",children:t.jsx(ce,{size:14})}),(i||T)&&t.jsx("button",{onClick:()=>u(r.id,e.id),className:"text-gray-500 hover:text-red-500 transition-colors",title:"–£–¥–∞–ª–∏—Ç—å",children:t.jsx(V,{size:14})})]})]}),t.jsx("p",{className:"font-mono text-xs opacity-80 pl-7 break-words leading-relaxed",children:Pt(e.text,b)})]}),l.map(e=>Fe(e,s+1))]},e.id)},Pe=O.find(e=>e.username===r.owner);return t.jsxs("div",{className:"w-full min-h-full pb-20 animate-in slide-in-from-right-8 fade-in duration-500 "+(Ne?"font-mono text-gray-300":"dark"===a?"text-gray-200":"text-gray-800"),children:[Q&&S&&A&&Pe&&t.jsx(Mt,{targetItem:r,currentUser:S,userInventory:A.filter(e=>e.owner===E),recipient:Pe,onClose:()=>de(!1)}),xe&&t.jsxs("div",{className:"fixed inset-0 z-50 bg-black/95 flex flex-col animate-in fade-in duration-200",children:[t.jsxs("div",{className:"absolute top-4 left-4 z-50 flex gap-4",children:[t.jsx("button",{onClick:()=>c(r.id),className:"p-3 bg-black/50 rounded-full transition-all "+(m?"text-red-500 hover:bg-red-500/20":"text-white hover:bg-white/20"),title:m?"–£–±—Ä–∞—Ç—å –ª–∞–π–∫":"–ü–æ—Å—Ç–∞–≤–∏—Ç—å –ª–∞–π–∫",children:t.jsx(D,{size:24,fill:m?"currentColor":"none"})}),t.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 bg-black/50 text-white rounded-full text-sm font-mono",children:[t.jsx(D,{size:16,className:"text-red-500"}),t.jsx("span",{children:r.likes})]})]}),t.jsxs("div",{className:"absolute top-4 right-4 z-50 flex gap-4",children:[t.jsx("button",{onClick:()=>he(e=>Math.min(e+.5,4)),className:"p-3 bg-black/50 text-white rounded-full hover:bg-white/20 transition-colors",children:t.jsx(ee,{size:24})}),t.jsx("button",{onClick:()=>he(e=>Math.max(e-.5,1)),className:"p-3 bg-black/50 text-white rounded-full hover:bg-white/20 transition-colors",children:t.jsx(te,{size:24})}),t.jsx("button",{onClick:()=>{he(1),be({x:0,y:0})},className:"p-3 bg-black/50 text-white rounded-full hover:bg-blue-500/20 hover:text-blue-500 transition-colors",title:"–°–±—Ä–æ—Å–∏—Ç—å",children:t.jsx(se,{size:24})}),t.jsx("button",{onClick:()=>{me(!1),he(1),be({x:0,y:0})},className:"p-3 bg-black/50 text-white rounded-full hover:bg-red-500/20 hover:text-red-500 transition-colors",children:t.jsx(q,{size:24})})]}),pe>1&&t.jsxs("div",{className:"absolute top-4 left-4 z-50 bg-black/50 text-white px-3 py-2 rounded-full text-sm font-mono",children:[Math.round(100*pe),"%"]}),t.jsxs("div",{className:"flex-1 flex items-center justify-center relative overflow-hidden",...1===pe?Re:{},children:[1===pe&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>z(e=>(e-1+ve.length)%ve.length),className:"absolute left-4 z-40 p-4 text-white/50 hover:text-white transition-colors",children:t.jsx(re,{size:48})}),t.jsx("button",{onClick:()=>z(e=>(e+1)%ve.length),className:"absolute right-4 z-40 p-4 text-white/50 hover:text-white transition-colors",children:t.jsx(X,{size:48})})]}),t.jsx("div",{className:"relative w-full h-full flex items-center justify-center p-4",onMouseDown:e=>{pe>1&&(fe(!0),je({x:e.clientX-ue.x,y:e.clientY-ue.y}))},onMouseMove:e=>{ge&&pe>1&&be({x:e.clientX-we.x,y:e.clientY-we.y})},onMouseUp:Me,onMouseLeave:Me,onTouchStart:e=>{pe>1&&1===e.touches.length&&(fe(!0),je({x:e.touches[0].clientX-ue.x,y:e.touches[0].clientY-ue.y}))},onTouchMove:e=>{ge&&pe>1&&1===e.touches.length&&be({x:e.touches[0].clientX-we.x,y:e.touches[0].clientY-we.y})},onTouchEnd:()=>{fe(!1)},onWheel:e=>{if(xe&&"image"===ve[R].type){e.preventDefault();const t=e.deltaY>0?-.2:.2;he(e=>Math.max(1,Math.min(4,e+t)))}},style:{cursor:pe>1?ge?"grabbing":"grab":"default"},children:"image"===ve[R].type?t.jsx("img",{src:ve[R].largeUrl||ve[R].url,className:"max-w-full max-h-full object-contain select-none",style:{transform:`scale(${pe}) translate(${ue.x/pe}px, ${ue.y/pe}px)`,transition:ge?"none":"transform 0.2s ease-out"},draggable:!1}):t.jsx("iframe",{src:ve[R].url,className:"w-full h-full max-w-4xl max-h-[80vh]",frameBorder:"0",allowFullScreen:!0})})]}),t.jsx("div",{className:"h-20 flex items-center justify-center gap-2 pb-4",children:ve.map((e,s)=>t.jsx("button",{onClick:()=>z(s),className:"w-2 h-2 rounded-full transition-all "+(s===R?"bg-white scale-125":"bg-white/20 hover:bg-white/40")},s))})]}),t.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 pt-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4 border-b border-white/5 pb-2",children:[t.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-mono opacity-50 uppercase",children:[t.jsxs("button",{onClick:i,className:"hover:text-green-500 flex items-center gap-1",children:[t.jsx(_,{size:12})," –ù–ê–ó–ê–î"]}),t.jsx("span",{className:"opacity-30",children:"/"}),t.jsx("span",{className:"hover:text-white cursor-pointer",children:r.category})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[(Le||T)&&t.jsxs("div",{className:"flex gap-2",children:[N&&t.jsx("button",{onClick:()=>N(r),className:"text-purple-400 hover:text-white transition-all",children:t.jsx(B,{size:16})}),j&&t.jsx("button",{onClick:()=>j(r.id),className:"text-red-500 hover:text-white transition-all",children:t.jsx(V,{size:16})})]}),t.jsx("div",{className:"h-4 w-[1px] bg-white/10"}),t.jsxs("div",{className:"relative",children:[t.jsx("button",{onClick:()=>H(!G),className:"hover:text-white transition-all "+(F?"text-green-500":"text-gray-400"),children:t.jsx(ae,{size:16})}),G&&t.jsxs("div",{className:"absolute right-0 top-6 w-40 bg-dark-surface border border-white/10 rounded-xl shadow-2xl z-50 p-1 animate-in slide-in-from-top-2",children:[t.jsxs("button",{onClick:()=>_e("tg"),className:"w-full text-left p-2 hover:bg-white/5 rounded text-[10px] font-bold flex items-center gap-2",children:[t.jsx(n,{size:12,className:"text-blue-400"})," TELEGRAM"]}),t.jsxs("button",{onClick:()=>_e("wa"),className:"w-full text-left p-2 hover:bg-white/5 rounded text-[10px] font-bold flex items-center gap-2",children:[t.jsx(ie,{size:12,className:"text-green-500"})," WHATSAPP"]}),t.jsxs("button",{onClick:()=>_e("copy"),className:"w-full text-left p-2 hover:bg-white/5 rounded text-[10px] font-bold flex items-center gap-2",children:[t.jsx(ae,{size:12})," COPY LINK"]})]})]})]})]}),t.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 lg:gap-8 items-start",children:[t.jsxs("div",{className:"w-full lg:w-[45%] space-y-4 lg:sticky lg:top-20",children:[t.jsxs("div",{className:`relative aspect-square w-full overflow-hidden border transition-all duration-500 group ${Ne?"bg-black border-[#505050]":"dark"===a?"rounded-2xl border-white/10 bg-black":"rounded-2xl border-black/10 bg-white"} ${Ie?"shadow-[0_0_30px_red]":""}`,...Re,children:["image"===ve[R].type?t.jsxs("div",{className:"w-full h-full relative cursor-zoom-in",onClick:()=>me(!0),children:[t.jsx("img",{src:ve[R].url,alt:r.title,className:"w-full h-full object-contain bg-black/50"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-transparent pointer-events-none opacity-50"})]}):t.jsx("iframe",{src:ve[R].url,className:"w-full h-full relative z-10",frameBorder:"0",allowFullScreen:!0}),ve.length>1&&t.jsx("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center gap-1.5 z-20",children:ve.map((e,s)=>t.jsx("div",{className:"w-1.5 h-1.5 rounded-full shadow "+(s===R?"bg-white scale-125":"bg-white/30")},s))}),t.jsx("button",{onClick:()=>me(!0),className:"absolute top-2 right-2 p-1.5 bg-black/50 text-white rounded-lg opacity-0 group-hover:opacity-100 transition-opacity",children:t.jsx(le,{size:16})})]}),!Le&&("FOR_TRADE"===Te||"FOR_SALE"===Te||"NONE"===Te||!Te)&&t.jsxs("button",{onClick:()=>de(!0),className:"w-full flex items-center justify-center gap-2 py-3 bg-blue-600 text-white rounded-xl font-pixel text-[10px] uppercase font-bold hover:bg-blue-500 shadow-lg",children:[t.jsx(g,{size:14})," –ü–†–ï–î–õ–û–ñ–ò–¢–¨ –û–ë–ú–ï–ù"]})]}),t.jsxs("div",{className:"flex-1 w-full",children:[t.jsxs("div",{className:"p-5 md:p-6 border mb-4 "+(Ne?"bg-[#191919] border-[#505050]":"dark"===a?"bg-dark-surface border-white/10 rounded-2xl":"bg-white border-black/10 shadow-xl rounded-2xl"),children:[t.jsxs("div",{className:"flex flex-col gap-4 mb-6",children:[t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx("span",{className:"px-2 py-0.5 text-[9px] font-pixel font-bold uppercase border rounded "+(Ne?"border-[#00ff00] text-[#00ff00]":"border-green-500/50 text-green-400 bg-green-500/10"),children:r.category}),t.jsxs("span",{className:"px-2 py-0.5 text-[9px] font-bold font-pixel border rounded flex items-center gap-1 uppercase "+(Ne?"border-[#00ff00] text-[#00ff00]":`${Ee.bgColor} ${Ee.color} border-white/5`),children:[t.jsx(Se,{size:10})," ",Ee.name]}),"NONE"!==Te&&t.jsxs("span",{className:`px-2 py-0.5 text-[9px] font-bold font-pixel border rounded flex items-center gap-1 uppercase ${Oe.color} ${Oe.bg}`,children:[Oe.icon&&s.createElement(Oe.icon,{size:10})," ",Oe.badge]})]}),t.jsx("h1",{className:"text-xl md:text-3xl font-bold font-pixel leading-tight "+(Ie?"text-red-500 italic":Ne?"text-[#00ff00]":"text-white"),children:r.title}),t.jsxs("div",{className:"flex items-center gap-4 text-xs font-mono opacity-70 border-b border-white/5 pb-4",children:[t.jsxs("button",{onClick:()=>c(r.id),className:"flex items-center gap-1.5 hover:text-red-400 transition-colors "+(m?"text-red-500 font-bold":""),children:[t.jsx(D,{size:16,fill:m?"currentColor":"none"})," ",r.likes]}),t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(x,{size:16})," ",r.views]}),t.jsx("div",{className:"flex-1"}),Le&&t.jsx("button",{onClick:()=>v?.(r.id),className:"hover:text-blue-400 transition-colors",title:"–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é",children:t.jsx(ne,{size:18})})]})]}),t.jsxs("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-white/5",children:[t.jsxs("div",{className:"flex items-center gap-3 cursor-pointer group",onClick:()=>b(r.owner),children:[t.jsx("img",{src:gt(r.owner),className:"w-10 h-10 rounded-full border border-white/20"}),t.jsxs("div",{children:[t.jsxs("div",{className:"font-bold font-pixel text-xs transition-colors "+(Ne?"text-[#00ff00]":"group-hover:text-green-500"),children:["@",r.owner]}),t.jsx("div",{className:"text-[9px] opacity-40 font-mono uppercase",children:r.timestamp.split(",")[0]})]})]}),!Le&&t.jsx("button",{onClick:()=>f(r.owner),className:"px-3 py-1.5 text-[9px] font-bold font-pixel border rounded transition-all "+(k?"border-white/10 opacity-40":"bg-white/10 hover:bg-white/20 border-transparent"),children:k?"–ü–û–î–ü–ò–°–ê–ù":"–ü–û–î–ü–ò–°–ê–¢–¨–°–Ø"})]}),t.jsx("p",{className:"font-mono text-xs leading-relaxed whitespace-pre-wrap opacity-80 mb-6 "+(Ne?"text-[#00ff00]":""),children:r.description}),Ae.length>0&&t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"font-pixel text-[9px] opacity-40 uppercase tracking-widest mb-2",children:"–•–ê–†–ê–ö–¢–ï–†–ò–°–¢–ò–ö–ò"}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-1",children:[Ae.map(([e,s])=>t.jsxs("div",{className:"px-2 py-1.5 border rounded flex flex-col justify-center "+(Ne?"bg-black border-[#505050]":"bg-black/20 border-white/5"),children:[t.jsx("div",{className:"text-[7px] uppercase opacity-40 font-pixel tracking-wider mb-0.5",children:e}),t.jsx("div",{className:"font-bold font-mono text-[10px] break-words leading-tight",children:s})]},e)),r.condition&&t.jsxs("div",{className:"px-2 py-1.5 border rounded flex flex-col justify-center "+(Ne?"bg-black border-[#505050]":"bg-black/20 border-white/5"),children:[t.jsx("div",{className:"text-[7px] uppercase opacity-40 font-pixel tracking-wider mb-0.5",children:"–°–û–°–¢–û–Ø–ù–ò–ï"}),t.jsx("div",{className:"font-bold font-mono text-[10px] text-green-400 uppercase leading-tight",children:r.condition})]})]})]}),Ue.length>0&&t.jsxs("div",{className:"mt-6 pt-4 border-t border-white/5",children:[t.jsxs("h3",{className:"font-pixel text-[9px] opacity-40 uppercase tracking-widest mb-3 flex items-center gap-1",children:[t.jsx(oe,{size:10})," –°–í–Ø–ó–ê–ù–ù–´–ï –ü–†–ï–î–ú–ï–¢–´"]}),t.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:Ue.map(e=>t.jsxs("div",{onClick:()=>y(e),className:"flex-shrink-0 w-20 group cursor-pointer",children:[t.jsx("div",{className:"aspect-square rounded-lg overflow-hidden border border-white/10 relative bg-black/20",children:t.jsx("img",{src:"string"==typeof e.imageUrls[0]?e.imageUrls[0]:e.imageUrls[0]?.thumbnail||"https://placehold.co/600x400?text=NO+IMAGE",className:"w-full h-full object-cover transition-transform group-hover:scale-110"})}),t.jsx("div",{className:"mt-1 text-[8px] font-bold truncate opacity-70 group-hover:opacity-100",children:e.title})]},e.id))})]})]}),t.jsxs("div",{className:"p-5 rounded-2xl border "+(Ne?"bg-[#191919] border-[#505050]":"bg-dark-surface border-white/5"),children:[t.jsxs("h3",{className:"font-pixel text-xs mb-4 flex items-center gap-2",children:[t.jsx(C,{size:14})," –û–ë–°–£–ñ–î–ï–ù–ò–ï (",ke.length,")"]}),t.jsx("div",{className:"space-y-4 mb-6 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:0===ke.length?t.jsx("div",{className:"text-center py-8 opacity-30 text-[10px] font-pixel uppercase tracking-widest border border-dashed border-white/10 rounded-xl",children:"–¢–ò–®–ò–ù–ê –í –≠–§–ò–†–ï"}):De.roots.map(e=>Fe(e))}),t.jsxs("div",{className:"flex flex-col gap-2 relative",children:[null!==W&&Z.length>0&&t.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-64 bg-black border border-white/10 rounded-xl overflow-hidden shadow-2xl z-50",children:Z.map(e=>t.jsxs("button",{onClick:()=>(e=>{const t=U.split(" ");t.pop();const s=[...t,`@${e} `].join(" ");M(s),K(null)})(e.username),className:"w-full flex items-center gap-2 p-2 hover:bg-white/10 text-left transition-colors",children:[t.jsx("img",{src:e.avatarUrl,className:"w-6 h-6 rounded-full"}),t.jsx("div",{className:"flex flex-col",children:t.jsxs("span",{className:"font-bold text-[10px]",children:["@",e.username]})})]},e.username))}),$&&t.jsxs("div",{className:"flex items-center justify-between text-[10px] font-mono bg-white/5 p-2 rounded-lg border border-white/5",children:[t.jsxs("span",{className:"opacity-70",children:["–û—Ç–≤–µ—Ç ",t.jsxs("span",{className:"text-green-500 font-bold",children:["@",$.author]})]}),t.jsx("button",{onClick:()=>{Y(null),M("")},className:"hover:text-red-500",children:t.jsx(q,{size:12})})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{id:"comment-input",type:"text",value:U,onChange:e=>{const t=e.target.value;M(t);const s=t.split(" ").pop();s&&s.startsWith("@")?K(s.slice(1)):K(null)},placeholder:$?"–í–∞—à –æ—Ç–≤–µ—Ç...":"–ù–∞–ø–∏—Å–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π...",className:"flex-1 bg-black/40 border border-white/10 px-3 py-2.5 font-mono text-xs focus:outline-none focus:border-green-500 transition-colors rounded-lg",onKeyDown:e=>{"Enter"===e.key&&U.trim()&&(p(r.id,U,$?.id),M(""),Y(null),K(null))}}),t.jsx("button",{onClick:()=>{U.trim()&&(p(r.id,U,$?.id),M(""),Y(null),K(null))},className:"bg-green-500 text-black p-2.5 rounded-lg hover:scale-105 active:scale-95 transition-all",children:t.jsx(n,{size:16})})]})]})]})]})]}),ze.length>0&&t.jsxs("div",{className:"mt-12 mb-8",children:[t.jsxs("h3",{className:"font-pixel text-[9px] opacity-40 mb-4 flex items-center gap-2 tracking-[0.2em] uppercase",children:[t.jsx(I,{size:12,className:"text-purple-400"})," –ü–û–•–û–ñ–ò–ï –û–ë–™–ï–ö–¢–´"]}),t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:ze.map(e=>t.jsx(Rt,{item:e,theme:a,onClick:()=>y(e),currentUsername:E,onReact:()=>{},onAuthorClick:b},e.id))})]})]})]})},Gt=({title:e,children:s,className:r=""})=>t.jsxs("div",{className:`mb-6 bg-[#292929] border-t-2 border-l-2 border-r-2 border-b-2 border-t-[#505050] border-l-[#505050] border-r-[#101010] border-b-[#101010] ${r}`,children:[t.jsxs("div",{className:"h-4 bg-gradient-to-r from-wa-blue-light to-wa-blue-dark flex items-center justify-between px-1 cursor-default select-none mb-1",children:[t.jsx("span",{className:"text-white font-winamp text-[10px] tracking-widest uppercase",children:e}),t.jsx("div",{className:"w-2 h-2 bg-[#DCDCDC] border border-t-white border-l-white border-r-[#505050] border-b-[#505050]"})]}),t.jsx("div",{className:"p-2",children:s})]}),Ht=({theme:r,users:a=[],exhibits:i=[],onExhibitClick:l,onUserClick:n,onBack:o,currentUser:c})=>{const[d,x]=e.useState("trade"===new URLSearchParams(window.location.search).get("tab")?"TRADE":"TRENDS"),m="winamp"===r;e.useEffect(()=>{const e=new URLSearchParams(window.location.search);"TRENDS"===d?e.delete("tab"):"TRADE"===d&&e.set("tab","trade");const t=`${window.location.pathname}${e.toString()?"?"+e.toString():""}`;window.history.replaceState({...window.history.state},"",t)},[d]);const p=a.map(e=>{const t=i.filter(t=>t.owner===e.username).length,s=5*t+(e.achievements?.find(e=>"INFLUENCER"===e.id)?.current||0)+2*(e.followers?.length||0);return{...e,score:s,postCount:t}}).filter(e=>e.score>0).sort((e,t)=>t.score-e.score).slice(0,5),h=i.sort((e,t)=>t.likes+t.views-(e.likes+e.views)).slice(0,6),u=i.filter(e=>"FOR_SALE"===e.tradeStatus||"FOR_TRADE"===e.tradeStatus),b=(e,r,a)=>t.jsxs("button",{onClick:()=>x(e),className:"flex flex-col items-center gap-1 p-3 flex-1 transition-all border-b-2 "+(d===e?m?"border-wa-gold text-wa-gold bg-[#292929]":"border-green-500 text-green-500 font-bold":"border-transparent opacity-50 hover:opacity-100"),children:[s.createElement(r,{size:20}),t.jsx("span",{className:"text-[9px] font-pixel uppercase",children:a})]});return t.jsxs("div",{className:"max-w-4xl mx-auto pb-32 animate-in fade-in "+(m?"font-winamp text-wa-green":""),children:[m?t.jsxs(Gt,{title:"COMMUNITY NETWORK",children:[t.jsxs("h1",{className:"text-xl font-winamp text-wa-gold flex items-center gap-2 mb-2",children:[t.jsx(de,{size:24})," –ì–õ–û–ë–ê–õ–¨–ù–ê–Ø –°–ï–¢–¨"]}),t.jsxs("p",{className:"text-[12px] opacity-80",children:["–ê–∫—Ç–∏–≤–Ω—ã–µ —É–∑–ª—ã: ",a.length]})]}):t.jsxs("div",{className:"p-6 mb-6 border-b border-white/10",children:[t.jsxs("h1",{className:"text-2xl font-pixel font-bold flex items-center gap-3",children:[t.jsx(de,{size:28})," –°–û–û–ë–©–ï–°–¢–í–û"]}),t.jsx("p",{className:"text-xs opacity-60 mt-1 font-mono",children:"–¶–µ–Ω—Ç—Ä –æ–±–º–µ–Ω–∞ –∏ —Ä–µ–π—Ç–∏–Ω–≥–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–µ—Ä–æ–≤."})]}),t.jsxs("div",{className:"flex mb-8 sticky top-16 z-30 "+(m?"bg-[#292929] border-b border-[#505050]":"border-b border-white/10 bg-black/80 backdrop-blur-md"),children:[b("TRENDS",xe,"–¢–†–ï–ù–î–´"),b("TRADE",g,"–û–ë–ú–ï–ù")]}),t.jsxs("div",{className:"px-4",children:["TRENDS"===d&&t.jsxs("div",{className:"space-y-8 animate-in slide-in-from-right-4",children:[t.jsxs("div",{className:"p-4 rounded-2xl border "+(m?"bg-[#292929] border-[#505050]":"bg-gradient-to-r from-yellow-900/10 to-transparent border-yellow-500/20"),children:[t.jsxs("h3",{className:"text-xs mb-4 flex items-center gap-2 uppercase tracking-widest "+(m?"text-wa-gold font-winamp":"text-yellow-500 font-pixel"),children:[t.jsx(F,{size:14})," –¢–û–ü –ö–û–õ–õ–ï–ö–¶–ò–û–ù–ï–†–´"]}),t.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2 scrollbar-hide",onTouchStart:e=>e.stopPropagation(),onTouchMove:e=>e.stopPropagation(),onTouchEnd:e=>e.stopPropagation(),children:p.map((e,s)=>t.jsxs("div",{onClick:()=>n(e.username),className:"flex flex-col items-center gap-2 cursor-pointer group min-w-[80px]",children:[t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:e.avatarUrl||gt(e.username),className:"w-14 h-14 rounded-full border-2 transition-transform group-hover:scale-110 "+(m?"border-[#505050]":"border-yellow-500/50")}),t.jsxs("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-yellow-500 text-black text-[10px] font-bold flex items-center justify-center rounded-full",children:["#",s+1]})]}),t.jsxs("div",{className:"text-center",children:[t.jsxs("span",{className:"text-[10px] font-bold truncate max-w-[80px] block",children:["@",e.username]}),t.jsxs("span",{className:"text-[8px] opacity-50",children:[e.score," pts"]})]})]},e.username))})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-xs mb-4 flex items-center gap-2 uppercase tracking-widest "+(m?"text-wa-gold font-winamp":"text-red-400 font-pixel"),children:[t.jsx(O,{size:14})," –°–ï–ô–ß–ê–° –ü–û–ü–£–õ–Ø–†–ù–û"]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:h.map(e=>t.jsx(Rt,{item:e,theme:r,onClick:l,currentUsername:c?.username||"",onReact:()=>{},onAuthorClick:n},e.id))})]})]}),"TRADE"===d&&t.jsxs("div",{className:"animate-in slide-in-from-right-4",children:[t.jsxs("div",{className:"mb-6 p-4 border rounded-xl text-center "+(m?"border-[#505050] bg-[#292929]":"border-blue-500/30 bg-blue-500/5"),children:[t.jsx("h3",{className:"text-sm mb-1 font-bold",children:"–¢–û–†–ì–û–í–ê–Ø –ü–õ–û–©–ê–î–ö–ê"}),t.jsxs("p",{className:"text-[10px] opacity-60",children:["–£ –Ω–∞—Å –Ω–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∞. –í—Å–µ —Å–¥–µ–ª–∫–∏ –ø—Ä–æ–≤–æ–¥—è—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.",t.jsx("br",{}),"–î–æ–≥–æ–≤–∞—Ä–∏–≤–∞–π—Ç–µ—Å—å –≤ –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö –∏–ª–∏ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞—Ö."]})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:0===u.length?t.jsx("div",{className:"col-span-full text-center py-10 opacity-50 font-mono text-xs",children:"–†—ã–Ω–æ–∫ –ø—É—Å—Ç. –í—ã—Å—Ç–∞–≤–∏—Ç–µ —á—Ç–æ-–Ω–∏–±—É–¥—å –Ω–∞ –ø—Ä–æ–¥–∞–∂—É!"}):u.map(e=>t.jsxs("div",{className:"relative",children:[t.jsx(Rt,{item:e,theme:r,onClick:l,currentUsername:c?.username||"",onReact:()=>{},onAuthorClick:n}),t.jsx("div",{className:"absolute top-2 left-2 px-2 py-1 text-[10px] font-bold rounded shadow-lg "+(m?"bg-black text-[#00ff00] border border-[#00ff00]":"bg-black/80 text-white backdrop-blur-md"),children:"FOR_SALE"===e.tradeStatus?`${e.price||"?"} ${e.currency||"RUB"}`:"–û–ë–ú–ï–ù"})]},e.id))})]})]})]})},$t=({text:e,size:s="sm",className:r=""})=>{const a="lg"===s?"w-16 h-16":"w-4 h-4",i="lg"===s?"gap-1":"gap-0.5";return t.jsxs("div",{className:`flex flex-col items-center justify-center ${r}`,children:[t.jsxs("div",{className:`relative ${a} grid grid-cols-2 ${i} animate-[spin_0.8s_steps(4)_infinite]`,children:[t.jsx("div",{className:"bg-current opacity-100 shadow-[0_0_10px_currentColor]"}),t.jsx("div",{className:"bg-current opacity-20"}),t.jsx("div",{className:"bg-current opacity-20"}),t.jsx("div",{className:"bg-current opacity-100 shadow-[0_0_10px_currentColor]"})]}),e&&t.jsxs("span",{className:"font-pixel tracking-widest animate-pulse "+("lg"===s?"text-2xl mt-6":"text-[10px] ml-2"),children:[e,t.jsx("span",{className:"animate-[ping_1s_steps(2)_infinite] inline-block ml-1 opacity-75",children:"_"})]})]})},Yt=({notifications:r,messages:a,currentUser:i,theme:n,onAuthorClick:o,onExhibitClick:c,onChatClick:d})=>{const[x,m]=e.useState("NOTIFICATIONS"),[p,h]=e.useState("ALL"),[u,b]=e.useState(!1),w=e.useMemo(()=>{let e=r.filter(e=>e.recipient.toLowerCase()===i.username.toLowerCase());return"UNREAD"===p&&(e=e.filter(e=>!e.isRead)),e.sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime())},[r,i.username,p]),j=a.filter(e=>e.sender.toLowerCase()===i.username.toLowerCase()||e.receiver.toLowerCase()===i.username.toLowerCase()),N=e.useMemo(()=>{const e={},t=[];return w.forEach(s=>{const r=`${new Date(s.timestamp).toDateString()}_${s.type}_${s.targetId||"general"}`;e[r]||(e[r]=[],t.push(r)),e[r].push(s)}),t.map(t=>{const s=e[t];return{id:t,type:s[0].type,items:s,timestamp:s[0].timestamp,targetId:s[0].targetId,targetPreview:s[0].targetPreview}})},[w]),v=e=>{switch(e){case"LIKE":return t.jsx(D,{size:16,className:"text-red-500 fill-current"});case"COMMENT":return t.jsx(C,{size:16,className:"text-blue-500 fill-current"});case"FOLLOW":return t.jsx(l,{size:16,className:"text-green-500"});case"GUESTBOOK":return t.jsx(ue,{size:16,className:"text-yellow-500"});case"TRADE_OFFER":return t.jsx(g,{size:16,className:"text-blue-400"});case"TRADE_ACCEPTED":return t.jsx(Q,{size:16,className:"text-green-400"});default:return t.jsx(me,{size:16})}},y=e=>{const s=e.items.length,r=e.items[0],a=Array.from(new Set(e.items.map(e=>e.actor))),i=e.items.some(e=>!e.isRead);let l="";l="LIKE"===r.type?"–ü–æ–Ω—Ä–∞–≤–∏–ª—Å—è –≤–∞—à —ç–∫—Å–ø–æ–Ω–∞—Ç":"COMMENT"===r.type?"–ù–æ–≤—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π":"FOLLOW"===r.type?"–ù–æ–≤—ã–π –ø–æ–¥–ø–∏—Å—á–∏–∫":r.type.includes("TRADE")?"–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ —Å–¥–µ–ª–∫–µ":"–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ";const d=1===a.length?t.jsxs("span",{className:"font-bold text-green-400 cursor-pointer hover:underline",onClick:()=>o(a[0]),children:["@",a[0]]}):t.jsxs("span",{children:[t.jsxs("span",{className:"font-bold text-green-400",children:["@",a[0]]})," –∏ –µ—â–µ ",t.jsx("span",{className:"font-bold",children:a.length-1})]});return t.jsxs("div",{className:"p-4 border-b transition-all flex gap-4 "+(i?"bg-green-900/10 border-green-500/30":"winamp"===n?"border-[#505050] bg-[#191919]":"border-white/5 bg-transparent"),children:[t.jsx("div",{className:"pt-1",children:v(r.type)}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"text-sm font-mono mb-1",children:[d," ",t.jsx("span",{className:"opacity-70",children:l.toLowerCase()})]}),r.targetPreview&&t.jsxs("div",{onClick:()=>r.targetId&&c(r.targetId),className:"text-xs font-bold font-pixel opacity-90 cursor-pointer hover:text-green-400 transition-colors border-l-2 border-white/20 pl-2 mt-2",children:['"',r.targetPreview,'"']}),t.jsxs("div",{className:"text-[10px] opacity-40 mt-2 font-mono flex items-center gap-2",children:[new Date(r.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),s>1&&t.jsxs("span",{className:"bg-white/10 px-1.5 rounded-full text-[9px]",children:["+",s," —Å–æ–±—ã—Ç–∏–π"]})]})]}),i&&t.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 mt-2"})]},e.id)};let k="";return t.jsxs("div",{className:"max-w-2xl mx-auto animate-in fade-in pb-20 "+("winamp"===n?"font-mono text-gray-300":""),children:[t.jsxs("div",{className:"flex mb-6 border-b "+("winamp"===n?"border-[#505050]":"border-gray-500/30"),children:[t.jsxs("button",{onClick:()=>m("NOTIFICATIONS"),className:"flex-1 pb-3 text-center font-pixel text-xs transition-colors flex items-center justify-center gap-2 "+("NOTIFICATIONS"===x?"border-b-2 border-green-500 text-green-500 font-bold":"opacity-50 hover:opacity-100"),children:[t.jsx(me,{size:14})," –ò–ù–§–û",w.some(e=>!e.isRead)&&t.jsx("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full"})]}),t.jsxs("button",{onClick:()=>m("MESSAGES"),className:"flex-1 pb-3 text-center font-pixel text-xs transition-colors flex items-center justify-center gap-2 "+("MESSAGES"===x?"border-b-2 border-green-500 text-green-500 font-bold":"opacity-50 hover:opacity-100"),children:[t.jsx(ie,{size:14})," –ß–ê–¢–´"]}),t.jsxs("button",{onClick:()=>m("TRADES"),className:"flex-1 pb-3 text-center font-pixel text-xs transition-colors flex items-center justify-center gap-2 "+("TRADES"===x?"border-b-2 border-green-500 text-green-500 font-bold":"opacity-50 hover:opacity-100"),children:[t.jsx(g,{size:14})," –û–ë–ú–ï–ù"]})]}),"NOTIFICATIONS"===x&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-4 px-2",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>h("ALL"),className:"text-[10px] px-3 py-1 rounded-full border "+("ALL"===p?"bg-white text-black border-white":"border-white/20 opacity-50"),children:"–í–°–ï"}),t.jsx("button",{onClick:()=>h("UNREAD"),className:"text-[10px] px-3 py-1 rounded-full border "+("UNREAD"===p?"bg-green-500 text-black border-green-500":"border-white/20 opacity-50"),children:"–ù–û–í–´–ï"})]}),t.jsxs("div",{className:"flex gap-2",children:[w.some(e=>!e.isRead)&&t.jsx("button",{onClick:()=>{(async e=>{Qe.notifications.forEach(t=>{t.recipient!==e||t.isRead||(t.isRead=!0,tt().then(e=>e.put("notifications",t)))}),rt()})(i.username)},className:"text-[10px] text-green-500 hover:underline flex items-center gap-1",children:t.jsx(pe,{size:12})}),t.jsx("button",{onClick:async()=>{b(!0);try{await dt()}catch(e){console.error("Refresh failed",e)}finally{setTimeout(()=>b(!1),500)}},className:"text-[10px] hover:text-white flex items-center gap-1 "+(u?"animate-spin opacity-100":"opacity-50"),children:t.jsx(g,{size:12})})]})]}),0===N.length?t.jsx("div",{className:"text-center py-20 opacity-30 font-pixel text-xs",children:"–ù–ï–¢ –£–í–ï–î–û–ú–õ–ï–ù–ò–ô"}):t.jsx("div",{className:"rounded-xl overflow-hidden border "+("winamp"===n?"border-[#505050] bg-black":"border-white/10 bg-white/5"),children:N.map(e=>{const r=(e=>{const t=new Date(e),s=new Date,r=new Date;return r.setDate(s.getDate()-1),t.toDateString()===s.toDateString()?"–°–ï–ì–û–î–ù–Ø":t.toDateString()===r.toDateString()?"–í–ß–ï–†–ê":t.toLocaleDateString()})(e.timestamp),a=r!==k;return k=r,t.jsxs(s.Fragment,{children:[a&&t.jsx("div",{className:"bg-white/5 px-4 py-2 text-[10px] font-bold font-pixel uppercase tracking-widest text-white/50 border-b border-white/5",children:r}),y(e)]},e.id)})})]}),"MESSAGES"===x&&t.jsx("div",{className:"space-y-2",children:0===j.length?t.jsx("div",{className:"text-center py-20 opacity-30 font-pixel text-xs",children:"–ù–ï–¢ –°–û–û–ë–©–ï–ù–ò–ô"}):(()=>{const e={};return j.forEach(t=>{const s=t.sender.toLowerCase()===i.username.toLowerCase()?t.receiver:t.sender;e[s]||(e[s]=[]),e[s].push(t)}),Object.entries(e).map(([e,s])=>{const r=s.sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime())[0],a=s.some(t=>!t.isRead&&t.sender.toLowerCase()===e.toLowerCase());return t.jsxs("div",{onClick:()=>d(e),className:`flex items-center gap-4 p-4 rounded-xl border cursor-pointer hover:bg-white/5 transition-all ${"winamp"===n?"border-[#505050] bg-[#191919]":"border-white/10 bg-white/5"} ${a?"border-green-500/50":""}`,children:[t.jsx("img",{src:gt(e),className:"w-10 h-10 rounded-full border border-white/20"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsxs("span",{className:"font-bold font-pixel text-xs "+(a?"text-green-400":""),children:["@",e]}),t.jsx("span",{className:"text-[9px] opacity-40 font-mono",children:new Date(r.timestamp).toLocaleDateString()})]}),t.jsxs("div",{className:"text-xs font-mono truncate "+(a?"text-white":"opacity-60"),children:[r.sender.toLowerCase()===i.username.toLowerCase()&&t.jsx("span",{className:"opacity-50",children:"–í—ã: "}),r.text]})]}),a&&t.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"})]},e)})})()}),"TRADES"===x&&t.jsx("div",{children:(()=>{const e=(xt().tradeRequests||[]).filter(e=>e.sender===i.username||e.recipient===i.username).sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime());return 0===e.length?t.jsx("div",{className:"text-center py-20 opacity-30 font-pixel text-xs border-2 border-dashed border-white/10 rounded-3xl",children:"–ù–ï–¢ –ê–ö–¢–ò–í–ù–´–• –°–î–ï–õ–û–ö"}):t.jsx("div",{className:"space-y-3",children:e.map(e=>{const s=e.recipient===i.username,r=s?e.sender:e.recipient,a="ACCEPTED"===e.status?"text-green-500":"DECLINED"===e.status?"text-red-500":"COMPLETED"===e.status?"text-blue-500":"text-yellow-500";return t.jsxs("div",{className:"p-4 rounded-xl border cursor-pointer hover:bg-white/5 transition-all "+("winamp"===n?"border-[#505050] bg-[#191919]":"border-white/10 bg-white/5"),children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("img",{src:gt(r),className:"w-10 h-10 rounded-full border border-white/20"}),t.jsxs("div",{children:[t.jsxs("div",{className:"font-bold font-pixel text-sm flex items-center gap-2",children:["@",r,t.jsx("span",{className:`text-[9px] px-2 py-0.5 rounded-full border ${a} border-current`,children:e.status})]}),t.jsx("div",{className:"text-[10px] opacity-50 font-mono mt-0.5",children:s?"‚Üí –í—Ö–æ–¥—è—â–µ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ":"‚Üê –ò—Å—Ö–æ–¥—è—â–µ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ"})]})]}),t.jsx("div",{className:"text-right",children:t.jsx("div",{className:"text-[10px] opacity-40 font-mono",children:new Date(e.updatedAt).toLocaleDateString()})})]}),t.jsxs("div",{className:"flex items-center gap-4 p-3 bg-black/20 rounded-lg",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-[9px] opacity-50 mb-1 uppercase",children:"–ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(H,{size:14,className:"text-blue-400"}),t.jsxs("span",{className:"text-xs font-mono",children:[e.senderItems.length," –ø—Ä–µ–¥–º–µ—Ç(–æ–≤)"]})]})]}),t.jsx(he,{size:16,className:"opacity-30"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-[9px] opacity-50 mb-1 uppercase",children:"–ó–∞"}),t.jsx("div",{className:"flex items-center gap-2",children:e.price?t.jsxs(t.Fragment,{children:[t.jsx(f,{size:14,className:"text-green-400"}),t.jsxs("span",{className:"text-xs font-mono font-bold text-green-400",children:[e.price," ",e.currency||"RUB"]})]}):t.jsxs(t.Fragment,{children:[t.jsx(H,{size:14,className:"text-purple-400"}),t.jsxs("span",{className:"text-xs font-mono",children:[e.recipientItems.length," –ø—Ä–µ–¥–º–µ—Ç(–æ–≤)"]})]})})]})]}),e.type&&t.jsxs("div",{className:"mt-2 text-[9px] opacity-50 font-mono flex items-center gap-2",children:[t.jsx("span",{children:"–¢–∏–ø:"}),t.jsx("span",{className:"px-2 py-0.5 rounded bg-white/10",children:e.type}),e.isWishlistFulfillment&&t.jsx("span",{className:"px-2 py-0.5 rounded bg-yellow-500/20 text-yellow-500",children:"üéØ –ò–∑ –≤–∏—à–ª–∏—Å—Ç–∞"})]})]},e.id)})})})()})]})},Vt=({theme:e,achievements:s,onBack:r})=>{const a="winamp"===e;return t.jsxs("div",{className:"max-w-4xl mx-auto animate-in fade-in pb-20 px-4 "+(a?"font-mono text-gray-300":""),children:[t.jsxs("button",{onClick:r,className:"flex items-center gap-2 mb-8 hover:underline opacity-70 font-pixel text-xs "+(a?"text-[#00ff00]":""),children:[t.jsx(_,{size:16})," –ù–ê–ó–ê–î"]}),t.jsxs("div",{className:"text-center mb-12",children:[t.jsxs("h1",{className:"text-3xl md:text-5xl font-pixel font-black mb-4 flex items-center justify-center gap-4 "+(a?"text-[#00ff00]":""),children:[t.jsx(F,{size:40,className:"text-yellow-500"})," –ó–ê–õ –°–õ–ê–í–´"]}),t.jsx("p",{className:"font-mono text-sm opacity-60 uppercase tracking-widest",children:"–ü—Ä–æ–≥—Ä–µ—Å—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –Ω–µ–π—Ä–æ–Ω–Ω—ã—Ö —É–∑–ª–æ–≤."})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(Et).map(([e,r])=>{const i=s.find(t=>t.id===e)||{current:0,target:r.target,unlocked:!1},l=Math.min(100,i.current/r.target*100);return t.jsxs("div",{className:"relative p-6 rounded-3xl border-2 transition-all group "+(a?i.unlocked?"bg-[#191919] border-[#00ff00]":"bg-[#191919] border-[#505050] opacity-50":i.unlocked?"bg-dark-surface border-green-500/50 shadow-[0_0_20px_rgba(74,222,128,0.2)]":"bg-black/40 border-white/5 opacity-60 grayscale hover:grayscale-0 hover:opacity-100"),children:[t.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[t.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center ${i.unlocked?r.color:"bg-white/10"} text-black shadow-lg`,children:t.jsx(r.icon,{size:28,className:i.unlocked?"text-black":"text-white/30"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("h3",{className:"font-pixel text-sm font-black mb-1 flex items-center gap-2 "+(a&&i.unlocked?"text-[#00ff00]":""),children:[r.label,i.unlocked&&t.jsx(be,{size:14,className:"text-green-400"})]}),t.jsx("p",{className:"font-mono text-[10px] opacity-60 leading-relaxed uppercase",children:r.desc})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between font-mono text-[9px] font-bold",children:[t.jsxs("span",{children:["–ü–†–û–ì–†–ï–°–°: ",i.current," / ",r.target]}),t.jsxs("span",{children:[Math.round(l),"%"]})]}),t.jsx("div",{className:"w-full h-1.5 bg-white/5 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full transition-all duration-1000 "+(i.unlocked?"bg-green-500 shadow-[0_0_10px_#4ade80]":"bg-white/20"),style:{width:`${l}%`}})})]}),!i.unlocked&&t.jsx("div",{className:"absolute top-4 right-4",children:t.jsx(c,{size:14,className:"opacity-20"})})]},e)})})]})},Wt=({collection:e,artifacts:s,theme:r,onBack:a,onExhibitClick:i,onAuthorClick:l,currentUser:n,onEdit:o,onDelete:c,onLike:d})=>{const x=n===e.owner,m="winamp"===r;return t.jsxs("div",{className:"w-full min-h-full pb-20 animate-in slide-in-from-right-8 fade-in duration-500 "+(m?"font-mono text-gray-300":""),children:[t.jsxs("div",{className:"flex items-center justify-between mb-8 pb-4 border-b border-white/10",children:[t.jsxs("button",{onClick:a,className:"flex items-center gap-2 font-pixel text-[10px] opacity-70 hover:opacity-100 uppercase tracking-widest "+(m?"text-[#00ff00]":""),children:[t.jsx(_,{size:14})," –ù–ê–ó–ê–î"]}),t.jsxs("div",{className:"flex gap-4",children:[x&&c&&t.jsxs("button",{onClick:()=>{confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É –∫–æ–ª–ª–µ–∫—Ü–∏—é?")&&c(e.id)},className:"text-red-500 hover:text-red-400 transition-all flex items-center gap-2 font-pixel text-[10px] uppercase",children:[t.jsx(V,{size:16})," –£–î–ê–õ–ò–¢–¨"]}),x&&o&&t.jsxs("button",{onClick:o,className:"text-purple-400 hover:text-purple-300 transition-all flex items-center gap-2 font-pixel text-[10px] uppercase",children:[t.jsx(ge,{size:16})," –†–ï–î–ê–ö–¢–ò–†–û–í–ê–¢–¨"]}),t.jsx("button",{className:"opacity-70 hover:opacity-100 transition-all",children:t.jsx(ae,{size:18})})]})]}),t.jsxs("div",{className:"flex flex-col md:flex-row gap-8 mb-12",children:[t.jsx("div",{className:"w-full md:w-1/3 aspect-[4/3] rounded-3xl overflow-hidden border-2 border-white/10 shadow-2xl "+(m?"rounded-none border-[#505050]":""),children:t.jsx("img",{src:e.coverImage,className:"w-full h-full object-cover",alt:e.title})}),t.jsxs("div",{className:"flex-1 space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2 font-pixel text-[10px] text-blue-500 tracking-widest",children:[t.jsx(U,{size:14})," –ö–û–õ–õ–ï–ö–¶–ò–Ø"]}),t.jsx("h1",{className:"text-3xl md:text-5xl font-pixel font-black leading-tight "+(m?"text-[#00ff00]":""),children:e.title}),t.jsx("p",{className:"font-mono text-sm opacity-70 max-w-2xl leading-relaxed",children:e.description||"–ù–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è –¥–ª—è —ç—Ç–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏."}),t.jsxs("div",{className:"pt-4 flex items-center gap-6",children:[t.jsxs("div",{onClick:()=>l(e.owner),className:"flex items-center gap-3 cursor-pointer group",children:[t.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-blue-500/30 p-0.5",children:t.jsx("img",{src:gt(e.owner),className:"w-full h-full object-cover rounded-full"})}),t.jsxs("div",{children:[t.jsx("div",{className:"font-pixel text-[10px] opacity-40 uppercase",children:"–°–æ–∑–¥–∞—Ç–µ–ª—å"}),t.jsxs("div",{className:"font-bold font-pixel text-xs group-hover:text-blue-500 transition-colors "+(m?"text-[#00ff00]":""),children:["@",e.owner]})]})]}),t.jsx("div",{className:"h-10 w-[1px] bg-white/10"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-pixel text-[10px] opacity-40 uppercase",children:"–ê—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤"}),t.jsxs("div",{className:"font-bold font-pixel text-xs",children:[s.length," ITEMS"]})]})]})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("h3",{className:"font-pixel text-xs opacity-50 uppercase tracking-[0.3em] flex items-center gap-2",children:[t.jsx(fe,{size:14})," –°–û–°–¢–ê–í_–≠–ö–°–ü–û–ó–ò–¶–ò–ò"]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[s.map(e=>t.jsx(Rt,{item:e,theme:r,onClick:i,currentUsername:n,onReact:()=>d(e.id),onAuthorClick:l},e.id)),0===s.length&&t.jsx("div",{className:"col-span-full py-12 text-center border-2 border-dashed border-white/5 rounded-2xl opacity-40 font-pixel text-[10px] uppercase",children:"–≠–∫—Å–ø–æ–∑–∏—Ü–∏—è –ø—É—Å—Ç–∞"})]})]})]})},Kt=({theme:s,currentUser:r,partnerUsername:a,messages:i,onBack:l,onSendMessage:o})=>{const[c,d]=e.useState(""),x=e.useRef(null),m=e.useMemo(()=>{const e=new Map;return i.forEach(t=>e.set(t.id,t)),Array.from(e.values()).sort((e,t)=>e.timestamp.localeCompare(t.timestamp))},[i]);e.useEffect(()=>{x.current&&(x.current.scrollTop=x.current.scrollHeight)},[m]);const p="winamp"===s;return t.jsxs("div",{className:"max-w-2xl mx-auto flex flex-col h-[calc(100vh-140px)] animate-in fade-in "+(p?"font-mono text-gray-300":""),children:[t.jsx("div",{className:"flex items-center justify-between p-4 border-b rounded-t-3xl "+(p?"bg-[#191919] border-[#505050]":"border-white/10 bg-white/5"),children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("button",{onClick:l,className:"p-2 rounded-full transition-colors "+(p?"hover:bg-[#505050]":"hover:bg-white/10"),children:t.jsx(_,{size:20})}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("img",{src:gt(a),className:"w-10 h-10 rounded-full border border-green-500/30"}),t.jsxs("div",{children:[t.jsxs("div",{className:"font-pixel text-xs font-bold "+(p?"text-[#00ff00]":""),children:["@",a]}),t.jsxs("div",{className:"flex items-center gap-1 text-[8px] font-mono text-green-500 animate-pulse",children:[t.jsx(we,{size:8})," SECURE_LINK_ESTABLISHED"]})]})]})]})}),t.jsx("div",{ref:x,className:"flex-1 overflow-y-auto p-4 space-y-4 scrollbar-hide no-scrollbar",children:0===m.length?t.jsxs("div",{className:"h-full flex flex-col items-center justify-center opacity-20 space-y-4",children:[t.jsx(C,{size:48}),t.jsx("p",{className:"font-pixel text-[10px] tracking-widest uppercase",children:"–ù–ê–ß–ù–ò–¢–ï –î–ò–ê–õ–û–ì –í –°–ï–¢–ò"})]}):m.map(e=>{const s=e.sender===r.username;return t.jsx("div",{className:`flex ${s?"justify-end":"justify-start"} animate-in slide-in-from-bottom-2`,children:t.jsxs("div",{className:"max-w-[80%] p-4 rounded-2xl font-mono text-sm leading-relaxed break-words "+(s?"bg-green-500 text-black rounded-tr-none":p?"bg-[#191919] border border-[#505050] text-[#00ff00] rounded-tl-none":"bg-white/10 text-white rounded-tl-none"),children:[e.text,t.jsx("div",{className:"text-[9px] mt-2 opacity-50 "+(s?"text-black/60":"text-white/40"),children:e.timestamp.split(",")[1]||e.timestamp})]})},e.id)})}),t.jsx("form",{onSubmit:e=>{e.preventDefault(),c.trim()&&(o(c),d(""))},className:"p-4 border-t rounded-b-3xl "+(p?"bg-[#191919] border-[#505050]":"bg-white/5 border-white/10"),children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{value:c,onChange:e=>d(e.target.value),placeholder:"–í–í–ï–°–¢–ò –°–û–û–ë–©–ï–ù–ò–ï...",className:"flex-1 rounded-xl px-4 py-3 font-mono text-sm focus:outline-none focus:border-green-500 transition-all "+(p?"bg-black/40 border border-[#505050] text-[#00ff00] placeholder-gray-600":"bg-black/40 border border-white/10")}),t.jsx("button",{type:"submit",className:"p-4 bg-green-500 text-black rounded-xl hover:scale-105 active:scale-95 transition-all",children:t.jsx(n,{size:20})})]})})]})};function qt(e,t="medium"){return e?"object"==typeof e&&e[t]?e[t]:"string"==typeof e?e:"https://placehold.co/600x400?text=NO+IMAGE":"https://placehold.co/600x400?text=NO+IMAGE"}function Xt(e,t="medium"){return e&&Array.isArray(e)&&0!==e.length?qt(e[0],t):"https://placehold.co/600x400?text=NO+IMAGE"}const Zt=({theme:r,onBack:a,onSave:i,initialData:l,userArtifacts:n=[],currentUser:c=null,allUsers:d=[]})=>{const[x,m]=e.useState(l?.imageUrls||[]),[p,h]=e.useState(l?.title||""),[u,b]=e.useState(l?.description||""),[f,w]=e.useState(l?.category||Nt.PHONES),[j,N]=e.useState(l?.subcategory||""),[v,y]=e.useState(l?.condition||""),[C,E]=e.useState(l?.videoUrl||""),[S,I]=e.useState(l?.specs||{}),[O,A]=e.useState(l?.tradeStatus||"NONE"),[L,R]=e.useState(l?.relatedIds||[]),[D,z]=e.useState(l?.owner||""),[U,F]=e.useState(l?.price?l.price.toString():""),[P,B]=e.useState(l?.currency||"RUB"),[G,H]=e.useState(l?.tradeRequest||""),$=!0===c?.isAdmin,Y=e.useRef(null),[V,W]=e.useState(null),[K,Z]=e.useState(null),J=(e,t)=>{const s=[...x],[r]=s.splice(e,1);s.splice(t,0,r),m(s)},Q=()=>{W(null),Z(null)},ee=(e=!1)=>{p?i({id:l?.id,title:p,description:u,category:f,subcategory:j,condition:v,videoUrl:C,imageUrls:x.length>0?x:["https://placehold.co/600x400?text=NO+IMAGE"],specs:S,tradeStatus:O,price:U?parseFloat(U):void 0,currency:P,tradeRequest:G,relatedIds:L,isDraft:e,adminOwner:$&&D?D:void 0}):alert("–£–∫–∞–∂–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞")},te="winamp"===r;return t.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 animate-in fade-in pb-32 "+(te?"font-mono text-gray-300":""),children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("button",{onClick:a,className:"flex items-center gap-2 font-pixel text-[10px] opacity-70 hover:opacity-100 uppercase tracking-widest "+(te?"text-[#00ff00]":""),children:[t.jsx(_,{size:14})," –û–¢–ú–ï–ù–ê"]}),t.jsx("h2",{className:"font-pixel text-lg "+(te?"text-[#00ff00]":""),children:l?"–†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–ï":"–ù–û–í–´–ô_–ê–†–¢–ï–§–ê–ö–¢"})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex gap-4 overflow-x-auto pb-4 no-scrollbar",children:[x.map((e,s)=>t.jsxs("div",{draggable:!0,onDragStart:()=>(e=>{W(e)})(s),onDragOver:e=>((e,t)=>{e.preventDefault(),Z(t)})(e,s),onDrop:e=>((e,t)=>{e.preventDefault(),null!==V&&V!==t&&J(V,t),W(null),Z(null)})(e,s),onDragEnd:Q,className:`relative w-32 h-32 md:w-40 md:h-40 flex-shrink-0 group cursor-move transition-all ${V===s?"opacity-50 scale-95":""} ${K===s&&V!==s?"scale-105 ring-2 ring-green-500":""}`,children:[t.jsx("img",{src:qt(e,"thumbnail"),className:"w-full h-full object-cover rounded-2xl border-2 border-white/10"}),0===s&&t.jsx("div",{className:"absolute top-2 left-2 bg-yellow-500 text-black p-1.5 rounded-full shadow-lg",children:t.jsx(k,{size:12,fill:"currentColor"})}),t.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:t.jsx("div",{className:"bg-black/70 text-white p-1 rounded",children:t.jsx(je,{size:14})})}),t.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 to-transparent p-2 opacity-0 group-hover:opacity-100 transition-opacity rounded-b-2xl",children:t.jsxs("div",{className:"flex gap-1 justify-center",children:[s>0&&t.jsx("button",{onClick:e=>{e.stopPropagation(),J(s,s-1)},className:"bg-white/20 hover:bg-white/30 text-white p-1 rounded transition-colors",title:"–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤–ª–µ–≤–æ",children:t.jsx(re,{size:14})}),0!==s&&t.jsx("button",{onClick:e=>{e.stopPropagation(),(e=>{if(0===e)return;const t=[...x],[s]=t.splice(e,1);t.unshift(s),m(t)})(s)},className:"bg-yellow-500/80 hover:bg-yellow-500 text-black p-1 rounded transition-colors",title:"–°–¥–µ–ª–∞—Ç—å –≥–ª–∞–≤–Ω—ã–º",children:t.jsx(k,{size:14})}),s<x.length-1&&t.jsx("button",{onClick:e=>{e.stopPropagation(),J(s,s+1)},className:"bg-white/20 hover:bg-white/30 text-white p-1 rounded transition-colors",title:"–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤–ø—Ä–∞–≤–æ",children:t.jsx(X,{size:14})})]})}),t.jsx("button",{onClick:()=>m(e=>e.filter((e,t)=>t!==s)),className:"absolute -top-2 -right-2 bg-red-500 text-white p-1.5 rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-opacity z-10",children:t.jsx(q,{size:14})})]},s)),t.jsxs("button",{onClick:()=>Y.current?.click(),className:"w-32 h-32 md:w-40 md:h-40 flex-shrink-0 flex flex-col items-center justify-center gap-2 border-2 border-dashed rounded-2xl transition-all "+(te?"border-[#505050] bg-[#191919] text-[#00ff00]":"dark"===r?"border-white/10 hover:border-green-500/50 bg-white/5":"border-black/10 hover:border-black/30"),children:[t.jsx(M,{size:28}),t.jsx("span",{className:"text-[10px] font-pixel",children:"–î–û–ë–ê–í–ò–¢–¨_–§–û–¢–û"})]}),t.jsx("input",{type:"file",ref:Y,className:"hidden",multiple:!0,accept:"image/*",onChange:async e=>{if(e.target.files&&e.target.files.length>0){const t=[...x];for(let s=0;s<e.target.files.length;s++){const r=await ft(e.target.files[s]);t.push(r)}m(t)}}})]}),t.jsx("p",{className:"text-[10px] font-mono opacity-40 text-center md:text-left",children:"–ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–æ 5 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π. –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–π—Ç–µ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞. –ü–µ—Ä–≤–æ–µ —Ñ–æ—Ç–æ ‚Äî –≥–ª–∞–≤–Ω–æ–µ –ø—Ä–µ–≤—å—é."})]}),t.jsx("div",{className:"p-8 rounded-3xl border "+(te?"bg-[#191919] border-[#505050]":"dark"===r?"bg-dark-surface border-white/10":"bg-white border-black/10 shadow-xl"),children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-pixel opacity-50 uppercase tracking-widest mb-2 block",children:"–ù–∞–∑–≤–∞–Ω–∏–µ —ç–∫—Å–ø–æ–Ω–∞—Ç–∞"}),t.jsx("input",{value:p,onChange:e=>h(e.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-5 py-4 font-mono text-sm focus:border-green-500 outline-none transition-colors "+(te?"text-[#00ff00] placeholder-gray-600":""),placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–ª–∏ –º–æ–¥–µ–ª—å..."})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"text-[10px] font-pixel opacity-50 uppercase tracking-widest mb-2 flex items-center gap-2",children:[t.jsx(Ne,{size:12})," –°—Å—ã–ª–∫–∞ –Ω–∞ –≤–∏–¥–µ–æ (YouTube/Rutube)"]}),t.jsx("input",{value:C,onChange:e=>E(e.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-5 py-4 font-mono text-sm focus:border-green-500 outline-none transition-colors "+(te?"text-[#00ff00] placeholder-gray-600":""),placeholder:"https://youtube.com/watch?v=..."})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-pixel opacity-50 uppercase tracking-widest mb-2 block",children:"–ö–∞—Ç–µ–≥–æ—Ä–∏—è"}),t.jsx("select",{value:f,onChange:e=>{w(e.target.value),N(""),y("")},className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-4 font-mono text-sm focus:border-green-500 outline-none appearance-none "+(te?"text-[#00ff00]":""),children:Object.values(Nt).map(e=>t.jsx("option",{value:e,children:e},e))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-pixel opacity-50 uppercase tracking-widest mb-2 block",children:"–ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è"}),t.jsxs("select",{value:j,onChange:e=>N(e.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-4 font-mono text-sm focus:border-green-500 outline-none appearance-none disabled:opacity-30 "+(te?"text-[#00ff00]":""),disabled:!vt[f],children:[t.jsx("option",{value:"",children:"–ù–µ –≤—ã–±—Ä–∞–Ω–æ"}),vt[f]?.map(e=>t.jsx("option",{value:e,children:e},e))]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"text-[10px] font-pixel opacity-50 uppercase tracking-widest mb-2 flex items-center gap-2",children:[t.jsx(T,{size:12})," –ì—Ä–µ–π–¥ / –°–æ—Å—Ç–æ—è–Ω–∏–µ"]}),t.jsxs("select",{value:v,onChange:e=>y(e.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-4 font-mono text-sm focus:border-green-500 outline-none appearance-none "+(te?"text-[#00ff00]":""),children:[t.jsx("option",{value:"",children:"–ù–µ —É–∫–∞–∑–∞–Ω–æ"}),(St[f]||St[Nt.MISC]).map(e=>t.jsx("option",{value:e,children:e},e))]})]})]}),$&&l?.id&&t.jsxs("div",{className:"p-4 border border-yellow-500/30 bg-yellow-500/5 rounded-xl",children:[t.jsxs("label",{className:"text-[10px] font-pixel opacity-70 uppercase tracking-widest mb-2 flex items-center gap-2 text-yellow-500",children:[t.jsx(o,{size:12})," –í–ª–∞–¥–µ–ª–µ—Ü –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–æ–≤)"]}),t.jsxs("select",{value:D,onChange:e=>z(e.target.value),className:"w-full bg-black/30 border border-yellow-500/30 rounded-xl px-4 py-4 font-mono text-sm focus:border-yellow-500 outline-none appearance-none "+(te?"text-[#00ff00]":""),children:[t.jsx("option",{value:"",children:"–í—ã–±–µ—Ä–∏—Ç–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞..."}),d.map(e=>t.jsx("option",{value:e.username,children:e.username},e.username))]}),t.jsx("p",{className:"text-[9px] font-mono opacity-40 mt-2",children:"–ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–¥–∞—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –¥—Ä—É–≥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"text-[10px] font-pixel opacity-50 uppercase tracking-widest mb-2 flex items-center gap-2",children:[t.jsx(g,{size:12})," –°—Ç–∞—Ç—É—Å (–¢–æ—Ä–≥–æ–≤—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª)"]}),t.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:Object.entries(kt).filter(([e])=>"NONE"!==e).map(([e,r])=>{const a=e,i=O===a;return t.jsxs("button",{onClick:()=>A(i?"NONE":a),className:`p-3 rounded-xl border text-[10px] font-bold uppercase transition-all flex items-center justify-center gap-2 ${i?r.color:"border-white/10 opacity-50 hover:opacity-100 hover:border-white/30"}`,children:[r.icon&&s.createElement(r.icon,{size:14}),r.label]},e)})}),"FOR_SALE"===O&&t.jsxs("div",{className:"flex gap-2 animate-in slide-in-from-top-2",children:[t.jsx("input",{type:"number",value:U,onChange:e=>F(e.target.value),placeholder:"–¶–µ–Ω–∞...",className:"flex-1 bg-black/30 border border-white/10 rounded-xl px-4 py-3 font-mono text-sm focus:border-green-500 outline-none "+(te?"text-[#00ff00]":"")}),t.jsxs("select",{value:P,onChange:e=>B(e.target.value),className:"bg-black/30 border border-white/10 rounded-xl px-4 py-3 font-mono text-sm focus:border-green-500 outline-none "+(te?"text-[#00ff00]":""),children:[t.jsx("option",{value:"RUB",children:"RUB"}),t.jsx("option",{value:"USD",children:"USD"}),t.jsx("option",{value:"ETH",children:"ETH"})]})]}),"FOR_TRADE"===O&&t.jsx("div",{className:"animate-in slide-in-from-top-2",children:t.jsx("input",{value:G,onChange:e=>H(e.target.value),placeholder:"–ß—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤–∑–∞–º–µ–Ω? (–Ω–∞–ø—Ä–∏–º–µ—Ä: Nintendo 3DS)",className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 font-mono text-sm focus:border-green-500 outline-none "+(te?"text-[#00ff00]":"")})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-pixel opacity-50 uppercase tracking-widest mb-2 block",children:"–û–ø–∏—Å–∞–Ω–∏–µ –∏ –∏—Å—Ç–æ—Ä–∏—è"}),t.jsx("textarea",{value:u,onChange:e=>b(e.target.value),rows:6,className:"w-full bg-black/30 border border-white/10 rounded-xl px-5 py-4 font-mono text-sm focus:border-green-500 outline-none resize-none leading-relaxed "+(te?"text-[#00ff00] placeholder-gray-600":""),placeholder:"–û–ø–∏—à–∏—Ç–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç, –µ–≥–æ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –∏ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏..."})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("h3",{className:"font-pixel text-[11px] opacity-70 tracking-widest uppercase flex items-center gap-2",children:[t.jsx(ve,{size:14,className:"text-blue-400"})," –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ô_–ü–ê–°–ü–û–†–¢"]})}),t.jsx("div",{className:"grid grid-cols-1 gap-4 p-5 rounded-2xl border border-white/5 "+(te?"bg-black":"bg-black/20"),children:(yt[f]||["–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å","–ì–æ–¥","–ú–æ–¥–µ–ª—å"]).map(e=>t.jsxs("div",{children:[t.jsx("label",{className:"text-[9px] font-mono opacity-40 uppercase mb-1 block",children:e}),t.jsx("input",{value:S[e]||"",onChange:t=>I(s=>({...s,[e]:t.target.value})),className:"w-full bg-black/20 border border-white/5 rounded-lg px-4 py-3 font-mono text-xs focus:border-green-500 outline-none transition-all "+(te?"text-[#00ff00]":""),placeholder:`–£–∫–∞–∂–∏—Ç–µ ${e}...`})]},e))}),t.jsxs("div",{className:"pt-4 border-t border-white/10",children:[t.jsxs("h3",{className:"font-pixel text-[11px] opacity-70 tracking-widest uppercase flex items-center gap-2 mb-4",children:[t.jsx(oe,{size:14,className:"text-yellow-400"})," –°–í–Ø–ó–ê–ù–ù–´–ï –ü–†–ï–î–ú–ï–¢–´"]}),t.jsxs("div",{className:"max-h-48 overflow-y-auto grid grid-cols-1 gap-2 pr-2 custom-scrollbar",children:[0===n.filter(e=>e.id!==l?.id).length&&t.jsx("div",{className:"text-center opacity-30 text-[10px] py-4",children:"–ù–µ—Ç –¥—Ä—É–≥–∏—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –¥–ª—è —Å–≤—è–∑–∫–∏"}),n.filter(e=>e.id!==l?.id).map(e=>t.jsxs("div",{onClick:()=>{return t=e.id,void R(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"flex items-center gap-3 p-2 rounded-lg border cursor-pointer transition-all "+(L.includes(e.id)?"bg-green-500/10 border-green-500 text-green-500":"border-white/10 hover:bg-white/5"),children:[t.jsx("div",{className:"w-8 h-8 rounded bg-gray-800 overflow-hidden flex-shrink-0",children:t.jsx("img",{src:"string"==typeof e.imageUrls[0]?e.imageUrls[0]:e.imageUrls[0]?.thumbnail||"https://placehold.co/600x400?text=NO+IMAGE",className:"w-full h-full object-cover"})}),t.jsx("div",{className:"text-xs truncate flex-1",children:e.title}),L.includes(e.id)&&t.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"})]},e.id))]})]})]})]})}),t.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[t.jsxs("button",{onClick:()=>ee(!1),className:"flex-1 py-5 bg-green-500 text-black rounded-2xl font-pixel text-sm tracking-[0.2em] hover:scale-[1.01] active:scale-95 transition-all shadow-[0_0_30px_rgba(74,222,128,0.4)] flex items-center justify-center gap-3 font-black",children:[t.jsx(ye,{size:20})," –°–û–•–†–ê–ù–ò–¢–¨ –í –ê–†–•–ò–í"]}),t.jsxs("button",{onClick:()=>ee(!0),className:"px-8 py-5 bg-white/5 border-2 border-white/10 rounded-2xl font-pixel text-[10px] opacity-60 hover:opacity-100 hover:bg-white/10 transition-all flex items-center justify-center gap-3 tracking-widest",children:[t.jsx(ke,{size:20})," –í –ß–ï–†–ù–û–í–ò–ö–ò"]})]})]})]})},Jt=({theme:s,userArtifacts:r,initialData:a,onBack:i,onSave:l,onDelete:n})=>{const[o,c]=e.useState(a?.title||""),[d,x]=e.useState(a?.description||""),[m,p]=e.useState(a?.coverImage||""),[h,u]=e.useState(a?.exhibitIds||[]),b=e.useRef(null),g="winamp"===s;return t.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 animate-in fade-in pb-32 "+(g?"font-mono text-gray-300":""),children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("button",{onClick:i,className:"flex items-center gap-2 font-pixel text-[10px] opacity-70 hover:opacity-100 uppercase tracking-widest "+(g?"text-[#00ff00]":""),children:[t.jsx(_,{size:14})," –û–¢–ú–ï–ù–ê"]}),t.jsxs("div",{className:"flex gap-4",children:[a&&n&&t.jsxs("button",{onClick:()=>{confirm("–£–¥–∞–ª–∏—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é?")&&n(a.id)},className:"text-red-500 hover:text-red-400 flex items-center gap-2 font-pixel text-[10px] uppercase",children:[t.jsx(V,{size:14})," –£–î–ê–õ–ò–¢–¨"]}),t.jsx("h2",{className:"font-pixel text-lg "+(g?"text-[#00ff00]":""),children:a?"–†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–ï":"–ù–û–í–ê–Ø_–ö–û–õ–õ–ï–ö–¶–ò–Ø"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{onClick:()=>b.current?.click(),className:"aspect-video rounded-2xl border-2 border-dashed flex flex-col items-center justify-center cursor-pointer transition-all relative overflow-hidden group "+(g?"border-[#505050] bg-[#191919] text-[#00ff00]":"dark"===s?"border-white/10 hover:border-green-500/50 bg-white/5":"border-black/10 hover:border-black/30"),children:[m?t.jsxs(t.Fragment,{children:[t.jsx("img",{src:m,className:"absolute inset-0 w-full h-full object-cover"}),t.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity",children:t.jsx(M,{size:32,className:"text-white"})})]}):t.jsxs(t.Fragment,{children:[t.jsx(M,{size:32,className:"opacity-50 mb-2"}),t.jsx("span",{className:"text-[10px] font-pixel opacity-50",children:"–û–ë–õ–û–ñ–ö–ê"})]}),t.jsx("input",{type:"file",ref:b,className:"hidden",accept:"image/*",onChange:async e=>{if(e.target.files&&e.target.files[0]){const t=await ft(e.target.files[0]);p(t)}}})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-pixel opacity-50 uppercase tracking-widest mb-2 block",children:"–ù–∞–∑–≤–∞–Ω–∏–µ"}),t.jsx("input",{value:o,onChange:e=>c(e.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-5 py-4 font-mono text-sm focus:border-green-500 outline-none "+(g?"text-[#00ff00] placeholder-gray-600":""),placeholder:"–ù–∞–ø—Ä–∏–º–µ—Ä: –ú–æ–∏ —Ä–µ—Ç—Ä–æ –∫–æ–Ω—Å–æ–ª–∏"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-pixel opacity-50 uppercase tracking-widest mb-2 block",children:"–û–ø–∏—Å–∞–Ω–∏–µ"}),t.jsx("textarea",{value:d,onChange:e=>x(e.target.value),rows:4,className:"w-full bg-black/30 border border-white/10 rounded-xl px-5 py-4 font-mono text-sm focus:border-green-500 outline-none resize-none "+(g?"text-[#00ff00] placeholder-gray-600":""),placeholder:"–û —á–µ–º —ç—Ç–∞ –ø–æ–¥–±–æ—Ä–∫–∞..."})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"font-pixel text-[11px] opacity-70 tracking-widest uppercase",children:"–í–´–ë–ï–†–ò–¢–ï –ê–†–¢–ï–§–ê–ö–¢–´"}),t.jsxs("span",{className:"text-xs font-mono",children:[h.length," –≤—ã–±—Ä–∞–Ω–æ"]})]}),t.jsx("div",{className:"grid grid-cols-2 gap-3 max-h-[500px] overflow-y-auto pr-2 custom-scrollbar",children:0===r.length?t.jsxs("div",{className:"col-span-2 text-center py-10 opacity-50 font-mono text-xs border border-dashed border-white/10 rounded-xl",children:["–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —Å–≤–æ–∏—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤. ",t.jsx("br",{})," –°–æ–∑–¥–∞–π—Ç–µ –∏—Ö, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é."]}):r.map(e=>{const s=h.includes(e.id);return t.jsxs("div",{onClick:()=>{return t=e.id,void u(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"relative aspect-square rounded-xl overflow-hidden cursor-pointer border-2 transition-all "+(s?"border-green-500 opacity-100":"border-transparent opacity-60 hover:opacity-100"),children:[t.jsx("img",{src:"string"==typeof e.imageUrls[0]?e.imageUrls[0]:e.imageUrls[0]?.thumbnail||"https://placehold.co/600x400?text=NO+IMAGE",className:"w-full h-full object-cover"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent flex flex-col justify-end p-2",children:t.jsx("span",{className:"text-[9px] font-pixel text-white truncate",children:e.title})}),t.jsx("div",{className:"absolute top-2 right-2",children:s?t.jsx(be,{size:18,className:"text-green-500 bg-black rounded-full"}):t.jsx(Ce,{size:18,className:"text-white drop-shadow-md"})})]},e.id)})})]})]}),t.jsxs("button",{onClick:()=>o.trim()?m?void l({id:a?.id,title:o,description:d,coverImage:m,exhibitIds:h,likes:a?.likes||0,likedBy:a?.likedBy||[]}):alert("–í—ã–±–µ—Ä–∏—Ç–µ –æ–±–ª–æ–∂–∫—É"):alert("–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏"),className:"w-full py-5 bg-green-500 text-black rounded-2xl font-pixel text-sm tracking-[0.2em] hover:scale-[1.01] active:scale-95 transition-all shadow-[0_0_30px_rgba(74,222,128,0.4)] flex items-center justify-center gap-3 font-black",children:[t.jsx(ye,{size:20})," –°–û–•–†–ê–ù–ò–¢–¨ –ö–û–õ–õ–ï–ö–¶–ò–Æ"]})]})},Qt=({theme:r,onBack:a,onSave:i})=>{const[l,n]=e.useState(""),[o,c]=e.useState(Nt.MISC),[d,x]=e.useState("MEDIUM"),[m,p]=e.useState(""),[h,u]=e.useState(""),b=e.useRef(null),g="winamp"===r;return t.jsxs("div",{className:"max-w-xl mx-auto space-y-8 animate-in fade-in pb-32 "+(g?"font-mono text-gray-300":""),children:[t.jsxs("div",{className:"flex items-center justify-between border-b border-dashed border-white/10 pb-4",children:[t.jsxs("button",{onClick:a,className:"flex items-center gap-2 font-pixel text-[10px] opacity-70 hover:opacity-100 uppercase tracking-widest "+(g?"text-[#00ff00]":""),children:[t.jsx(_,{size:14})," –û–¢–ú–ï–ù–ê"]}),t.jsxs("h2",{className:"font-pixel text-lg flex items-center gap-2 "+(g?"text-[#00ff00]":""),children:[t.jsx(j,{size:18})," –ù–û–í–û–ï –ñ–ï–õ–ê–ù–ò–ï"]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{onClick:()=>b.current?.click(),className:"aspect-video rounded-2xl border-2 border-dashed flex flex-col items-center justify-center cursor-pointer transition-all relative overflow-hidden group "+(g?"border-[#505050] bg-[#191919] text-[#00ff00]":"dark"===r?"border-white/10 hover:border-purple-500/50 bg-white/5":"border-black/10 hover:border-black/30"),children:[h?t.jsxs(t.Fragment,{children:[t.jsx("img",{src:h,className:"absolute inset-0 w-full h-full object-cover opacity-50 group-hover:opacity-30 transition-opacity"}),t.jsx("div",{className:"z-10 text-xs font-pixel uppercase tracking-widest bg-black/50 px-3 py-1 rounded",children:"–ò–∑–º–µ–Ω–∏—Ç—å —Ä–µ—Ñ–µ—Ä–µ–Ω—Å"})]}):t.jsxs(t.Fragment,{children:[t.jsx(M,{size:32,className:"opacity-50 mb-2"}),t.jsx("span",{className:"text-[10px] font-pixel opacity-50",children:"–î–û–ë–ê–í–ò–¢–¨ –†–ï–§–ï–†–ï–ù–° (–§–û–¢–û)"})]}),t.jsx("input",{type:"file",ref:b,className:"hidden",accept:"image/*",onChange:async e=>{if(e.target.files&&e.target.files[0]){const t=await ft(e.target.files[0]);u(t)}}})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-pixel opacity-50 uppercase tracking-widest mb-2 block",children:"–ß—Ç–æ –≤—ã –∏—â–µ—Ç–µ?"}),t.jsx("input",{value:l,onChange:e=>n(e.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-5 py-4 font-mono text-sm focus:border-purple-500 outline-none transition-colors "+(g?"text-[#00ff00] placeholder-gray-600":""),placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–Ω—Å–æ–ª–∏, –∏–≥—Ä—ã, –≥–∞–¥–∂–µ—Ç–∞...",autoFocus:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-pixel opacity-50 uppercase tracking-widest mb-2 block",children:"–ö–∞—Ç–µ–≥–æ—Ä–∏—è"}),t.jsx("select",{value:o,onChange:e=>c(e.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-4 font-mono text-sm focus:border-purple-500 outline-none appearance-none "+(g?"text-[#00ff00]":""),children:Object.values(Nt).map(e=>t.jsx("option",{value:e,children:e},e))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-pixel opacity-50 uppercase tracking-widest mb-2 block",children:"–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–æ–∏—Å–∫–∞"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(Ct).map(([e,r])=>t.jsxs("button",{onClick:()=>x(e),className:"p-3 rounded-xl border flex items-center justify-center gap-2 transition-all "+(d===e?r.color+" bg-white/10":"border-white/10 opacity-50 hover:opacity-100"),children:[s.createElement(r.icon,{size:14}),t.jsx("span",{className:"text-[10px] font-bold uppercase",children:r.label})]},e))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-pixel opacity-50 uppercase tracking-widest mb-2 block",children:"–ó–∞–º–µ—Ç–∫–∏ (–ë—é–¥–∂–µ—Ç, —Å–æ—Å—Ç–æ—è–Ω–∏–µ, —Ä–µ–≥–∏–æ–Ω)"}),t.jsx("textarea",{value:m,onChange:e=>p(e.target.value),rows:4,className:"w-full bg-black/30 border border-white/10 rounded-xl px-5 py-4 font-mono text-sm focus:border-purple-500 outline-none resize-none "+(g?"text-[#00ff00] placeholder-gray-600":""),placeholder:"–ò—â—É –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ Mint, –±—é–¥–∂–µ—Ç –¥–æ 5000—Ä..."})]})]}),t.jsxs("button",{onClick:()=>{if(!l.trim())return alert("–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≥–æ, —á—Ç–æ –∏—â–µ—Ç–µ");i({id:crypto.randomUUID(),title:l,category:o,priority:d,notes:m,referenceImageUrl:h,timestamp:(new Date).toISOString()})},className:"w-full py-5 bg-purple-500 text-white rounded-2xl font-pixel text-sm tracking-[0.2em] hover:scale-[1.01] active:scale-95 transition-all shadow-[0_0_30px_rgba(168,85,247,0.4)] flex items-center justify-center gap-3 font-black",children:[t.jsx(j,{size:20})," –î–û–ë–ê–í–ò–¢–¨ –í –í–ò–®–õ–ò–°–¢"]})]})]})},es=({item:r,theme:a,onBack:i,onDelete:l,onAuthorClick:n,currentUser:o,userInventory:c=[]})=>{const d=Ct[r.priority],x=o===r.owner,m="xp"===a,p="winamp"===a,[h,u]=e.useState(!1),b=xt().users.find(e=>e.username===r.owner)||{username:r.owner},g=xt().users.find(e=>e.username===o)||{username:o};return t.jsxs("div",{className:"max-w-2xl mx-auto animate-in fade-in pb-20 pt-4 px-4 "+(p?"font-mono text-gray-300":""),children:[h&&t.jsx(Mt,{recipient:b,currentUser:g,userInventory:c,onClose:()=>u(!1),isWishlist:!0,wishlistId:r.id}),t.jsxs("div",{className:"flex items-center justify-between mb-6 border-b border-white/10 pb-4",children:[t.jsxs("button",{onClick:i,className:"flex items-center gap-2 font-pixel text-[10px] opacity-70 hover:opacity-100 uppercase tracking-widest "+(p?"text-[#00ff00]":""),children:[t.jsx(_,{size:14})," –ù–ê–ó–ê–î"]}),x&&l&&t.jsxs("button",{onClick:()=>l(r.id),className:"text-red-500 hover:text-red-400 transition-all flex items-center gap-2 font-pixel text-[10px] uppercase",children:[t.jsx(V,{size:14})," –£–î–ê–õ–ò–¢–¨ –ó–ê–ü–†–û–°"]})]}),t.jsx("div",{className:"p-1 rounded-3xl border-2 border-dashed "+(m?"border-[#0058EE] bg-white":p?"border-[#505050] bg-[#191919]":"border-purple-500/30 "+("dark"===a?"bg-dark-surface":"bg-white")),children:t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsx("div",{className:"flex justify-center",children:t.jsxs("div",{className:`px-4 py-1.5 rounded-full border flex items-center gap-2 text-[10px] font-pixel font-bold uppercase tracking-widest ${d.color} bg-black/5`,children:[s.createElement(d.icon,{size:14}),"WANTED: ",r.priority," PRIORITY"]})}),t.jsxs("div",{className:"aspect-video rounded-xl overflow-hidden border-2 relative flex items-center justify-center "+(p?"border-[#505050] bg-black":"dark"===a?"border-white/10 bg-black/20":"border-black/10 bg-gray-50"),children:[r.referenceImageUrl?t.jsx("img",{src:r.referenceImageUrl,className:"w-full h-full object-contain",alt:r.title}):t.jsxs("div",{className:"flex flex-col items-center opacity-30",children:[t.jsx(j,{size:48}),t.jsx("span",{className:"font-pixel text-[10px] mt-2",children:"–ù–ï–¢ –†–ï–§–ï–†–ï–ù–°–ê"})]}),"GRAIL"===r.priority&&t.jsx("div",{className:"absolute inset-0 border-4 border-yellow-500/20 pointer-events-none animate-pulse"})]}),t.jsxs("div",{className:"text-center space-y-2",children:[t.jsx("div",{className:"font-pixel text-[10px] opacity-50 uppercase tracking-widest "+(p?"text-[#00ff00]":""),children:r.category}),t.jsx("h1",{className:"text-2xl md:text-3xl font-pixel font-black "+(p?"text-[#00ff00]":""),children:r.title})]}),t.jsxs("div",{className:"p-6 rounded-xl border "+(p?"bg-black border-[#505050]":"dark"===a?"bg-black/30 border-white/10":"bg-gray-100 border-black/5"),children:[t.jsxs("h3",{className:"font-pixel text-[10px] opacity-50 mb-3 flex items-center gap-2 uppercase tracking-widest",children:[t.jsx(N,{size:14})," –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞ / –ó–∞–º–µ—Ç–∫–∏"]}),t.jsx("p",{className:"font-mono text-sm leading-relaxed whitespace-pre-wrap italic "+(p?"text-[#00ff00]":""),children:r.notes||"–ê–≤—Ç–æ—Ä –Ω–µ –æ—Å—Ç–∞–≤–∏–ª –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–∏–º–µ—á–∞–Ω–∏–π –∫ –ø–æ–∏—Å–∫—É."})]}),t.jsx("div",{className:"flex items-center justify-center pt-4 border-t border-dashed border-white/10",children:t.jsxs("div",{onClick:()=>n(r.owner),className:"flex items-center gap-3 cursor-pointer group p-2 hover:bg-white/5 rounded-xl transition-all",children:[t.jsx("img",{src:gt(r.owner),className:"w-10 h-10 rounded-full border-2 border-purple-500/30"}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-pixel text-[9px] opacity-50 uppercase",children:"–ò—â–µ—Ç –∞–≥–µ–Ω—Ç"}),t.jsxs("div",{className:"font-bold font-pixel text-xs group-hover:text-purple-400 transition-colors",children:["@",r.owner]})]})]})}),!x&&t.jsxs("div",{className:"text-center pt-4 space-y-3",children:[t.jsx("p",{className:"text-[10px] opacity-40 font-mono",children:"–ï—Å—Ç—å —ç—Ç–æ—Ç –ø—Ä–µ–¥–º–µ—Ç?"}),t.jsxs("button",{onClick:()=>u(!0),className:"w-full px-6 py-4 bg-green-600 text-white font-pixel text-xs font-bold rounded-xl hover:bg-green-500 transition-transform shadow-lg shadow-green-900/20 flex items-center justify-center gap-2 uppercase tracking-widest",children:[t.jsx(I,{size:16})," –ï—Å—Ç—å —É –º–µ–Ω—è! –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å"]}),t.jsx("button",{onClick:()=>n(r.owner),className:"text-[10px] font-bold text-purple-400 hover:underline uppercase",children:"–ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ"})]})]})})]})},ts=({type:e,username:s,currentUserUsername:r,theme:a,onBack:i,onUserClick:n})=>{const o=xt().users,c=o.find(e=>e.username===s);if(!c)return t.jsxs("div",{className:"p-8 text-center font-pixel",children:[t.jsxs("button",{onClick:i,className:"mb-4 flex items-center gap-2 mx-auto",children:[t.jsx(_,{size:16})," –ù–ê–ó–ê–î"]}),"–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨ –ù–ï –ù–ê–ô–î–ï–ù"]});const d="followers"===e?c.followers||[]:c.following||[],x="followers"===e?"–ü–û–î–ü–ò–°–ß–ò–ö–ò":"–ü–û–î–ü–ò–°–ö–ò",m="winamp"===a;return t.jsxs("div",{className:"max-w-2xl mx-auto animate-in fade-in pb-20 pt-4 px-4 "+(m?"font-mono text-gray-300":""),children:[t.jsxs("div",{className:"flex items-center gap-4 mb-6 border-b border-white/10 pb-4",children:[t.jsxs("button",{onClick:i,className:"opacity-70 hover:opacity-100 flex items-center gap-2 font-pixel text-xs "+(m?"text-[#00ff00]":""),children:[t.jsx(_,{size:16})," –ù–ê–ó–ê–î"]}),t.jsxs("h2",{className:"font-pixel text-lg font-bold "+(m?"text-[#00ff00]":""),children:[x," ",t.jsxs("span",{className:"text-green-500",children:["@",s]})]})]}),t.jsx("div",{className:"space-y-3",children:0===d.length?t.jsx("div",{className:"text-center opacity-50 py-12 font-mono text-xs border-2 border-dashed border-white/10 rounded-xl",children:"–°–ü–ò–°–û–ö –ü–£–°–¢"}):d.map(e=>{const s=o.find(t=>t.username===e),i=s?.avatarUrl||gt(e),c=s?.tagline||"No status",d=(e=>{if(!r)return!1;const t=o.find(e=>e.username===r);return t?.following.includes(e)})(e),x=e===r;return t.jsxs("div",{onClick:()=>n(e),className:"flex items-center justify-between p-4 rounded-xl border transition-all cursor-pointer hover:bg-white/5 \n                                    "+(m?"bg-[#191919] border-[#505050] text-[#00ff00]":"dark"===a?"bg-dark-surface border-white/10 text-gray-200":"bg-white border-black/10 text-gray-800"),children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border border-white/20",children:t.jsx("img",{src:i,alt:e,className:"w-full h-full object-cover"})}),t.jsxs("div",{children:[t.jsxs("div",{className:"font-bold font-pixel text-xs "+(m?"text-[#00ff00]":""),children:["@",e]}),t.jsx("div",{className:"text-[10px] font-mono opacity-50 truncate max-w-[150px]",children:c})]})]}),!x&&r&&t.jsx("button",{onClick:t=>(async(e,t)=>{e.stopPropagation(),r&&await wt(r,t)})(t,e),className:"p-2 rounded-lg transition-all "+(d?"bg-transparent border border-white/20 opacity-50":"bg-green-500 text-black shadow-[0_0_10px_rgba(74,222,128,0.3)]"),children:d?t.jsx(Ee,{size:16}):t.jsx(l,{size:16})})]},e)})})]})},ss=({theme:s,exhibits:r,collections:a,users:i,onBack:l,onExhibitClick:n,onCollectionClick:o,onUserClick:c,onReact:d,currentUser:x})=>{const[m,p]=e.useState(""),[h,u]=e.useState("ARTIFACTS"),b=e.useMemo(()=>{if(!m)return[];const e=m.toLowerCase();return r.filter(t=>{if(t.isDraft)return!1;const s=t.title.toLowerCase().includes(e),r=t.description.toLowerCase().includes(e),a=t.category.toLowerCase().includes(e),i=t.owner.toLowerCase().includes(e),l=!!t.specs&&Object.values(t.specs).some(t=>t.toLowerCase().includes(e));return s||r||a||i||l})},[m,r]),g=e.useMemo(()=>{if(!m)return[];const e=m.toLowerCase();return a.filter(t=>t.title.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)||t.owner.toLowerCase().includes(e))},[m,a]),f=e.useMemo(()=>{if(!m)return[];const e=m.toLowerCase();return i.filter(t=>t.username.toLowerCase().includes(e)||t.tagline.toLowerCase().includes(e))},[m,i]),w="winamp"===s;return t.jsxs("div",{className:"max-w-4xl mx-auto animate-in fade-in pb-32",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-6 sticky top-20 z-30 pt-4 pb-4 border-b backdrop-blur-md "+(w?"bg-[#282828]/90 border-[#505050]":"bg-transparent border-white/10"),children:[t.jsx("button",{onClick:l,className:"p-2 rounded-full transition-colors "+(w?"hover:bg-[#505050]":"hover:bg-white/10"),children:t.jsx(_,{size:20,className:w?"text-[#00ff00]":""})}),t.jsxs("div",{className:"flex-1 flex items-center px-4 py-3 rounded-2xl border "+(w?"bg-black border-[#505050] text-[#00ff00]":"dark"===s?"bg-black/40 border-white/20":"bg-white border-black/10"),children:[t.jsx(j,{size:18,className:"opacity-50 mr-3"}),t.jsx("input",{autoFocus:!0,type:"text",value:m,onChange:e=>p(e.target.value),placeholder:"–ü–û–ò–°–ö –ü–û –ë–ê–ó–ï –î–ê–ù–ù–´–•...",className:"bg-transparent border-none outline-none text-sm font-mono w-full "+(w?"text-[#00ff00] placeholder-[#00ff00]/50":"")})]})]}),t.jsxs("div",{className:"flex mb-8 border-b "+(w?"border-[#505050]":"border-gray-500/30"),children:[t.jsxs("button",{onClick:()=>u("ARTIFACTS"),className:"flex-1 pb-3 text-xs font-pixel flex justify-center items-center gap-2 "+("ARTIFACTS"===h?w?"text-[#00ff00] border-b-2 border-[#00ff00]":"text-green-500 border-b-2 border-green-500":"opacity-50"),children:[t.jsx(fe,{size:14})," –ê–†–¢–ï–§–ê–ö–¢–´",m&&t.jsx("span",{className:"bg-white/10 px-1.5 rounded-full text-[9px]",children:b.length})]}),t.jsxs("button",{onClick:()=>u("COLLECTIONS"),className:"flex-1 pb-3 text-xs font-pixel flex justify-center items-center gap-2 "+("COLLECTIONS"===h?w?"text-[#00ff00] border-b-2 border-[#00ff00]":"text-green-500 border-b-2 border-green-500":"opacity-50"),children:[t.jsx(Se,{size:14})," –ö–û–õ–õ–ï–ö–¶–ò–ò",m&&t.jsx("span",{className:"bg-white/10 px-1.5 rounded-full text-[9px]",children:g.length})]}),t.jsxs("button",{onClick:()=>u("USERS"),className:"flex-1 pb-3 text-xs font-pixel flex justify-center items-center gap-2 "+("USERS"===h?w?"text-[#00ff00] border-b-2 border-[#00ff00]":"text-green-500 border-b-2 border-green-500":"opacity-50"),children:[t.jsx(de,{size:14})," –õ–Æ–î–ò",m&&t.jsx("span",{className:"bg-white/10 px-1.5 rounded-full text-[9px]",children:f.length})]})]}),t.jsxs("div",{className:"space-y-6",children:[!m&&t.jsx("div",{className:"text-center py-20 opacity-30 font-pixel text-xs uppercase tracking-widest",children:"–í–í–ï–î–ò–¢–ï –ó–ê–ü–†–û–° –î–õ–Ø –ü–û–ò–°–ö–ê"}),m&&"ARTIFACTS"===h&&t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:0===b.length?t.jsx("div",{className:"col-span-full text-center opacity-50 py-10 font-mono text-xs",children:"–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ"}):b.map(e=>t.jsx(Rt,{item:e,theme:s,onClick:n,currentUsername:x?.username||"",onReact:()=>d(e.id),onAuthorClick:c},e.id))}),m&&"COLLECTIONS"===h&&t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:0===g.length?t.jsx("div",{className:"col-span-full text-center opacity-50 py-10 font-mono text-xs",children:"–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ"}):g.map(e=>t.jsx(Dt,{col:e,theme:s,onClick:o,onShare:()=>{}},e.id))}),m&&"USERS"===h&&t.jsx("div",{className:"space-y-4",children:0===f.length?t.jsx("div",{className:"text-center opacity-50 py-10 font-mono text-xs",children:"–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ"}):f.map(e=>t.jsxs("div",{onClick:()=>c(e.username),className:"flex items-center gap-4 p-4 rounded-xl border cursor-pointer hover:bg-white/5 "+(w?"border-[#505050] bg-[#191919]":"dark"===s?"border-white/10 bg-dark-surface":"border-black/10 bg-white"),children:[t.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border border-white/20",children:t.jsx("img",{src:e.avatarUrl||gt(e.username),className:"w-full h-full object-cover"})}),t.jsxs("div",{children:[t.jsxs("div",{className:"font-bold font-pixel text-sm "+(w?"text-[#00ff00]":""),children:["@",e.username]}),t.jsx("div",{className:"text-[10px] font-mono opacity-60 "+(w?"text-[#00ff00]":""),children:e.tagline})]})]},e.username))})]})]})},rs=({ownerUsername:s,currentUser:r,wishlistItems:a,theme:i,onBack:l,onItemClick:n,onUserClick:o})=>{const[c,d]=e.useState(!1),x="winamp"===i;return t.jsxs("div",{className:"max-w-6xl mx-auto animate-in fade-in pb-32 pt-4 px-4 "+(x?"font-mono text-gray-300":""),children:[t.jsxs("div",{className:"flex items-center justify-between mb-8 pb-4 border-b border-white/10",children:[t.jsxs("button",{onClick:l,className:"flex items-center gap-2 font-pixel text-[10px] opacity-70 hover:opacity-100 uppercase tracking-widest "+(x?"text-[#00ff00]":""),children:[t.jsx(_,{size:14})," –ù–ê–ó–ê–î"]}),t.jsxs("button",{onClick:()=>{const e=window.location.href;navigator.clipboard.writeText(e),d(!0),setTimeout(()=>d(!1),2e3)},className:"flex items-center gap-2 font-pixel text-[10px] uppercase tracking-widest transition-all "+(c?"text-green-500":"opacity-70 hover:opacity-100"),children:[t.jsx(ae,{size:14})," ",c?"–°–°–´–õ–ö–ê –°–ö–û–ü–ò–†–û–í–ê–ù–ê":"–ü–û–î–ï–õ–ò–¢–¨–°–Ø"]})]}),t.jsxs("div",{className:"text-center mb-10",children:[t.jsxs("div",{className:"inline-block relative mb-4",children:[t.jsx("img",{src:gt(s),className:"w-20 h-20 rounded-full border-4 "+(x?"border-[#505050]":"border-purple-500/30")}),t.jsx("div",{className:"absolute -bottom-2 -right-2 bg-black text-white p-2 rounded-full border border-white/10",children:t.jsx(Ie,{size:16,className:x?"text-[#00ff00]":"text-purple-400"})})]}),t.jsxs("h1",{className:"text-2xl md:text-4xl font-pixel font-black uppercase mb-2 "+(x?"text-[#00ff00]":""),children:["WISHLIST_@",s]}),t.jsx("p",{className:"font-mono text-xs opacity-50 uppercase tracking-widest",children:"–ì–ª–æ–±–∞–ª—å–Ω—ã–π —Ä–æ–∑—ã—Å–∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤"})]}),0===a.length?t.jsxs("div",{className:"p-12 border-2 border-dashed rounded-xl flex flex-col items-center justify-center text-center opacity-50 "+(x?"border-[#505050]":"border-white/10"),children:[t.jsx(j,{size:48,className:"mb-4 opacity-50"}),t.jsx("p",{className:"font-mono text-sm uppercase",children:"–°–ø–∏—Å–æ–∫ –∂–µ–ª–∞–µ–º–æ–≥–æ –ø—É—Å—Ç"})]}):t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:a.map(e=>t.jsx(At,{item:e,theme:i,onClick:n,onUserClick:o},e.id))})]})},as=({viewMode:e})=>t.jsx("div",{className:`animate-pulse ${"GRID"===e?"aspect-[3/4]":"h-24"} bg-white/5 rounded-xl border border-white/5`}),is=({theme:s,user:r,stories:a,exhibits:i,wishlist:l,collections:n,feedMode:o,setFeedMode:c,feedViewMode:d,setFeedViewMode:x,feedType:m,setFeedType:p,selectedCategory:h,setSelectedCategory:u,onNavigate:b,onExhibitClick:g,onReact:f,onUserClick:w,onWishlistClick:N,onCollectionClick:v})=>{const y="winamp"===s,[k,C]=e.useState(null),[S,I]=e.useState(new Set),[T,O]=e.useState(100),A=e.useRef(null);e.useEffect(()=>{C(null),O(100)},[h,m]);const L=e.useMemo(()=>i.filter(e=>e.owner!==r.username&&(!e.isDraft&&(("–í–°–ï"===h||e.category===h)&&((!k||e.subcategory===k)&&!("FOLLOWING"===m&&!r.following.includes(e.owner)))))).map(e=>({...e,_ts:new Date(e.timestamp).getTime()})).sort((e,t)=>t._ts!==e._ts?t._ts-e._ts:t.id.localeCompare(e.id)),[i,r.username,r.following,h,k,m]),R=e.useMemo(()=>l.filter(e=>e.owner!==r.username&&(("–í–°–ï"===h||e.category===h)&&!("FOLLOWING"===m&&!r.following.includes(e.owner)))).sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()),[l,r.username,h,m]),z=e.useMemo(()=>n.filter(e=>e.owner!==r.username&&!("FOLLOWING"===m&&!r.following.includes(e.owner))).sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()),[n,r.username,m]);e.useEffect(()=>{const e=new IntersectionObserver(e=>{e[0].isIntersecting&&O(e=>e+20)},{threshold:.1});return A.current&&e.observe(A.current),()=>e.disconnect()},[L.length,R.length,z.length]);const U=L.slice(0,T);R.slice(0,T);const _=z.slice(0,T);return e.useEffect(()=>{if("ARTIFACTS"===o){console.log("[FeedView] ======================"),console.log("[FeedView] Total exhibits in DB:",i.length),console.log("[FeedView] Current user:",r.username),console.log("[FeedView] Feed type:",m),console.log("[FeedView] Selected category:",h);const e=i.filter(e=>e.owner===r.username).length,t=i.filter(e=>e.isDraft).length,s=i.filter(e=>e.owner!==r.username&&!e.isDraft).length;console.log("[FeedView] Own artifacts (excluded):",e),console.log("[FeedView] Drafts (excluded):",t),console.log("[FeedView] After basic filter:",s),console.log("[FeedView] After all filters (processed):",L.length),console.log("[FeedView] Visible on screen:",U.length),L.length<5&&i.length>10&&(console.warn("[FeedView] WARNING: Very few exhibits showing! Check filters."),console.log("[FeedView] Sample exhibit owners:",i.slice(0,5).map(e=>e.owner)))}},[L.length,U.length,o,i.length]),t.jsxs("div",{className:"pb-24 space-y-4 animate-in fade-in",children:[t.jsx("header",{className:"md:hidden flex justify-between items-center px-4 pt-4 bg-transparent",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-8 h-8 rounded flex items-center justify-center font-bold text-black font-pixel text-xs "+(y?"bg-[#292929] text-[#00ff00] border border-[#505050]":"bg-green-500"),children:"NA"}),t.jsx("h1",{className:"text-lg font-pixel font-bold tracking-tighter "+(y?"text-[#00ff00]":"text-current"),children:"NeoArchive"})]})}),"ARTIFACTS"===o&&a.length>0&&t.jsxs("div",{className:"pl-4 max-w-5xl mx-auto w-full pt-2",children:[t.jsxs("h3",{className:"font-pixel text-[10px] opacity-50 mb-3 flex items-center gap-2 tracking-widest",children:[t.jsx(E,{size:12,className:"text-yellow-500"})," –û–ë–ù–û–í–õ–ï–ù–ò–Ø"]}),t.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 scrollbar-hide pr-4",children:a.map((e,r)=>t.jsxs("div",{onClick:()=>e.latestItem&&g(e.latestItem),className:"flex flex-col items-center gap-2 cursor-pointer group min-w-[70px]",children:[t.jsx("div",{className:"relative p-[2px] rounded-full bg-gradient-to-tr from-green-500 to-blue-500",children:t.jsx("div",{className:"rounded-full p-[2px] "+("dark"===s?"bg-black":"bg-white"),children:t.jsx("img",{src:e.avatar,className:"w-14 h-14 rounded-full object-cover"})})}),t.jsxs("span",{className:"text-[10px] font-bold truncate max-w-[70px]",children:["@",e.username]})]},r))})]}),t.jsx("div",{className:"pt-2 pb-2 px-4 transition-all "+("dark"===s?"":y?"bg-[#191919] border-b border-[#505050]":""),children:t.jsxs("div",{className:"max-w-5xl mx-auto w-full space-y-4",children:[t.jsxs("div",{className:"flex gap-4",children:[t.jsxs("div",{className:"flex-1 flex p-1 rounded-xl border "+(y?"bg-[#292929] border-[#505050]":"dark"===s?"bg-white/5 border-white/5":"bg-black/5 border-black/5"),children:[t.jsxs("button",{onClick:()=>c("ARTIFACTS"),className:"flex-1 flex items-center justify-center gap-2 py-2 rounded-lg text-[10px] font-bold transition-all "+("ARTIFACTS"===o?y?"bg-[#00ff00] text-black":"bg-green-500 text-black shadow-lg":"opacity-50"),children:[t.jsx(Te,{size:14})," –õ–ï–ù–¢–ê"]}),t.jsxs("button",{onClick:()=>c("COLLECTIONS"),className:"flex-1 flex items-center justify-center gap-2 py-2 rounded-lg text-[10px] font-bold transition-all "+("COLLECTIONS"===o?y?"bg-[#00ff00] text-black":"bg-blue-500 text-white shadow-lg":"opacity-50"),children:[t.jsx(Oe,{size:14})," –ö–û–õ–õ–ï–ö–¶–ò–ò"]}),t.jsxs("button",{onClick:()=>c("WISHLIST"),className:"flex-1 flex items-center justify-center gap-2 py-2 rounded-lg text-[10px] font-bold transition-all "+("WISHLIST"===o?y?"bg-[#00ff00] text-black":"bg-purple-500 text-white shadow-lg":"opacity-50"),children:[t.jsx(Ie,{size:14})," –í–ò–®–õ–ò–°–¢"]})]}),t.jsx("button",{onClick:()=>b("SEARCH"),className:"px-4 rounded-xl border flex items-center justify-center "+(y?"bg-black border-[#00ff00] text-[#00ff00]":"bg-white/5 border-white/10"),children:t.jsx(j,{size:20})})]}),t.jsxs("div",{className:"flex items-center justify-between gap-2 overflow-x-auto scrollbar-hide pb-2",children:[t.jsxs("div",{className:"flex p-1 rounded-xl shrink-0 "+(y?"border border-[#505050]":"dark"===s?"bg-white/5":"bg-black/5"),children:[t.jsx("button",{onClick:()=>p("FOR_YOU"),className:"px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all "+("FOR_YOU"===m?y?"bg-[#00ff00] text-black":"bg-green-500 text-black shadow":"opacity-50"),children:"–ì–õ–ê–í–ù–ê–Ø"}),t.jsx("button",{onClick:()=>p("FOLLOWING"),className:"px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all "+("FOLLOWING"===m?y?"bg-[#00ff00] text-black":"bg-green-500 text-black shadow":"opacity-50"),children:"–ü–û–î–ü–ò–°–ö–ò"})]}),t.jsxs("div",{className:"flex gap-1 shrink-0 ml-auto",children:[t.jsx("button",{onClick:()=>x("GRID"),className:"p-2 rounded-lg "+("GRID"===d?"bg-white/10 text-green-500":"opacity-30"),children:t.jsx(Te,{size:16})}),t.jsx("button",{onClick:()=>x("LIST"),className:"p-2 rounded-lg "+("LIST"===d?"bg-white/10 text-green-500":"opacity-30"),children:t.jsx(Ae,{size:16})})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide",children:[t.jsx("button",{onClick:()=>u("–í–°–ï"),className:"px-4 py-1.5 rounded-full text-[10px] font-bold whitespace-nowrap border transition-all "+("–í–°–ï"===h?"bg-white text-black border-white":"border-current opacity-40 hover:opacity-100"),children:"–í–°–ï"}),Object.values(Nt).map(e=>t.jsx("button",{onClick:()=>u(e),className:"px-4 py-1.5 rounded-full text-[10px] font-bold whitespace-nowrap border transition-all "+(h===e?y?"bg-[#00ff00] text-black border-[#00ff00]":"bg-green-500 text-black border-green-500":"border-white/10 opacity-60 hover:opacity-100"),children:e},e))]}),"–í–°–ï"!==h&&vt[h]&&t.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide animate-in slide-in-from-top-2",children:[t.jsxs("button",{onClick:()=>C(null),className:"px-3 py-1 rounded-lg text-[9px] font-bold whitespace-nowrap border transition-all "+(k?"border-transparent opacity-50":"bg-white/10 border-white"),children:["–í–°–ï ",h]}),vt[h].map(e=>t.jsx("button",{onClick:()=>C(e),className:"px-3 py-1 rounded-lg text-[9px] font-bold whitespace-nowrap border transition-all "+(k===e?"bg-white/10 border-white":"border-transparent opacity-50"),children:e},e))]})]})]})}),t.jsxs("div",{className:"px-4 max-w-5xl mx-auto w-full",children:["ARTIFACTS"===o?t.jsx(t.Fragment,{children:0===i.length?t.jsx("div",{className:"grid grid-cols-2 gap-4",children:[1,2,3,4].map(e=>t.jsx(as,{viewMode:d},e))}):0===L.length?t.jsxs("div",{className:"text-center py-20 opacity-50 font-mono text-xs border-2 border-dashed border-white/10 rounded-3xl",children:[t.jsx("div",{className:"mb-2 text-2xl",children:"üèúÔ∏è"}),"–ó–î–ï–°–¨ –ü–û–ö–ê –ü–£–°–¢–û",t.jsx("br",{}),"FOLLOWING"===m?"–ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∞–≤—Ç–æ—Ä–æ–≤":"–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã"]}):t.jsx("div",{className:"grid gap-4 "+("GRID"===d?"grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5":"grid-cols-1"),children:U.map((e,a)=>{try{return"GRID"===d?t.jsx(Rt,{item:e,theme:s,onClick:g,currentUsername:r?.username||"",onReact:()=>f(e.id),onAuthorClick:w},e.id):t.jsxs("div",{onClick:()=>g(e),className:"flex gap-4 p-3 rounded-xl border cursor-pointer hover:bg-white/5 transition-all "+("dark"===s?"bg-white/5 border-white/10":"bg-white border-black/10"),children:[t.jsx("div",{className:"w-24 h-24 rounded-lg overflow-hidden flex-shrink-0 bg-black/20",children:t.jsx("img",{src:Xt(e.imageUrls,"thumbnail"),className:"w-full h-full object-cover"})}),t.jsxs("div",{className:"flex-1 flex flex-col justify-between",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-[9px] font-pixel opacity-50 uppercase",children:e.category}),t.jsxs("div",{className:"flex items-center gap-1 text-[10px] opacity-60",children:[t.jsx(D,{size:10})," ",e.likes]})]}),t.jsx("h3",{className:"font-bold font-pixel text-sm mt-1 line-clamp-1",children:e.title}),t.jsx("p",{className:"text-[10px] opacity-60 line-clamp-2 mt-1",children:e.description})]}),t.jsx("div",{className:"flex items-center gap-2 mt-2",children:t.jsxs("span",{className:"text-[10px] font-bold opacity-70",children:["@",e.owner]})})]})]},e.id)}catch(i){return console.error(`[FeedView] Error rendering exhibit card #${a} (${e.id}):`,i),null}})})}):"COLLECTIONS"===o?t.jsx(t.Fragment,{children:0===z.length?t.jsx("div",{className:"text-center py-20 opacity-30 font-mono text-xs border-2 border-dashed border-white/10 rounded-3xl",children:"–ö–û–õ–õ–ï–ö–¶–ò–ô –ù–ï–¢"}):t.jsx("div",{className:"grid gap-4 "+("GRID"===d?"grid-cols-2 sm:grid-cols-3 md:grid-cols-4":"grid-cols-1"),children:_.map(e=>t.jsx(Dt,{col:e,theme:s,onClick:v,onShare:()=>{}},e.id))})}):t.jsx(t.Fragment,{children:0===R.length?t.jsx("div",{className:"text-center py-20 opacity-30 font-mono text-xs border-2 border-dashed border-white/10 rounded-3xl",children:"–í–ò–®–õ–ò–°–¢ –ü–£–°–¢"}):(()=>{const e={};R.forEach(t=>{e[t.owner]||(e[t.owner]=[]),e[t.owner].push(t)});const r=Object.keys(e).sort((t,s)=>e[s].length-e[t].length);return t.jsx("div",{className:"space-y-3",children:r.map(r=>{const a=e[r],i=S.has(r),l=a.filter(e=>"GRAIL"===e.priority),n=a.filter(e=>"HIGH"===e.priority),o=a.filter(e=>"MEDIUM"===e.priority),c=a.filter(e=>"LOW"===e.priority);return t.jsxs("div",{className:"rounded-xl border overflow-hidden "+(y?"border-[#505050] bg-[#191919]":"border-white/10 bg-white/5"),children:[t.jsxs("div",{onClick:()=>(e=>{const t=new Set(S);t.has(e)?t.delete(e):t.add(e),I(t)})(r),className:"p-4 flex items-center justify-between cursor-pointer hover:bg-white/5 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("img",{src:gt(r),className:"w-10 h-10 rounded-full border-2 border-white/20"}),t.jsxs("div",{children:[t.jsxs("div",{className:"font-pixel text-sm font-bold flex items-center gap-2",children:["@",r,t.jsxs("span",{className:"text-[10px] opacity-50 font-mono",children:[a.length," –ø—Ä–µ–¥–º–µ—Ç–æ–≤"]})]}),t.jsxs("div",{className:"flex gap-2 mt-1",children:[l.length>0&&t.jsxs("span",{className:"text-[8px] px-1.5 py-0.5 rounded bg-yellow-500/20 text-yellow-500",children:["üèÜ ",l.length]}),n.length>0&&t.jsxs("span",{className:"text-[8px] px-1.5 py-0.5 rounded bg-orange-500/20 text-orange-400",children:["üéØ ",n.length]}),o.length>0&&t.jsxs("span",{className:"text-[8px] px-1.5 py-0.5 rounded bg-blue-500/20 text-blue-400",children:["üîç ",o.length]}),c.length>0&&t.jsxs("span",{className:"text-[8px] px-1.5 py-0.5 rounded bg-gray-500/20 text-gray-400",children:["üëÅÔ∏è ",c.length]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:e=>{e.stopPropagation(),w(r)},className:"px-3 py-1 text-[10px] rounded border border-white/20 hover:bg-white/10 transition-colors",children:"–ü–†–û–§–ò–õ–¨"}),i?t.jsx(Le,{size:20}):t.jsx(Re,{size:20})]})]}),i&&t.jsxs("div",{className:"p-4 pt-0 space-y-6 border-t border-white/5",children:[l.length>0&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-3 pb-2 border-b border-yellow-500/30",children:[t.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500 animate-pulse shadow-[0_0_10px_rgba(234,179,8,0.8)]"}),t.jsx("h3",{className:"font-pixel text-xs text-yellow-500 uppercase tracking-wider",children:"üèÜ –°–≤—è—â–µ–Ω–Ω—ã–π –ì—Ä–∞–∞–ª—å"}),t.jsx("span",{className:"text-[10px] opacity-50 font-mono",children:l.length})]}),t.jsx("div",{className:"grid gap-3 "+("GRID"===d?"grid-cols-2 sm:grid-cols-3 md:grid-cols-4":"grid-cols-1"),children:l.map(e=>t.jsx(At,{item:e,theme:s,onClick:N,onUserClick:w},e.id))})]}),n.length>0&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-3 pb-2 border-b border-orange-500/20",children:[t.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),t.jsx("h3",{className:"font-pixel text-xs text-orange-400 uppercase tracking-wider",children:"üéØ –ê–∫—Ç–∏–≤–Ω–∞—è –û—Ö–æ—Ç–∞"}),t.jsx("span",{className:"text-[10px] opacity-50 font-mono",children:n.length})]}),t.jsx("div",{className:"grid gap-3 "+("GRID"===d?"grid-cols-2 sm:grid-cols-3 md:grid-cols-4":"grid-cols-1"),children:n.map(e=>t.jsx(At,{item:e,theme:s,onClick:N,onUserClick:w},e.id))})]}),o.length>0&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-3 pb-2 border-b border-blue-500/20",children:[t.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),t.jsx("h3",{className:"font-pixel text-xs text-blue-400 uppercase tracking-wider",children:"üîç –ò–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç"}),t.jsx("span",{className:"text-[10px] opacity-50 font-mono",children:o.length})]}),t.jsx("div",{className:"grid gap-3 "+("GRID"===d?"grid-cols-2 sm:grid-cols-3 md:grid-cols-4":"grid-cols-1"),children:o.map(e=>t.jsx(At,{item:e,theme:s,onClick:N,onUserClick:w},e.id))})]}),c.length>0&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-3 pb-2 border-b border-gray-500/20",children:[t.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500"}),t.jsx("h3",{className:"font-pixel text-xs text-gray-400 uppercase tracking-wider",children:"üëÅÔ∏è –ù–∞–±–ª—é–¥–∞—é"}),t.jsx("span",{className:"text-[10px] opacity-50 font-mono",children:c.length})]}),t.jsx("div",{className:"grid gap-3 "+("GRID"===d?"grid-cols-2 sm:grid-cols-3 md:grid-cols-4":"grid-cols-1"),children:c.map(e=>t.jsx(At,{item:e,theme:s,onClick:N,onUserClick:w},e.id))})]})]})]},r)})})})()}),t.jsx("div",{ref:A,className:"h-20 flex items-center justify-center opacity-30",children:T<("ARTIFACTS"===o?L.length:"COLLECTIONS"===o?z.length:R.length)&&t.jsxs("div",{className:"animate-pulse flex items-center gap-2 text-xs font-mono",children:[t.jsx(De,{size:16})," –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–•..."]})})]})]})},ls=()=>{const[s,r]=e.useState([]);e.useEffect(()=>{const e=()=>{};return()=>e()},[]);const a=e=>{switch(e){case"LIKE":return t.jsx(D,{size:16,className:"text-red-500"});case"COMMENT":return t.jsx(C,{size:16,className:"text-blue-500"});case"FOLLOW":return t.jsx(l,{size:16,className:"text-green-500"});case"TRADE_OFFER":return t.jsx(g,{size:16,className:"text-yellow-500"});default:return t.jsx(me,{size:16,className:"text-white"})}};return t.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 w-full max-w-xs pointer-events-none",children:s.map(e=>t.jsxs("div",{className:"pointer-events-auto bg-black/90 border border-green-500/50 text-white p-3 rounded-xl shadow-2xl flex items-start gap-3 animate-in slide-in-from-right fade-in duration-300",children:[t.jsx("div",{className:"mt-1",children:a(e.type)}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"text-xs font-bold font-pixel mb-1 flex justify-between",children:[t.jsx("span",{children:"–ù–û–í–û–ï –°–û–ë–´–¢–ò–ï"}),t.jsx("button",{onClick:()=>{return t=e.id,void r(e=>e.filter(e=>e.id!==t));var t},className:"opacity-50 hover:opacity-100",children:t.jsx(q,{size:12})})]}),t.jsxs("div",{className:"text-xs font-mono",children:[t.jsxs("span",{className:"text-green-400 font-bold",children:["@",e.actor]}),t.jsxs("span",{className:"opacity-80",children:[" ","LIKE"===e.type?"–æ—Ü–µ–Ω–∏–ª –≤–∞—à –ø–æ—Å—Ç":"COMMENT"===e.type?"–ø—Ä–æ–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–ª":"–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç"]})]}),e.targetPreview&&t.jsxs("div",{className:"text-[10px] opacity-60 mt-1 truncate border-l-2 border-white/20 pl-2",children:['"',e.targetPreview,'"']})]})]},e.id))})},ns=({theme:s,user:r,exhibits:a,allExhibits:i=[],collections:l,wishlist:n=[],onBack:o,onExhibitClick:c,onCollectionClick:d,onReact:x,onWishlistClick:m})=>{const[p,h]=e.useState("MY_ITEMS"),u=a.filter(e=>e.isDraft),b=a.filter(e=>!e.isDraft),g=i.filter(e=>e.likedBy?.includes(r.username)),f=n.filter(e=>e.owner===r.username),w="winamp"===s,N=(e,s)=>t.jsx("button",{onClick:()=>h(e),className:"px-3 py-1 text-[10px] font-bold font-pixel uppercase transition-all "+(p===e?w?"text-wa-gold border-b-2 border-wa-gold":"text-green-500 border-b-2 border-green-500":"opacity-50 hover:opacity-100 border-b-2 border-transparent"),children:w?`[ ${s} ]`:s});return t.jsxs("div",{className:"max-w-4xl mx-auto animate-in fade-in pb-32 "+(w?"font-mono text-gray-300":""),children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("button",{onClick:o,className:"flex items-center gap-2 hover:underline opacity-70 font-pixel text-xs "+(w?"text-[#00ff00]":""),children:[t.jsx(_,{size:16})," –ù–ê–ó–ê–î"]}),t.jsxs("div",{className:"font-pixel text-lg flex items-center gap-2 "+(w?"text-[#00ff00]":""),children:[t.jsx(H,{size:24}),"–ú–û–Ø –ü–û–õ–ö–ê"]})]}),t.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2 mb-8 "+(w?"border-b border-[#505050]":"border-b border-white/10"),onTouchStart:e=>e.stopPropagation(),onTouchMove:e=>e.stopPropagation(),onTouchEnd:e=>e.stopPropagation(),children:[N("MY_ITEMS","–ü–†–ï–î–ú–ï–¢–´"),N("COLLECTIONS","–ê–õ–¨–ë–û–ú–´"),N("WISHLIST","–í–ò–®–õ–ò–°–¢"),N("FAVORITES","–ò–ó–ë–†–ê–ù–ù–û–ï"),N("DRAFTS","–ß–ï–†–ù–û–í–ò–ö–ò")]}),"DRAFTS"===p&&t.jsxs("div",{className:"animate-in slide-in-from-right-4",children:[t.jsxs("h3",{className:"font-pixel text-xs mb-4 opacity-70 flex items-center gap-2 uppercase tracking-widest",children:[t.jsx(ke,{size:14})," –ß–µ—Ä–Ω–æ–≤–∏–∫–∏ (",u.length,")"]}),0===u.length?t.jsx("div",{className:"text-center py-10 opacity-30 font-pixel text-xs",children:"–ù–µ—Ç —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤"}):t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:u.map(e=>t.jsxs("div",{className:"relative group opacity-80 hover:opacity-100",children:[t.jsx("div",{className:"absolute top-2 right-2 z-10 bg-yellow-500 text-black text-[8px] font-bold px-1.5 py-0.5 rounded font-pixel",children:"DRAFT"}),t.jsx(Rt,{item:e,theme:s,onClick:c,currentUsername:r.username,onReact:()=>x(e.id),onAuthorClick:()=>{}})]},e.id))})]}),"MY_ITEMS"===p&&t.jsxs("div",{className:"animate-in slide-in-from-right-4",children:[t.jsxs("h3",{className:"font-pixel text-xs mb-4 flex items-center gap-2 uppercase tracking-widest",children:[t.jsx(H,{size:16})," –í–∞—à–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã (",b.length,")"]}),0===b.length?t.jsx("div",{className:"p-12 border-2 border-dashed rounded-xl flex flex-col items-center justify-center text-center opacity-50 "+(w?"border-[#505050]":"dark"===s?"border-dark-dim":"border-light-dim"),children:t.jsx("p",{className:"font-mono text-sm uppercase",children:"–í–∞—à–∞ –ø–æ–ª–∫–∞ –ø—É—Å—Ç–∞"})}):t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:b.map(e=>t.jsx(Rt,{item:e,theme:s,onClick:c,currentUsername:r.username,onReact:()=>x(e.id),onAuthorClick:()=>{}},e.id))})]}),"WISHLIST"===p&&t.jsxs("div",{className:"animate-in slide-in-from-right-4",children:[t.jsxs("h3",{className:"font-pixel text-xs mb-4 flex items-center gap-2 uppercase tracking-widest",children:[t.jsx(j,{size:16})," –í–∏—à–ª–∏—Å—Ç (",f.length,")"]}),0===f.length?t.jsx("div",{className:"p-12 border-2 border-dashed rounded-xl flex flex-col items-center justify-center text-center opacity-50 "+(w?"border-[#505050]":"dark"===s?"border-dark-dim":"border-light-dim"),children:t.jsx("p",{className:"font-mono text-sm uppercase",children:"–í–∏—à–ª–∏—Å—Ç –ø—É—Å—Ç"})}):t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:f.map(e=>t.jsx(At,{item:e,theme:s,onClick:m,onUserClick:()=>{}},e.id))})]}),"FAVORITES"===p&&t.jsxs("div",{className:"animate-in slide-in-from-right-4",children:[t.jsxs("h3",{className:"font-pixel text-xs mb-4 flex items-center gap-2 uppercase tracking-widest",children:[t.jsx(D,{size:16,className:"text-red-500"})," –ò–∑–±—Ä–∞–Ω–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã (",g.length,")"]}),0===g.length?t.jsx("div",{className:"p-12 border-2 border-dashed rounded-xl flex flex-col items-center justify-center text-center opacity-50 "+(w?"border-[#505050]":"dark"===s?"border-dark-dim":"border-light-dim"),children:t.jsx("p",{className:"font-mono text-sm uppercase",children:"–í—ã –µ—â–µ –Ω–∏—á–µ–≥–æ –Ω–µ –ª–∞–π–∫–Ω—É–ª–∏"})}):t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:g.map(e=>t.jsx(Rt,{item:e,theme:s,onClick:c,currentUsername:r.username,onReact:()=>x(e.id),onAuthorClick:()=>{}},e.id))})]}),"COLLECTIONS"===p&&t.jsxs("div",{className:"animate-in slide-in-from-right-4",children:[t.jsxs("h3",{className:"font-pixel text-xs mb-4 flex items-center gap-2 uppercase tracking-widest",children:[t.jsx(Se,{size:16})," –ö–æ–ª–ª–µ–∫—Ü–∏–∏ (",l.length,")"]}),0===l.length?t.jsx("div",{className:"p-8 border-2 border-dashed rounded-xl flex flex-col items-center justify-center text-center opacity-50 "+(w?"border-[#505050]":"dark"===s?"border-dark-dim":"border-light-dim"),children:t.jsx("p",{className:"font-mono text-xs uppercase",children:"–ù–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∫–æ–ª–ª–µ–∫—Ü–∏–π"})}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(e=>t.jsx(Dt,{col:e,theme:s,onClick:d,onShare:()=>{}},e.id))})]})]})},os=({theme:s,onBack:r,onMigrationComplete:a})=>{const[i,l]=e.useState(!1),[n,o]=e.useState(!1),[c,d]=e.useState(null),[x,m]=e.useState(null),p="dark"===s;return t.jsx("div",{className:"min-h-screen p-4 pb-24 "+(p?"bg-black text-white":"bg-white text-black"),children:t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[t.jsx("button",{onClick:r,className:"p-2 rounded-lg transition-colors "+(p?"hover:bg-white/10":"hover:bg-black/10"),children:t.jsx(_,{size:20})}),t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[t.jsx(ze,{size:24}),"–ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö"]}),t.jsx("p",{className:"text-sm opacity-60 mt-1",children:"–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"rounded-xl border p-6 "+(p?"bg-white/5 border-white/10":"bg-black/5 border-black/10"),children:[t.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[t.jsx("div",{className:"p-3 rounded-lg "+(p?"bg-red-500/20":"bg-red-500/10"),children:t.jsx(D,{size:24,className:"text-red-500"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h2",{className:"text-xl font-bold mb-2",children:"–ú–∏–≥—Ä–∞—Ü–∏—è —Ä–µ–∞–∫—Ü–∏–π"}),t.jsx("p",{className:"text-sm opacity-70 mb-4",children:"–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —Ä–µ–∞–∫—Ü–∏–π (FIRE, HEART, STAR, TROPHY, COOL) –≤ –ø—Ä–æ—Å—Ç—ã–µ –ª–∞–π–∫–∏ (LIKE). –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–ª–∏, –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã."}),t.jsx("div",{className:"p-4 rounded-lg mb-4 text-xs "+(p?"bg-yellow-500/10 border border-yellow-500/20":"bg-yellow-500/5 border border-yellow-500/20"),children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx(h,{size:16,className:"text-yellow-500 flex-shrink-0 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold mb-1",children:"–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:"}),t.jsxs("ul",{className:"list-disc list-inside space-y-1 opacity-80",children:[t.jsx("li",{children:"–í—Å–µ —Ä–µ–∞–∫—Ü–∏–∏ –±—É–¥—É—Ç –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã –≤ –æ–¥–∏–Ω —Ç–∏–ø LIKE"}),t.jsx("li",{children:"–°—á–µ—Ç—á–∏–∫–∏ likes –∏ likedBy –±—É–¥—É—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã"}),t.jsx("li",{children:"–°—á–µ—Ç—á–∏–∫–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ (views) –±—É–¥—É—Ç –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã"}),t.jsx("li",{children:"–ò—Å—Ç–æ—Ä–∏—è —Ä–µ–∞–∫—Ü–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è"})]})]})]})}),t.jsx("button",{onClick:async()=>{l(!0),d(null);try{const e=await fetch("/api/migrate-reactions",{method:"POST"}),t=await e.json();e.ok?(d(t),a&&a()):d({success:!1,updated:0,skipped:0,message:t.error||"–û—à–∏–±–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏"})}catch(e){d({success:!1,updated:0,skipped:0,message:`–û—à–∏–±–∫–∞: ${e instanceof Error?e.message:"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞"}`})}finally{l(!1)}},disabled:i,className:"px-6 py-3 rounded-lg font-bold transition-all flex items-center gap-2 "+(i?"opacity-50 cursor-not-allowed bg-gray-500":"bg-blue-500 hover:bg-blue-600 text-white"),children:i?t.jsxs(t.Fragment,{children:[t.jsx(Ue,{size:18,className:"animate-spin"}),"–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –º–∏–≥—Ä–∞—Ü–∏—è..."]}):t.jsxs(t.Fragment,{children:[t.jsx(E,{size:18}),"–ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é"]})})]})]}),c&&t.jsx("div",{className:"mt-4 p-4 rounded-lg border "+(c.success?p?"bg-green-500/10 border-green-500/20":"bg-green-500/5 border-green-500/20":p?"bg-red-500/10 border-red-500/20":"bg-red-500/5 border-red-500/20"),children:t.jsxs("div",{className:"flex items-start gap-3",children:[c.success?t.jsx(_e,{size:20,className:"text-green-500 flex-shrink-0 mt-0.5"}):t.jsx(h,{size:20,className:"text-red-500 flex-shrink-0 mt-0.5"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-bold mb-2",children:c.success?"‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!":"‚ùå –û—à–∏–±–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏"}),c.success?t.jsxs("div",{className:"text-sm opacity-80 space-y-1",children:[t.jsxs("p",{children:["üìä –û–±–Ω–æ–≤–ª–µ–Ω–æ —ç–∫—Å–ø–æ–Ω–∞—Ç–æ–≤: ",t.jsx("span",{className:"font-bold",children:c.updated})]}),t.jsxs("p",{children:["‚è≠Ô∏è –ü—Ä–æ–ø—É—â–µ–Ω–æ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π): ",t.jsx("span",{className:"font-bold",children:c.skipped})]}),c.message&&t.jsx("p",{className:"mt-2",children:c.message})]}):t.jsx("p",{className:"text-sm opacity-80",children:c.message})]})]})})]}),t.jsxs("div",{className:"rounded-xl border p-6 "+(p?"bg-white/5 border-white/10":"bg-black/5 border-black/10"),children:[t.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[t.jsx("div",{className:"p-3 rounded-lg "+(p?"bg-purple-500/20":"bg-purple-500/10"),children:t.jsx(Me,{size:24,className:"text-purple-500"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h2",{className:"text-xl font-bold mb-2",children:"–ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Å—Ç–µ–≤–æ–π –∫–Ω–∏–≥–∏"}),t.jsx("p",{className:"text-sm opacity-70 mb-4",children:"–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã –≥–æ—Å—Ç–µ–≤–æ–π –∫–Ω–∏–≥–∏ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏."}),t.jsx("button",{onClick:async()=>{o(!0),m(null);try{const e=await fetch("/api/verify-guestbook"),t=await e.json();e.ok?m(t):m({total:0,entries:[]})}catch(e){m({total:0,entries:[]})}finally{o(!1)}},disabled:n,className:"px-6 py-3 rounded-lg font-bold transition-all flex items-center gap-2 "+(n?"opacity-50 cursor-not-allowed bg-gray-500":"bg-purple-500 hover:bg-purple-600 text-white"),children:n?t.jsxs(t.Fragment,{children:[t.jsx(Ue,{size:18,className:"animate-spin"}),"–ü—Ä–æ–≤–µ—Ä–∫–∞..."]}):t.jsxs(t.Fragment,{children:[t.jsx(ze,{size:18}),"–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≥–æ—Å—Ç–µ–≤—É—é –∫–Ω–∏–≥—É"]})})]})]}),x&&t.jsx("div",{className:"mt-4 p-4 rounded-lg border "+(p?"bg-purple-500/10 border-purple-500/20":"bg-purple-500/5 border-purple-500/20"),children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(_e,{size:20,className:"text-purple-500 flex-shrink-0 mt-0.5"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-bold mb-2",children:"üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≥–æ—Å—Ç–µ–≤–æ–π –∫–Ω–∏–≥–∏"}),t.jsxs("div",{className:"text-sm opacity-80 space-y-2",children:[t.jsxs("p",{children:["–í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π: ",t.jsx("span",{className:"font-bold text-purple-500",children:x.total})]}),0===x.total&&t.jsx("div",{className:"p-3 rounded-lg mt-3 "+(p?"bg-yellow-500/10":"bg-yellow-500/5"),children:t.jsxs("p",{className:"flex items-center gap-2",children:[t.jsx(h,{size:16,className:"text-yellow-500"}),"–ì–æ—Å—Ç–µ–≤–∞—è –∫–Ω–∏–≥–∞ –ø—É—Å—Ç–∞. –ó–∞–ø–∏—Å–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —Ç–æ–ª—å–∫–æ –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏."]})}),x.entries&&x.entries.length>0&&t.jsxs("div",{className:"mt-4 space-y-2",children:[t.jsx("p",{className:"font-bold text-xs uppercase opacity-60",children:"–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏:"}),x.entries.slice(0,5).map(e=>t.jsxs("div",{className:"p-3 rounded-lg text-xs "+(p?"bg-white/5":"bg-black/5"),children:[t.jsxs("div",{className:"flex justify-between items-start mb-1",children:[t.jsx("span",{className:"font-bold",children:e.author}),t.jsx("span",{className:"opacity-50 text-[10px]",children:new Date(e.timestamp).toLocaleString("ru-RU")})]}),t.jsxs("p",{className:"opacity-70",children:["‚Üí ",e.targetUser]}),t.jsx("p",{className:"mt-2",children:e.text})]},e.id))]})]})]})]})})]}),t.jsxs("div",{className:"rounded-xl border p-6 "+(p?"bg-white/5 border-white/10":"bg-black/5 border-black/10"),children:[t.jsxs("h2",{className:"text-lg font-bold mb-3 flex items-center gap-2",children:[t.jsx(h,{size:20}),"–í–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è"]}),t.jsxs("div",{className:"text-sm opacity-70 space-y-2",children:[t.jsx("p",{children:"‚Ä¢ –ú–∏–≥—Ä–∞—Ü–∏—è —Ä–µ–∞–∫—Ü–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–∞ –∏ –Ω–µ —É–¥–∞–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"}),t.jsx("p",{children:"‚Ä¢ –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–∞–≤–∏–ª–∏ –ª—é–±—ã–µ —Ä–µ–∞–∫—Ü–∏–∏, –±—É–¥—É—Ç —É—á—Ç–µ–Ω—ã –≤ –ª–∞–π–∫–∞—Ö"}),t.jsx("p",{children:"‚Ä¢ –°—á–µ—Ç—á–∏–∫–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ (views) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è"}),t.jsx("p",{children:"‚Ä¢ –ì–æ—Å—Ç–µ–≤–∞—è –∫–Ω–∏–≥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—É—é —Ç–∞–±–ª–∏—Ü—É –∏ –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç—Å—è –º–∏–≥—Ä–∞—Ü–∏–µ–π"}),t.jsxs("p",{className:"pt-2 border-t border-white/10 mt-3",children:["üìñ –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Ñ–∞–π–ª–µ ",t.jsx("code",{className:"px-2 py-1 rounded bg-white/10",children:"RESTORE_GUIDE.md"})]})]})]})]})]})})},cs=["kennyornope@gmail.com"],ds=e=>!!e&&(!0===e.isAdmin||!!e.email&&cs.includes(e.email));function xs(){const[s,r]=e.useState("dark"),[a,i]=e.useState("AUTH"),[l,n]=e.useState(!0),[o,c]=e.useState(!0),[d,x]=e.useState(!1),[m,p]=e.useState(null),[h,u]=e.useState([]),[b,g]=e.useState([]),[f,w]=e.useState([]),[N,v]=e.useState([]),[y,k]=e.useState([]),[C,S]=e.useState([]),[I,T]=e.useState([]),[O,A]=e.useState(null),[L,R]=e.useState(null),[D,z]=e.useState(null),[U,M]=e.useState(""),[F,P]=e.useState(void 0),[B,G]=e.useState("–í–°–ï"),[H,$]=e.useState("ARTIFACTS"),[Y,V]=e.useState("GRID"),[W,K]=e.useState("FOR_YOU"),[q,X]=e.useState("followers"),[Z,J]=e.useState(null),[Q,ee]=e.useState(!1),[te,se]=e.useState(""),[re,ae]=e.useState(""),[ie,le]=e.useState("ONLINE"),[ne,oe]=e.useState(""),[ce,de]=e.useState(""),[xe,pe]=e.useState("ARTIFACTS"),[he,ue]=e.useState(""),be=e.useRef(null),ge=e.useMemo(()=>{if(!m)return[];const e=m.following||[],t=h.filter(t=>e.includes(t.owner)&&!t.isDraft).sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime());return Array.from(new Set(t.map(e=>e.owner))).slice(0,10).map(e=>({username:e,avatar:gt(e),latestItem:t.find(t=>t.owner===e)}))},[m,h]),fe=e.useCallback(async()=>{const e=window.location.pathname.split("/").filter(Boolean),t=e[0];if(t)if("community"===t)i("COMMUNITY_HUB");else if("activity"===t)i("ACTIVITY");else if("search"===t)i("SEARCH");else if("create"===t)i("CREATE_HUB");else if("my-collection"===t)i("MY_COLLECTION");else if("u"===t||"profile"===t){const t=e[1];t&&(M(t),"wishlist"===e[2]?i("USER_WISHLIST"):i("USER_PROFILE"))}else if("artifact"===t){const t=e[1];let r=xt().exhibits.find(e=>e.id===t);if(!r)try{r=await(async e=>{const t=Qe.exhibits.find(t=>t.id===e);if(t)return t;const s=await tt(),r=await s.get("exhibits",e);if(r)return r;try{const t=await it(`/exhibits/${e}`);return t&&(await s.put("exhibits",t),Qe.exhibits.push(t)),t}catch{return null}})(t)}catch(s){}r?(A(r),i("EXHIBIT")):i("FEED")}else if("collection"===t){const t=e[1];let r=xt().collections.find(e=>e.id===t);if(!r)try{r=await(async e=>{const t=Qe.collections.find(t=>t.id===e);if(t)return t;const s=await tt(),r=await s.get("collections",e);if(r)return r;try{const t=await it(`/collections/${e}`);return t&&(await s.put("collections",t),Qe.collections.push(t)),t}catch{return null}})(t)}catch(s){}r&&(R(r),i("COLLECTION_DETAIL"))}else i("FEED");else i("FEED")},[]);e.useEffect(()=>{const e=()=>fe();return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)},[fe]);const we=(e,t)=>{t?.username&&M(t.username),t?.item&&(A(t.item),P(t.highlightCommentId)),t?.collection&&R(t.collection),t?.wishlistItem&&z(t.wishlistItem),i(e);let s="/";"USER_PROFILE"===e?s=`/u/${t?.username||U}`:"USER_WISHLIST"===e?s=`/u/${t?.username||U}/wishlist`:"EXHIBIT"===e?s=`/artifact/${t?.item?.id||O?.id}`:"COLLECTION_DETAIL"===e?s=`/collection/${t?.collection?.id||L?.id}`:"COMMUNITY_HUB"===e?s="/community":"ACTIVITY"===e?s="/activity":"SEARCH"===e?s="/search":"CREATE_HUB"===e?s="/create":"MY_COLLECTION"===e&&(s="/my-collection"),window.history.pushState({view:e,params:t},"",s),window.scrollTo(0,0)},je=()=>{window.history.length>1?window.history.back():we("FEED")},Ne=e.useCallback(()=>{const e=xt();if(u(e.exhibits||[]),g(e.collections||[]),w(e.wishlist||[]),v(e.notifications||[]),k(e.messages||[]),S(e.guestbook||[]),T([...e.tradeRequests||[]]),x(!navigator.onLine),m){const t=e.users.find(e=>e.username===m.username);t&&p(t)}},[m]);e.useEffect(()=>{const e=(t=()=>{Ne()},st.push(t),()=>{const e=st.indexOf(t);e>-1&&st.splice(e,1)});var t;return()=>{e()}},[Ne]),e.useEffect(()=>{(async()=>{try{const e=await dt();Ne(),e?(p(e),e.settings?.theme&&r(e.settings.theme),await fe()):i("AUTH")}catch(e){i("AUTH")}finally{n(!1),setTimeout(()=>c(!1),50)}})()},[]);const ve=async e=>{const t=`neo_viewed_${e.id}`,s=sessionStorage.getItem(t);let r=e;if(!s&&m){const s=e.viewedBy||[],a=s.includes(m.username);r={...e,views:(e.views||0)+1,viewedBy:a?s:[...s,m.username]},u(t=>t.map(t=>t.id===e.id?r:t)),sessionStorage.setItem(t,"true"),await mt(r)}we("EXHIBIT",{item:r})},ye=async e=>{if(!m)return;const t=h.find(t=>t.id===e);if(t){const r=(s=t).reactions&&s.reactions.length>0?s:s.likedBy&&s.likedBy.length>0?{...s,reactions:[{type:"LIKE",users:s.likedBy}]}:s,a=r.reactions?.some(e=>"LIKE"===e.type&&e.users.includes(m.username)),i=((e=[],t)=>{const s=e.findIndex(e=>"LIKE"===e.type);let r=[...e];if(-1!==s){const e=r[s];e.users.includes(t)?(r[s]={...e,users:e.users.filter(e=>e!==t)},0===r[s].users.length&&r.splice(s,1)):r[s]={...e,users:[...e.users,t]}}else r.push({type:"LIKE",users:[t]});return r})(r.reactions||[],m.username,"LIKE"),l=i.reduce((e,t)=>e+t.users.length,0),n=i.flatMap(e=>e.users),o={...r,reactions:i,likes:l,likedBy:n};u(t=>t.map(t=>t.id===e?o:t)),O?.id===e&&A(o),await mt(o);const c=i.some(e=>"LIKE"===e.type&&e.users.includes(m.username));!a&&c&&t.owner!==m.username&&bt(t.owner,"LIKE",m.username,t.id,t.title)}var s},ke=e.useCallback(async(e,t)=>{p(e),e.settings?.theme&&r(e.settings.theme),t||localStorage.removeItem("neo_active_user"),await fe()},[fe]),Ce=["FEED","COMMUNITY_HUB","CREATE_HUB","ACTIVITY"],Ie=Ce.indexOf(a),Ae=Ft({onSwipeLeft:()=>{Ie>=0&&Ie<Ce.length-1&&we(Ce[Ie+1])},onSwipeRight:()=>{Ie>0&&we(Ce[Ie-1])}});if(l||o)return t.jsxs("div",{className:"fixed inset-0 bg-black flex flex-col items-center justify-center z-50",children:[t.jsx(qe,{theme:"dark"}),t.jsx($t,{size:"lg",text:"INITIALIZING SYSTEM"})]});if("AUTH"===a)return t.jsxs("div",{className:"min-h-screen bg-dark-bg text-white relative overflow-hidden",children:[t.jsx(zt,{title:"NeoArchive: –í—Ö–æ–¥"}),t.jsx(qe,{theme:"dark"}),t.jsx(Xe,{}),t.jsx("div",{className:"relative z-10",children:t.jsx(jt,{theme:"dark",onLogin:ke})})]});const Le=e=>{if("winamp"===s)switch(e){case"FEED":return t.jsx(Ye,{size:24});case"COMMUNITY_HUB":return t.jsx($e,{size:24});case"CREATE_HUB":return t.jsx(E,{size:24});case"ACTIVITY":return t.jsx(He,{size:24});default:return null}if("xp"===s)switch(e){case"FEED":return t.jsx(Ke,{size:24});case"COMMUNITY_HUB":return t.jsx(Pe,{size:24});case"CREATE_HUB":return t.jsx(We,{size:24});case"ACTIVITY":return t.jsx(Ve,{size:24});default:return null}switch(e){case"FEED":return t.jsx(Te,{size:24});case"COMMUNITY_HUB":return t.jsx(Pe,{size:24});case"CREATE_HUB":return t.jsx(Ge,{size:24});case"ACTIVITY":return t.jsx(me,{size:24});default:return null}};return t.jsxs("div",{className:`min-h-screen transition-colors duration-300 pb-safe ${(()=>{switch(s){case"xp":return"bg-[#ECE9D8] text-black font-sans";case"winamp":return"bg-[#191919] font-winamp text-gray-300";case"light":return"bg-light-bg text-gray-900";default:return"bg-dark-bg text-gray-100"}})()}`,...Ae,children:[t.jsx(zt,{title:"NeoArchive"}),t.jsx(qe,{theme:"dark"===s?"dark":"light"}),"dark"===s&&t.jsx(Xe,{}),t.jsx(ls,{}),d&&t.jsxs("div",{className:"fixed top-16 md:top-20 left-0 right-0 z-40 bg-yellow-500/90 text-black text-center py-1 px-4 text-xs font-bold font-mono flex justify-center items-center gap-2",children:[t.jsx(Fe,{size:14})," OFFLINE MODE / SYNCHRONIZING..."]}),m&&t.jsxs(t.Fragment,{children:[t.jsxs("nav",{className:`hidden md:flex fixed top-0 left-0 w-full z-50 px-6 h-16 items-center justify-between backdrop-blur-md transition-all duration-300 ${(()=>{switch(s){case"xp":return"bg-gradient-to-b from-[#245DDA] to-[#245DDA] border-b-2 border-[#003C74] text-white";case"winamp":return"bg-[#292929] border-b border-[#505050] text-[#00ff00] font-winamp";case"light":return"bg-white/90 backdrop-blur-md border-b border-gray-200 text-gray-900";default:return"bg-black/80 backdrop-blur-md border-b border-white/10 text-white"}})()}`,children:[t.jsxs("div",{className:"flex items-center gap-3 cursor-pointer group",onClick:()=>we("FEED"),children:[t.jsx("div",{className:"w-8 h-8 flex items-center justify-center font-bold text-xs rounded border transition-colors "+("winamp"===s?"border-[#505050] bg-[#191919] text-[#00ff00]":"bg-green-500 border-green-500 text-black"),children:"NA"}),t.jsx("span",{className:"font-pixel font-bold text-lg tracking-[0.2em] group-hover:opacity-80 transition-opacity "+("winamp"===s?"text-[#00ff00]":"text-white"),children:"NEO_ARCHIVE"})]}),t.jsxs("div",{className:"flex items-center gap-8",children:[t.jsxs("button",{onClick:()=>we("FEED"),className:"flex items-center gap-2 font-pixel text-xs font-bold transition-all hover:scale-105 "+("FEED"===a?"text-green-500":"opacity-60 hover:opacity-100"),children:[t.jsx(Te,{size:18})," –õ–ï–ù–¢–ê"]}),t.jsxs("button",{onClick:()=>we("COMMUNITY_HUB"),className:"flex items-center gap-2 font-pixel text-xs font-bold transition-all hover:scale-105 "+("COMMUNITY_HUB"===a?"text-green-500":"opacity-60 hover:opacity-100"),children:[t.jsx(Pe,{size:18})," –°–ï–¢–¨"]}),t.jsxs("button",{onClick:()=>we("CREATE_HUB"),className:"flex items-center gap-2 font-pixel text-xs font-bold transition-all hover:scale-105 "+("CREATE_HUB"===a?"text-green-500":"opacity-60 hover:opacity-100"),children:[t.jsx(Be,{size:18})," –°–û–ó–î–ê–¢–¨"]}),t.jsxs("button",{onClick:()=>we("ACTIVITY"),className:"flex items-center gap-2 font-pixel text-xs font-bold transition-all hover:scale-105 relative "+("ACTIVITY"===a?"text-green-500":"opacity-60 hover:opacity-100"),children:[t.jsx(me,{size:18})," –ê–ö–¢–ò–í–ù–û–°–¢–¨",N.some(e=>e.recipient===m.username&&!e.isRead)&&t.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full animate-pulse shadow-[0_0_5px_red]"})]})]}),t.jsxs("div",{className:"flex items-center gap-6",children:[t.jsx("button",{onClick:()=>we("SEARCH"),className:"opacity-60 hover:opacity-100 transition-opacity",children:t.jsx(j,{size:20})}),t.jsx("div",{className:"h-6 w-[1px] bg-white/10"}),t.jsxs("div",{onClick:()=>we("USER_PROFILE",{username:m.username}),className:"flex items-center gap-3 cursor-pointer group",children:[t.jsxs("div",{className:"text-right hidden lg:block",children:[t.jsxs("div",{className:"font-pixel text-xs font-bold "+("winamp"===s?"text-[#00ff00]":"text-white"),children:["@",m.username]}),t.jsx("div",{className:"text-[9px] font-mono opacity-50 uppercase",children:m.tagline||"USER"})]}),t.jsx("img",{src:m.avatarUrl,className:"w-9 h-9 rounded-full border-2 transition-all "+("winamp"===s?"border-[#505050]":"border-white/20 group-hover:border-green-500")})]})]})]}),t.jsx("nav",{className:`md:hidden fixed bottom-0 left-0 w-full z-50 pb-safe ${(()=>{switch(s){case"xp":return"bg-[#ECE9D8] border-t-2 border-[#003C74] text-black shadow-[0_-2px_5px_rgba(0,0,0,0.1)]";case"winamp":return"bg-[#292929] border-t border-[#505050] text-[#00ff00]";case"light":return"bg-white/90 backdrop-blur-md border-t border-gray-200 text-gray-900";default:return"bg-black/90 backdrop-blur-md border-t border-white/10 text-white"}})()}`,children:t.jsxs("div",{className:"flex justify-around items-center h-16",children:[t.jsx("button",{onClick:()=>we("FEED"),className:"flex flex-col items-center gap-1 p-2 "+("FEED"===a?"opacity-100":"opacity-50"),children:Le("FEED")}),t.jsx("button",{onClick:()=>we("COMMUNITY_HUB"),className:"flex flex-col items-center gap-1 p-2 "+("COMMUNITY_HUB"===a?"opacity-100":"opacity-50"),children:Le("COMMUNITY_HUB")}),t.jsx("button",{onClick:()=>we("CREATE_HUB"),className:"flex flex-col items-center gap-1 p-2 "+("CREATE_HUB"===a?"opacity-100 scale-110":"opacity-50"),children:t.jsx(Be,{size:28})}),t.jsxs("button",{onClick:()=>we("ACTIVITY"),className:"flex flex-col items-center gap-1 p-2 relative "+("ACTIVITY"===a?"opacity-100":"opacity-50"),children:[Le("ACTIVITY"),N.some(e=>e.recipient===m.username&&!e.isRead)&&t.jsx("div",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full animate-pulse"})]}),t.jsx("button",{onClick:()=>we("USER_PROFILE",{username:m.username}),className:"flex flex-col items-center gap-1 p-2 "+("USER_PROFILE"===a&&U===m.username?"opacity-100":"opacity-50"),children:t.jsx(Ee,{size:24})})]})})]}),t.jsxs("div",{className:"md:pt-16",children:["FEED"===a&&m&&t.jsx(is,{theme:s,user:m,stories:ge,exhibits:h,wishlist:f,collections:b,feedMode:H,setFeedMode:$,feedViewMode:Y,setFeedViewMode:V,feedType:W,setFeedType:K,selectedCategory:B,setSelectedCategory:G,onNavigate:(e,t)=>we(e,t),onExhibitClick:ve,onReact:ye,onUserClick:e=>we("USER_PROFILE",{username:e}),onWishlistClick:e=>{z(e),i("WISHLIST_DETAIL")},onCollectionClick:e=>we("COLLECTION_DETAIL",{collection:e})}),"ACTIVITY"===a&&m&&t.jsx("div",{className:"p-4 pb-24",children:t.jsx(Yt,{notifications:N,messages:y,currentUser:m,theme:s,onAuthorClick:e=>we("USER_PROFILE",{username:e}),onExhibitClick:(e,t)=>{const s=h.find(t=>t.id===e);s&&we("EXHIBIT",{item:s,highlightCommentId:t})},onChatClick:e=>we("DIRECT_CHAT",{username:e})})}),"MY_COLLECTION"===a&&m&&t.jsx(ns,{theme:s,user:m,exhibits:h.filter(e=>e.owner===m.username),allExhibits:h,collections:b.filter(e=>e.owner===m.username),wishlist:f,onBack:()=>we("FEED"),onExhibitClick:e=>{e.isDraft?we("CREATE_ARTIFACT",{initialData:e}):ve(e)},onCollectionClick:e=>we("COLLECTION_DETAIL",{collection:e}),onReact:ye,onWishlistClick:e=>{z(e),i("WISHLIST_DETAIL")}}),"EXHIBIT"===a&&O&&t.jsx(Bt,{exhibit:O,theme:s,onBack:je,onShare:()=>{},onFavorite:()=>{},onLike:e=>ye(e),isFavorited:!1,isLiked:O.likedBy?.includes(m?.username||"")||!1,onPostComment:async(e,t,s)=>{if(!m)return;const r={id:crypto.randomUUID(),parentId:s,author:m.username,text:t,timestamp:(new Date).toLocaleString(),likes:0,likedBy:[]},a={...O,comments:[...O.comments||[],r]};A(a),await mt(a),O.owner!==m.username&&bt(O.owner,"COMMENT",m.username,O.id,O.title)},onCommentLike:async e=>{if(!m)return;const t=O.comments.map(t=>{if(t.id===e){const e=t.likedBy?.includes(m.username);return e||t.author===m.username||bt(t.author,"LIKE_COMMENT",m.username,O.id,t.text.slice(0,30)),{...t,likes:e?t.likes-1:t.likes+1,likedBy:e?t.likedBy.filter(e=>e!==m.username):[...t.likedBy||[],m.username]}}return t}),s={...O,comments:t};A(s),await mt(s)},onDeleteComment:async(e,t)=>{const s=O.comments.filter(e=>e.id!==t),r={...O,comments:s};A(r),await mt(r)},onAuthorClick:e=>we("USER_PROFILE",{username:e}),onFollow:e=>{m&&(wt(m.username,e),m.following.includes(e)||bt(e,"FOLLOW",m.username))},onMessage:e=>{we("DIRECT_CHAT",{username:e})},onDelete:async e=>{await(async e=>{Qe.exhibits=Qe.exhibits.filter(t=>t.id!==e),rt();const t=await tt();await t.delete("exhibits",e),await it(`/exhibits/${e}`,"DELETE")})(e),je()},onEdit:e=>we("CREATE_ARTIFACT",{initialData:e}),onAddToCollection:()=>J(O.id),onExhibitClick:ve,isFollowing:m?.following?.includes(O.owner)||!1,currentUser:m?.username||"",currentUserProfile:m,isAdmin:ds(m),users:xt().users,allExhibits:h,highlightCommentId:F}),"COLLECTION_DETAIL"===a&&L&&t.jsx("div",{className:"max-w-4xl mx-auto p-4 pb-24",children:t.jsx(Wt,{collection:L,artifacts:h.filter(e=>L.exhibitIds.includes(e.id)),theme:s,onBack:je,onExhibitClick:ve,onAuthorClick:e=>we("USER_PROFILE",{username:e}),currentUser:m?.username||"",onDelete:async e=>{await ht(e),je()},onLike:async e=>{}})}),"WISHLIST_DETAIL"===a&&D&&m&&t.jsx(es,{item:D,theme:s,onBack:je,currentUser:m.username,onAuthorClick:e=>we("USER_PROFILE",{username:e}),onDelete:async e=>{await(async e=>{Qe.wishlist=Qe.wishlist.filter(t=>t.id!==e),rt(),await nt(e),await it(`/wishlist/${e}`,"DELETE")})(e),je()},userInventory:h.filter(e=>e.owner===m.username)}),"USER_WISHLIST"===a&&t.jsx(rs,{ownerUsername:U,currentUser:m,wishlistItems:f.filter(e=>e.owner===U),theme:s,onBack:je,onItemClick:e=>{z(e),i("WISHLIST_DETAIL")},onUserClick:e=>we("USER_PROFILE",{username:e})}),"SOCIAL_LIST"===a&&t.jsx(ts,{type:q,username:U,currentUserUsername:m?.username,theme:s,onBack:je,onUserClick:e=>we("USER_PROFILE",{username:e})}),"SEARCH"===a&&t.jsx("div",{className:"p-4 pb-24",children:t.jsx(ss,{theme:s,exhibits:h,collections:b,users:xt().users,onBack:je,onExhibitClick:ve,onCollectionClick:e=>{R(e),i("COLLECTION_DETAIL")},onUserClick:e=>we("USER_PROFILE",{username:e}),onReact:ye,currentUser:m})}),"COMMUNITY_HUB"===a&&t.jsx("div",{className:"p-4 pb-24",children:t.jsx(Ht,{theme:s,users:xt().users,exhibits:h,onExhibitClick:ve,onUserClick:e=>we("USER_PROFILE",{username:e}),onBack:()=>we("FEED"),currentUser:m})}),"DIRECT_CHAT"===a&&m&&t.jsx(Kt,{theme:s,currentUser:m,partnerUsername:U,messages:y.filter(e=>e.sender.toLowerCase()===m.username.toLowerCase()&&e.receiver.toLowerCase()===U.toLowerCase()||e.sender.toLowerCase()===U.toLowerCase()&&e.receiver.toLowerCase()===m.username.toLowerCase()),onBack:je,onSendMessage:async e=>{const t={id:crypto.randomUUID(),sender:m.username,receiver:U,text:e,timestamp:(new Date).toLocaleString(),isRead:!1};await(async e=>{Qe.messages.push(e),rt();const t=await tt();await t.put("messages",e),await it("/messages","POST",e)})(t)}}),"CREATE_HUB"===a&&t.jsxs("div",{className:"p-6 pb-24 animate-in slide-in-from-bottom-10",children:[t.jsxs("div",{className:"flex items-center justify-between mb-8",children:[t.jsxs("button",{onClick:je,className:"flex items-center gap-2 opacity-50 hover:opacity-100",children:[t.jsx(_,{size:16})," –ù–ê–ó–ê–î"]}),t.jsx("h2",{className:"font-pixel text-lg",children:"–°–û–ó–î–ê–¢–¨"})]}),t.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[t.jsxs("button",{onClick:()=>we("CREATE_ARTIFACT"),className:"p-6 border border-green-500/30 rounded-2xl flex items-center gap-4 hover:bg-green-500/10 transition-all",children:[t.jsx("div",{className:"w-12 h-12 bg-green-500/20 rounded-full flex items-center justify-center text-green-500",children:t.jsx(Ge,{size:24})}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-pixel text-sm font-bold",children:"–ù–û–í–´–ô –ê–†–¢–ï–§–ê–ö–¢"}),t.jsx("div",{className:"text-xs opacity-50",children:"–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é"})]})]}),t.jsxs("button",{onClick:()=>we("CREATE_COLLECTION"),className:"p-6 border border-blue-500/30 rounded-2xl flex items-center gap-4 hover:bg-blue-500/10 transition-all",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-full flex items-center justify-center text-blue-500",children:t.jsx(Se,{size:24})}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-pixel text-sm font-bold",children:"–ù–û–í–ê–Ø –ö–û–õ–õ–ï–ö–¶–ò–Ø"}),t.jsx("div",{className:"text-xs opacity-50",children:"–û–±—ä–µ–¥–∏–Ω–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç—ã –≤ –∞–ª—å–±–æ–º"})]})]}),t.jsxs("button",{onClick:()=>we("CREATE_WISHLIST"),className:"p-6 border border-purple-500/30 rounded-2xl flex items-center gap-4 hover:bg-purple-500/10 transition-all",children:[t.jsx("div",{className:"w-12 h-12 bg-purple-500/20 rounded-full flex items-center justify-center text-purple-500",children:t.jsx(j,{size:24})}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-pixel text-sm font-bold",children:"–í –ü–û–ò–°–ö–ï (WISHLIST)"}),t.jsx("div",{className:"text-xs opacity-50",children:"–û–±—ä—è–≤–∏—Ç—å —Ä–æ–∑—ã—Å–∫ –ø—Ä–µ–¥–º–µ—Ç–∞"})]})]}),ds(m)&&t.jsxs("button",{onClick:()=>we("MIGRATION"),className:"p-6 border border-orange-500/30 rounded-2xl flex items-center gap-4 hover:bg-orange-500/10 transition-all",children:[t.jsx("div",{className:"w-12 h-12 bg-orange-500/20 rounded-full flex items-center justify-center text-orange-500",children:t.jsx(E,{size:24})}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-pixel text-sm font-bold",children:"–ú–ò–ì–†–ê–¶–ò–Ø –î–ê–ù–ù–´–•"}),t.jsx("div",{className:"text-xs opacity-50",children:"–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –ë–î"})]})]})]})]}),"CREATE_ARTIFACT"===a&&t.jsx("div",{className:"p-4 pb-24",children:t.jsx(Zt,{theme:s,onBack:je,onSave:async e=>{if(!m)return;const t=!!e.id,s=t&&(e.adminOwner||O?.owner)||m.username,r={...e,id:e.id||crypto.randomUUID(),owner:s,lastEditedBy:t?m.username:void 0,timestamp:t&&O?.timestamp||(new Date).toLocaleString(),likes:e.likes??0,views:e.views??0};delete r.adminOwner,t?await mt(r):await(async e=>{Qe.exhibits.unshift(e),rt();const t=await tt();await t.put("exhibits",e);const s=await it("/exhibits","POST",e);if(s&&s.imageUrls){const r={...e,imageUrls:s.imageUrls},a=Qe.exhibits.findIndex(t=>t.id===e.id);-1!==a&&(Qe.exhibits[a]=r),await t.put("exhibits",r),rt()}})(r),je()},initialData:O,userArtifacts:h.filter(e=>e.owner===m?.username),currentUser:m,allUsers:xt().users})}),"CREATE_COLLECTION"===a&&t.jsx("div",{className:"p-4 pb-24",children:t.jsx(Jt,{theme:s,userArtifacts:h.filter(e=>e.owner===m?.username&&!e.isDraft),onBack:je,onSave:async e=>{if(!m)return;const t={...e,id:e.id||crypto.randomUUID(),owner:m.username,timestamp:(new Date).toLocaleString()};e.id?await pt(t):await(async e=>{Qe.collections.push(e),rt();const t=await tt();await t.put("collections",e),await it("/collections","POST",e)})(t),je()},initialData:L,onDelete:async e=>{await ht(e),je()}})}),"CREATE_WISHLIST"===a&&t.jsx("div",{className:"p-4 pb-24",children:t.jsx(Qt,{theme:s,onBack:je,onSave:async e=>{if(!m)return;const t={...e,owner:m.username};await(async e=>{Qe.wishlist.push(e),rt(),await lt("wishlist",e),await it("/wishlist","POST",e)})(t),je()}})}),Z&&m&&t.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-end sm:items-center justify-center p-4",children:t.jsxs("div",{className:"w-full max-w-sm rounded-xl p-6 "+("winamp"===s?"bg-[#292929] border border-[#505050] text-gray-300":"bg-dark-surface border border-white/10 text-white"),children:[t.jsx("h3",{className:"font-pixel text-sm mb-4",children:"–î–û–ë–ê–í–ò–¢–¨ –í –ö–û–õ–õ–ï–ö–¶–ò–Æ"}),t.jsxs("div",{className:"space-y-2 mb-4 max-h-60 overflow-y-auto",children:[b.filter(e=>e.owner===m.username).map(e=>t.jsxs("button",{onClick:async()=>{if(e.exhibitIds.includes(Z))return;const t={...e,exhibitIds:[...e.exhibitIds,Z]};await pt(t);const s=h.find(e=>e.id===Z);s&&s.owner!==m.username&&bt(s.owner,"LIKE",m.username,s.id,s.title+" (Saved)"),J(null),alert("–î–æ–±–∞–≤–ª–µ–Ω–æ!")},className:"w-full p-3 text-left border border-white/10 rounded hover:bg-white/5 flex items-center gap-2",children:[t.jsx(Oe,{size:16})," ",e.title]},e.id)),0===b.filter(e=>e.owner===m.username).length&&t.jsx("div",{className:"opacity-50 text-xs",children:"–ù–µ—Ç –∫–æ–ª–ª–µ–∫—Ü–∏–π"})]}),t.jsx("button",{onClick:()=>J(null),className:"w-full py-3 bg-white/10 rounded font-bold text-xs",children:"–û–¢–ú–ï–ù–ê"})]})}),"USER_PROFILE"===a&&m&&t.jsx(_t,{user:m,viewedProfileUsername:U,exhibits:h,collections:b,guestbook:C,theme:s,onBack:je,onLogout:()=>{(async()=>{const e=await tt();await e.delete("system",Ze),window.location.reload()})(),i("AUTH")},onFollow:e=>{m&&(wt(m.username,e),m.following.includes(e)||bt(e,"FOLLOW",m.username))},onChat:e=>we("DIRECT_CHAT",{username:e}),onExhibitClick:ve,onReact:ye,onAuthorClick:e=>we("USER_PROFILE",{username:e}),onCollectionClick:e=>{R(e),i("COLLECTION_DETAIL")},onShareCollection:()=>{},onViewHallOfFame:()=>i("HALL_OF_FAME"),onGuestbookPost:async e=>{if(!m)return;const t={id:crypto.randomUUID(),author:m.username,targetUser:U,text:e,timestamp:(new Date).toLocaleString(),isRead:!1};await(async e=>{Qe.guestbook.push(e),rt(),await lt("guestbook",e),await it("/guestbook","POST",e)})(t),U!==m.username&&bt(U,"GUESTBOOK",m.username)},refreshData:Ne,isEditingProfile:Q,setIsEditingProfile:ee,editTagline:te,setEditTagline:se,editBio:re,setEditBio:ae,editStatus:ie,setEditStatus:le,editTelegram:ne,setEditTelegram:oe,editPassword:ce,setEditPassword:de,onSaveProfile:async()=>{if(!m)return;const e={...m,tagline:te,bio:re,status:ie,telegram:ne};ce&&(e.password=ce),await ut(e),ee(!1),de("")},onProfileImageUpload:async e=>{if(e.target.files?.[0]&&m){const t=await ft(e.target.files[0]);await ut({...m,avatarUrl:t})}},onProfileCoverUpload:async e=>{if(e.target.files?.[0]&&m){const t=await ft(e.target.files[0]);await ut({...m,coverUrl:t})}},guestbookInput:he,setGuestbookInput:ue,guestbookInputRef:be,profileTab:xe,setProfileTab:pe,onOpenSocialList:(e,t)=>{M(e),X(t),i("SOCIAL_LIST")},onThemeChange:e=>r(e),onWishlistClick:e=>{z(e),i("WISHLIST_DETAIL")}}),"HALL_OF_FAME"===a&&m&&t.jsx(Vt,{theme:s,achievements:m.achievements,onBack:je}),"MIGRATION"===a&&ds(m)&&t.jsx(os,{theme:s,onBack:je,onMigrationComplete:Ne})]})]})}class ms extends s.Component{state={hasError:!1,error:null,errorInfo:null};static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("üî¥ [ErrorBoundary] Uncaught error:",e,t),this.setState({errorInfo:t})}render(){return this.state.hasError?t.jsxs("div",{className:"fixed inset-0 z-[10000] p-4 md:p-10 bg-black text-green-500 font-mono h-screen overflow-auto",children:[t.jsx("h1",{className:"text-2xl font-bold mb-4 border-b border-green-500 pb-2 animate-pulse",children:"SYSTEM FAILURE [FATAL ERROR]"}),t.jsx("p",{className:"mb-4 text-sm opacity-80",children:"–ü—Ä–æ–∏–∑–æ—à–µ–ª —Å–±–æ–π –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏. –î–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:"}),t.jsxs("pre",{className:"text-xs bg-green-900/20 p-4 border border-green-500/50 rounded overflow-auto mb-4 whitespace-pre-wrap break-all",children:[this.state.error&&this.state.error.toString(),t.jsx("br",{}),this.state.errorInfo?.componentStack]}),t.jsx("button",{onClick:()=>window.location.reload(),className:"border border-green-500 px-4 py-2 hover:bg-green-500 hover:text-black transition-colors uppercase text-sm font-bold",children:"–ü–ï–†–ï–ó–ê–ì–†–£–ó–ö–ê / REBOOT"})]}):this.props.children}}const ps=document.getElementById("root");if(!ps)throw new Error("Could not find root element to mount to");console.log("üöÄ [System] Starting application mount...");r.createRoot(ps).render(t.jsx(s.StrictMode,{children:t.jsx(ms,{children:t.jsx(xs,{})})}));
