# Сборка Android APK для NeoArchive

## ⚠️ ВАЖНО: Где запускать команды?
**Не запускайте сборку APK внутри Docker-контейнера!**
Команды сборки Android требуют установленных Java и Android SDK, которых нет в стандартном Node.js контейнере.
Выполняйте все команды ниже в терминале вашей **основной операционной системы** (Windows, macOS, Linux).

## 1. Подготовка окружения
Убедитесь, что на вашем компьютере установлены:
1.  **Node.js** (v18+)
2.  **Android Studio** (включает Android SDK)
3.  **Java JDK 17** (должна быть настроена переменная `JAVA_HOME`)

## 2. Настройка сервера
Мобильное приложение требует HTTPS соединение с сервером.
В файле `.env` укажите публичный URL вашего API:

```env
VITE_API_URL=https://api.neoarchive.ru/api
```

## 3. Сборка APK

### Вариант А: Быстрая сборка через терминал
Эта команда соберет веб-часть и скомпилирует `.apk` файл.

```bash
npm run android:apk
```

**Если вы видите ошибку `JAVA_HOME is not set`:**
Это значит, что Java не установлена или не добавлена в PATH.
*   **Решение:** Установите OpenJDK 17 или выберите JDK в настройках Android Studio и добавьте путь к ней в переменные среды системы.

### Вариант Б: Через Android Studio (рекомендуется для первого раза)
Этот способ позволяет увидеть детальные логи ошибок и настроить эмулятор.

1.  Запустите студию с проектом:
    ```bash
    npm run android:open
    ```
2.  Дождитесь завершения `Gradle Sync` (внизу справа).
3.  В верхнем меню выберите: **Build > Build Bundle(s) / APK(s) > Build APK(s)**.

Файл будет находиться здесь:
`android/app/build/outputs/apk/debug/app-debug.apk`

## 4. Релиз (Google Play)
Для публикации используйте меню **Build > Generate Signed Bundle / APK** в Android Studio. Вам понадобится создать keystore файл для подписи приложения.
